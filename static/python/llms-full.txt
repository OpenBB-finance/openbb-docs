---
title: Basic Usage
sidebar_position: 1
description: This sections provides guidance for query syntax, expected outputs, and importing the OpenBB Python Package as part of another application.
keywords:
  - tutorial
  - import
  - from openbb import obb
  - obb
  - Python
  - static assets
  - openbb-build
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Importing - ODP Python | OpenBB Docs" />

The pages in this section explain the basic query syntax for OpenBB Python functions, what to expect on output, well as instructions for building the static assets behind the `obb` Python Package.

## Endpoint & Model Definitions

All endpoints generated by extensions in the official OpenBB GitHub [repo](https://github.com/OpenBB-finance/OpenBB/) are detailed under the [Reference](/python/reference) section of the documentation. Standard models are defined under, [Models](/python/data_models).

:::note
Because of the modular framework, your specific installation may not contain all points of reference.
:::

## Static Assets

The ODP Python Package is compiled into static files, post-installation, based on the installed extensions.

This occurs automatically on first import and will not require a restart of the interpreter.

For general use, importing the package is all you need to do.

When deploying for use in a remote container or temporary environment,
always run `openbb-build` immediately after installation.

:::info Static Assets are exclusive to the Python Interface.
Files imported, by `from openbb import obb`, are not used by the API or MCP servers.
:::

Rebuild them post-installation, or after removals and updates.
You may need to invoke the `openbb-build` command manually on occassion.

### Command Line

From the command line, with the environment active, run:

```sh
openbb-build
```

The script attempts to import the OpenBB package, and watches for assets being built.

```sh
Attempting to import the OpenBB package...

Extensions to add: alpha_vantage@1.5.0, benzinga@1.5.0, biztoc@1.5.0, bls@1.2.0, cboe@1.5.0, cftc@1.2.0, commodity@1.4.0,
congress_gov@1.1.0, crypto@1.5.0, currency@1.5.0, deribit@1.1.0, derivatives@1.5.0, ecb@1.5.0, econdb@1.4.0,
econometrics@1.6.0, economy@1.5.0, equity@1.5.0, etf@1.5.0, famafranch@1.1.0, famafrench@1.1.0, federal_reserve@1.5.0,
finra@1.5.0, finviz@1.4.0, fixedincome@1.5.0, fmp@1.5.0, fred@1.5.0, government_us@1.5.0, imf@1.2.0, index@1.5.0,
intrinio@1.5.0, multpl@1.2.0, nasdaq@1.5.0, news@1.5.0, oecd@1.5.0, openbb_charting@2.4.0, polygon@1.5.0, quantitative@1.5.0,
regulators@1.5.0, sec@1.5.0, seeking_alpha@1.5.0, stockgrid@1.5.0, technical@1.5.0, tiingo@1.5.0, tmx@1.4.0, tradier@1.4.0,
tradingeconomics@1.5.0, us_eia@1.2.0, uscongress@1.1.0, wsj@1.5.0, yfinance@1.5.0

Building...
```

If nothing to add or remove were detected, `openbb-build` will force the static files to be refreshed.

```sh

Did not build on import, triggering rebuild...
```

### Verbose

Errors will be printed if the build process fails, and you can enable debug mode to see STDOUT while the build is occuring.
Set the [environment variable](/python/settings/environment_variables) to enable.

```env
OPENBB_DEBUG_MODE='true'
```

## Importing

Initializing ODP in another application should be controlled by a single, synchronous, event - preferably on startup.

```python
from openbb import obb
```

:::warning
Race conditions can occur where multi-threaded tasks share `site-packages` while static assets are built.

Static assets will need to be updated when extensions are installed, removed, or upgraded in an environment.
:::


### Controlled Import

Importing the `obb` application can take several hundred megabytes of memory, and you may need to control when it is first initialized.

<details>
<summary mxdType="summary">Example Code</summary>

```python
from typing import Annotated

from fastapi import Depends, FastAPI
from openbb_core.app.model.abstract.singleton import SingletonMeta

app = FastAPI()


class OpenBB(metaclass=SingletonMeta):
    def __init__(self):
        import openbb

        self._obb = openbb.sdk

    @property
    def obb(self):
        return self._obb


def get_openbb():
    return OpenBB().obb


OpenBBApp = Annotated[OpenBB, Depends(get_openbb)]


@app.get("stock_quote", response_model=list)
async def quote(
    obb: OpenBBApp,
    some_parameter: int,
    symbol: str = "AAPL",
):
    """Widget description derived from the endpoint's docstring."""
    return obb.equity.price.quote(symbol, provider="yfinance").model_dump()["results"]
```

</details>


---

---
title: Input Query Parameters
sidebar_position: 1
description: This page provides comprehensive information about standardized command syntax across OpenBB Python Extension endpoints.
keywords:
  - tutorial
  - command syntax
  - standardized parameters
  - formatting
  - QueryParams
  - provider
  - data source selection
  - symbol parameter
  - date
  - time
  - timeseries
  - limit
  - kwargs
  - extraParams
  - standardParams
  - endpoint parameters
  - OBBject
  - data model
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Input Query Params - ODP Python | OpenBB Docs" />

The structure of command syntax is standardized across common fields. This ensures that a `date` is always a `date` and the format remains consistent throughout.

Standardized parameters include, but are not limited to: provider, symbol, start_date, end_date, date, limit.

When looking at a function's docstring, the standard parameters (shared across multiple providers) are positioned first. Provider-specific parameters positionally follow the `provider` argument.

The example below is from, `obb.equity.price.quote`

```console
Parameters
----------
symbol : str
    Symbol to get data for. In this case, the comma separated list of symbols.
provider : Optional[Literal['fmp', 'intrinio']]
    The provider to use for the query, by default None.
    If None, the provider specified in defaults is selected or 'fmp' if there is
    no default.
source : Literal['iex', 'bats', 'bats_delayed', 'utp_delayed', 'cta_a_delayed', 'cta_b_delayed', 'intrinio_mx', 'intrinio_mx_plus', 'delayed_sip']
    Source of the data. (provider: intrinio)
```

:::note
Examples below assume that the Python interface has been imported in the current session, and/or the Fast API has been started.

```python
from openbb import obb
```

or

```python
uvicorn openbb_core.api.rest_api:app
```

:::

## Provider

The `provider` parameter is the way to select the specific source of the data from the endpoint. If a [preference for the default provider](/python/settings/environment_variables) has not been defined, the default will be the first, alphabetically, installed provider.

Provider values are entered in lower-case, with an underscore for multiple words - for example:

```python
historical_prices = obb.equity.price.historical("aapl", provider="alpha_vantage")
```

Provider coverage can be ascertained with the command below:

```python
obb.coverage.providers
```

Refer to, [Data Extensions](/python/extensions), for instructions on installing data provider extensions.

## Symbol

Symbols are not case-sensitive, and where the function allows, can be entered as a `string`, `List[str]`, or a comma-separated `string`.

The exact format of the symbol may vary between providers - for example, share classes, exchange suffixes, and global composites. For example:

```python
obb.equity.price.historical("brk.b", provider="polygon")
```

```python
obb.equity.price.historical("brk-b", provider="fmp")
```

```python
obb.equity.price.historical(symbol="brk.a:us", provider="tmx")
```

While some providers handle the different formats on their end, others do not. This is something to consider when no results are returned from one source.

With providers supporting market data from multiple jurisdictions, the most common method for requesting data outside of US-listings is to append a suffix to the ticker symbol (e.g., `RELIANCE.NS`). Formats may be unique to a provider, so it is best to review the source's documentation for an overview of their specific conventions. For example, [this page](https://help.yahoo.com/kb/SLN2310.html) on Yahoo describes how they format symbols, which many others follow to some degree.

Single symbol:

```python
quote = obb.equity.price.quote(symbol="td", provider="fmp")
```

### Multiple Symbols

The Provider module enforces REST-compliant lists that can be entered in either format through the Python interface.

#### Comma-Separated String

This is the format required by the Fast API, when creating new data endpoints, it is important that the Python interface is able to accept both formats.

```python
quotes = obb.equity.price.quote("td,schw,jpm,ms", provider="fmp")
```

```python
import requests
r = requests.get("http://127.0.0.1:8000/api/v1/equity/price/quote?provider=fmp&symbol=td,schw,ms,jpm")
r.json()
```

#### Python List

Entering a list will provide the same outcome as above.

```python
quotes = obb.equity.price.quote(["td","schw","jpm","ms"], provider="fmp")
```

Lists of symbols can be generated from the results of other functions, and then passed to the input.

```python
symbol="spgi"
symbols = obb.equity.compare.peers(symbol)
symbols_list = [d.symbol for d in symbols.results] + [symbol]
quotes = obb.equity.price.quote(symbols_list)
```

:::note
To accomplish this same task through the Fast API, convert the list to a comma-separated string.
:::

```python
import requests
symbol="spgi"
r = requests.get(f"http://127.0.0.1:8000/api/v1/equity/compare/peers?provider=fmp&symbol={symbol}")
results = r.json()["results"]
symbols_list = [d["symbol"] for d in results] + [symbol]
symbols = ",".join(symbols_list)
response = requests.get(f"http://127.0.0.1:8000/api/v1/equity/price/quote?provider=fmp&symbol={symbols}")
response.json()
```

## Dates

Dates are entered everywhere as a string, formatted as, "YYYY-MM-DD". If the function has only the `date` parameter, the data will be a snapshot instead of a time series.

```python
historical_prices = obb.equity.price.historical(symbol="qqq", start_date="2023-01-10", end_date="2023-01-31", provider="fmp")
```

For flexibility and programmatic purposes, a `datetime` object is also accepted.

```python
from datetime import datetime
symbol="qqq"
start = datetime.strptime("100123", "%d%m%y")
end = datetime.strptime("2023-01-31","%Y-%m-%d")
historical_prices = obb.equity.price.historical(symbol, start_date=start, end_date=end, provider="fmp")
```

```python
import requests
response = requests.get(f"http://127.0.0.1:8000/api/v1/equity/price/historical?provider=fmp&symbol={symbol}&start_date={start}&end_date={end}")
response.json()
```

## Limit

Where, optional, `limit` parameters are supplied, they are likely to have sensible default states that return N results starting from the most recent entry or the `start_date`. Enter these values as an integer.

```python
income = obb.equity.fa.income("AAPL", period="quarter", provider="fmp", limit=4)
```

## \*\*kwargs

All endpoints accept additional keyword arguments, but non-existent parameters will be ignored. Invalid parameters are communicated via the `warnings` field in the command response.

Parameters can be stored as a dictionary and fed to the command as `**kwargs`. If a provider, or function, has an undocumented parameter it can still be accessed by supplying the additional kwargs.

```python
kwargs = {"symbol":"msft","start_date":"2023-01-01","provider":"polygon"}
historical_prices = obb.equity.price.historical(**kwargs)
```

```python
data = obb.equity.price.quote("brk-b", provider="fmp", source="bats")
data.warnings
```

```console
[Warning_(category='OpenBBWarning', message="Parameter 'source' is not supported by fmp. Available for: intrinio.")]
```

## References

All functions, parameters, and responses are detailed under the [Reference pages](/python/reference). The data models for each provider source are described within the [Data Models](/python/data_models) pages.

These pages are a quick way to cross-reference differences between providers. The same information is provided in a function's signature and docstring.


---

---
title: Response Model Output
sidebar_position: 2
description: This page details the basic response and output that can be expected to be received from the the ODP Python Package.
keywords:
  - ODP
  - Python
  - results
  - tutorial
  - standardized output
  - OBBject
  - basic response
  - provider
  - warnings
  - chart
  - extra
  - command coverage
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Python Outputs - Basic Usage | OpenBB Docs" />

The outputs of the API and Python Interface are nearly identical,
but the API output is only a string representation of the function response.
In Python, it is an extensible Pydantic object.

## OBBject

The output of every command is an object which contains the results of the request, along with additional information.
`OBBject` always returns with the fields listed below:

```console
id: ...                 # UUID Tag
results: ...            # Serializable results.
provider: ...           # Provider name.
warnings: ...           # List of warnings collected during execution.
chart: ...              # Chart object, if any.
extra: ...              # Extra info and execution metadata.
```

```python
from openbb import obb

data = obb.equity.price.historical("SPY", provider="polygon")

data
```

```console
OBBject

id: 06520558-d54a-7e53-8000-7aafc8a42694
results: [{'date': datetime.datetime(2022, 10, 5, 0, 0), 'open': 375.62, 'high': 37...
provider: polygon
warnings: None
chart: None
extra: {'metadata': {'arguments': {'provider_choices': {'provider': 'polygon'}, 'st...
```

### Results Formatters

Additional class methods are helpers for converting the results to a variety of formats.

- `to_dict()`: converts to a dictionary, accepting all standard "orientation" parameters, i.e., "records"
- `to_df()` / `to_dataframe()`: converts to a Pandas DataFrame.
- `to_numpy()`: converts to a Numpy array.
- `to_polars()`: converts to a Polars table.

:::info
The preferred output type can be set with a user preference.

```python
obb.user.preferences.output_type="dataframe"
```

:::

## Metadata

The ODP Python package returns metadata related to the command execution, as well as any returned from a Provider endpoint.
Both are stored in the `extra` attribute of the [OBBject](/python/developer/architecture_overview#obbject-class) response object.

It will always contain these elements:

- `arguments`: Any parameters supplied, and the selected provider source, to the function.
- `duration`: The number of nanoseconds the function took to complete.
- `route`: The command path.
- `timestamp`: Timestamp for when the command was run.

### Execution Metadata

Metadata for the command execution is captured under the `metadata` key.

```python
from openbb import obb

data = obb.economy.calendar(provider="nasdaq")

data.extra
```

```console
{'metadata': Metadata

 arguments: {'provider_choices': {'provider': 'nasdaq'}, 'standard_params': {'start_date': None, 'end_date': None}, 'extra_params': {}}
 duration: 565256375
 route: /economy/calendar
 timestamp: 2024-05-22 11:28:57.149548}
```

### Disabling

This content can be disabled as a setting in the [`user_settings.json`](/python/settings/environment_variables) file.

```json
{
  "preferences": {
    "metadata": false
  }
}
```

:::note
Metadata included as part of the command results will not be disabled by this setting.
:::

### Results Metadata

Where commands return metadata related to the requested data, it is keyable from the `extra` attribute with, `results_metadata`.

This dictionary contains contextual information and data for the `results` that is not included in the tables.
Results metadata will vary by command and provider, so it is worth exploring when it is included, below is a selection of samples.

<details>
<summary mdxType="summary">FRED</summary>

```python
data = obb.economy.fred_series("T10Y2Y")

data.extra["results_metadata"]
```

```console
{'T10Y2Y': {'title': '10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity',
  'units': 'Percent',
  'frequency': 'Daily',
  'seasonal_adjustment': 'Not Seasonally Adjusted',
  'notes': 'Starting with the update on June 21, 2019, the Treasury bond data used in calculating interest rate spreads is obtained directly from the U.S. Treasury Department (https://www.treasury.gov/resource-center/data-chart-center/interest-rates/Pages/TextView.aspx?data=yield).\r\nSeries is calculated as the spread between 10-Year Treasury Constant Maturity (BC_10YEAR) and 2-Year Treasury Constant Maturity (BC_2YEAR). Both underlying series are published at the U.S. Treasury Department (https://www.treasury.gov/resource-center/data-chart-center/interest-rates/Pages/TextView.aspx?data=yield).'}}
```

The information stored here is used by the `openbb-charting` extension for display.

![FRED Chart](https://github.com/OpenBB-finance/OpenBBTerminal/assets/85772166/67746ef0-7d61-4eed-b2e8-c32d001a8a00)

</details>

<details>
<summary mdxType="summary">EconDB</summary>

```python
data = obb.economy.indicators("PCOPP", provider="econdb")

data.extra
```

```console
{'results_metadata': {'PCOPP': {'title': 'World - Copper',
   'country': 'World',
   'frequency': 'M',
   'dataset': 'IMF_PCPS',
   'transform': None,
   'units': 'USD',
   'scale': 'Units',
   'multiplier': 1,
   'additional_info': {'FREQ:Frequency': 'M:Monthly',
    'REF_AREA:Reference Area': 'W00:All Countries, excluding the IO',
    'COMMODITY:Commodity': 'PCOPP:Primary Commodity Prices, Copper',
    'UNIT_MEASURE:Unit of Measure': 'USD:US Dollars',
    'UNIT_MULT:Scale': '0:Units'}}},
}
```

</details>

<details>
<summary mdxType="summary">Cboe</summary>

```python
data = obb.derivatives.options.chains("SPX", provider="cboe")

data.extra
```

```console
{'results_metadata': {'symbol': '^SPX',
  'security_type': 'index',
  'bid': 5293.0298,
  'bid_size': 1,
  'ask': 5295.2002,
  'ask_size': 1,
  'open': 5319.2798,
  'high': 5323.1802,
  'low': 5286.0098,
  'close': 5294.0898,
  'volume': 0,
  'current_price': 5294.0898,
  'prev_close': 5321.4102,
  'change': -27.3202,
  'change_percent': None,
  'iv30': 10.291,
  'iv30_change': 0.546,
  'iv30_change_percent': 0.056029,
  'last_tick': 'down',
  'last_trade_timestamp': '2024-05-22 14:50:36'},
}
```

</details>

<details>
<summary mdxType="summary">SEC</summary>

```python
data = obb.etf.holdings("BIL", provider="sec")

data.extra
```

```console
{'results_metadata': {'fund_name': 'SPDR(R) Bloomberg 1-3 Month T-Bill ETF',
  'series_id': 'S000017326',
  'lei': '549300GQCVCME1YJ6B50',
  'period_ending': '2023-12-31',
  'fiscal_year_end': '2024-06-30',
  'total_assets': 35015168619.91,
  'total_liabilities': 1638123692.3,
  'net_assets': 33377044927.61,
  'cash_and_equivalents': '0.00000000',
  'returns': {'2023-10-31': 0.0044,
   '2023-11-30': 0.0044,
   '2023-12-31': 0.0046},
  'flow': {'2023-10-31': {'creation': 6591274706.7,
    'redemption': 604472521.85},
   '2023-11-30': {'creation': 3244045301.3, 'redemption': 4478684406.9},
   '2023-12-31': {'creation': 639802303.2, 'redemption': 3018629744.0}},
  'gains': {'2023-10-31': {'realized': -65924.99, 'unrealized': -3793500.04},
   '2023-11-30': {'realized': 360345.39, 'unrealized': 292210.09},
   '2023-12-31': {'realized': 319796.93, 'unrealized': 3862704.46}},
  'borrowers': [{'name': 'BofA Securities, Inc.',
    'lei': '549300HN4UKV1E2R3U73',
    'value': 211562959.29},
   {'name': 'J.P. Morgan Securities LLC',
    'lei': 'ZBUT11V806EZRVTWT807',
    'value': 957576952.9},
   {'name': 'ING Financial Markets LLC',
    'lei': 'KBVRJ5K57JZ3E2AVWX40',
    'value': 247944722.5},
   {'name': 'Barclays Capital Inc.',
    'lei': 'AC28XWWI3WIBK2824319',
    'value': 248250000.0},
   {'name': 'Goldman Sachs & Co. LLC',
    'lei': 'FOR8UP27PHTHYVLBNG30',
    'value': 110741598.05},
   {'name': 'Bank of Montreal',
    'lei': 'NQQ6HPCNCCU6TUTQYE16',
    'value': 87276542.32},
   {'name': 'Nomura Securities International, Inc.',
    'lei': 'OXTKY6Q8X53C9ILVV871',
    'value': 469556172.09},
   {'name': 'Daiwa Capital Markets America Inc.',
    'lei': 'M67H5PRC0NQKM73ZAS82',
    'value': 198566750.0}]}
}
```

</details>

## LLM Mode

Large Language Model (LLM) mode is optimized for interfacing with LLM frameworks such as [Magentic](https://github.com/jackmpcollins/magentic), [Langchain](https://github.com/langchain-ai/langchain), [Haystack](https://github.com/deepset-ai/haystack), and others. It allows control over the length of docstrings, and converts the output to a JSON-encoded string.

### Output

Enable LLM mode for the response object by configuring [`user_settings.json`](/python/settings/user_settings), or for just the current Python session.

```python
from openbb import obb

obb.user.preferences.output_type="llm"
```

Function responses will only contain the `results` portion of the `OBBject`.

```python
'[{"date":"2025-10-16T00:00:00","maturity":"month_3","rate":0.0189885821,"maturity_years":0.25}, ... ]'
```

You can try other output [formatters](#results-formatters) such as `dict`, or you can build your own output handlers as [OBBject extensions](/python/developer/extension_types/obbject)

### Docstring Sections

:::important Python Interface Only
This setting does not alter the REST API documentation.
:::

Sections and length are defined in [`system_settings.json`](/python/settings/system_settings).
They allow targeting individual sections, and limiting the overall length.

Available docstring sections are: `['description', 'parameters', 'returns', 'examples']`

```json
{
  ...
  "python_settings": {
    "docstring_sections": ["description", "examples"],
    "docstring_max_length": 1024
  }
}
```

Finally, rebuild the Python static assets to apply these changes:

```sh
openbb-build
```

The docstring should now be reduced, for example `obb.equity.price.historical`:

```sh
Get historical price data for a given stock. This includes open, high, low, close, and volume.


Examples
--------
>>> from openbb import obb
>>> obb.equity.price.historical(symbol='AAPL', provider='fmp')
>>> obb.equity.price.historical(symbol='AAPL', interval='1d', provider='intrinio')
```


---

---
title: Architecture Overview
sidebar_position: 1
description: This guide provides insights into the architecture and components of the ODP Python Package. It covers the key classes, import statements, and the TET pattern used in building the Fetcher classes.
keywords:
  - Open Data Platform by OpenBB Architecture
  - OpenBB Platform Architecture
  - Python Interface
  - Build script
  - FastAPI
  - API
  - Key Classes
  - Import Statements
  - TET Pattern
  - Fetcher Classes
  - Core Dependencies
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Architecture Overview - Developer | OpenBB Docs" />

This page provides a general overview of the ODP Python Package architecture and the key classes most processes interact with.

<img
  src="https://openbb-cms.directus.app/assets/67ec2d35-b194-4ce2-8403-bfe274ac54b2.png"
  alt="Overview"
  width="100%"
/>

## Overview

The `openbb-core` package relies on a set of carefully selected Python libraries, including:

- FastAPI for building the API.
- Uvicorn as the ASGI server.
- Pandas for data manipulation and analysis.
- Pydantic for data validation and serialization using Python type annotations.
- Requests/AIOHTTP for making HTTP requests.
- WebSockets for handling WebSocket connections.

The current specifications can be found in the `pyproject.toml` [file](https://raw.githubusercontent.com/OpenBB-finance/OpenBB/refs/heads/develop/openbb_platform/core/pyproject.toml) of the GitHub repository.

The `openbb-core` package comes with the ability to operate two, independent, interfaces.

- Python Interface
  - Python application wrapping the installed routers.
  - A build script writes static files to create the application, which includes all installed extensions.
    - Docstrings and function signatures are generated by this process.
  - Configurable, and extendable, response object handling data validation, timestamping, and more.
- REST API
  - An instance of FastAPI

The application - both Python Interface and REST API - share core logic and models. It is the product of all installed [extensions](/python/extensions).

All routes are a subclass of the Router class.

:::info Deploying Custom Applications
Keeping the application as lean as possible is crucial for maintaining its performance, and to eliminate bloat. Install only the components required to get the job(s) done.
:::

With just the Core, there are no routers or endpoints. Users and developers are free to create their own combinations of extensions, tailored to suit specific requirements.

### Python Interface

When no extensions are installed, a message will display indicating that it failed to import any extensions.

```python
>>> from openbb import obb
Failed to import extensions. Are any installed?
>>> obb
OpenBB Platform v1.5.1core

Utilities:
    /user
    /system
    /coverage

```

:::important Key Information

The build script requires write access to the site-packages folder, post-installation, for generating static assets.

When a new extension is installed, or removed, the static assets must be regenerated in order to reflect the changes.

Remote deployments utilizing the interface should invoke the `openbb-build` command line script from the shell script establishing the environment, packages, and file system.
:::

Using the import below initializes the application instance from static files generated by the build script.

```python
from openbb import obb
```

The build script is not part of the `openbb-core` package. It is in the main package (`pip install openbb`), and it can be installed without any other components.

If `openbb` is not an installed package, but `openbb-core` is:

```sh
pip install openbb --no-deps
```

To build the assets:

```python
import openbb

openbb.build()
```

Restart the Python interpreter to begin using the application with:

```python
from openbb import obb
```

Alternatively, the process above can be run from the command line shell:

```sh
openbb-build
```

The bare interface includes:

- *Deprecated* /account: This module is deprecated and will be removed in a future version.
- /user: The [`user_settings.json`](/python/settings/environment_variables) object.
- /system: The [`system_settings.json`](/python/settings/system_settings) object.
- /coverage: Information and metadata about the data provider extensions and their definitions (providers, commands, command_model, command_schemas, reference)

:::tip Python Settings
See [`system_settings.json`](/python/settings/system_settings) for configuring runtime parameters.
:::

### API Interface

Items described immediately above will be included as routers by setting the [environment variable](/python/settings/environment_variables), `OPENBB_DEV_MODE='1'`

The FastAPI instance, with all installed routers and extensions, can be imported with:

```python
from openbb_core.rest_api import app
```

Launched via Uvicorn:

```sh
uvicorn openbb_core.rest_api:app
```

:::tip API Settings
See [`system_settings.json`](/python/settings/system_settings) for configuring runtime parameters.
:::

## Providers

<div
  style={{ display: "flex", justifyContent: "center", alignItems: "center" }}
>
  <img
    src="https://openbb-cms.directus.app/assets/cc978d76-269b-4793-a0bf-fe892b757e89.png"
    alt="Providers"
    width="60%"
  />
</div>

### QueryParams Class

The QueryParams class is a standardized model for handling query input parameters. Similar to `Data`, it is a subclass of `pydantic.BaseModel`.

Behaviour described here is mostly applicable to endpoints utilizing the `ProviderInterface`.

The class is used by the `ProviderInterface` to validate, merge, and discriminate endpoint parameters shared by multiple provider extensions.

Along with `__alias_dict__`, `QueryParams` uses `__json_schema_extra__` to constrict parameter inputs, and to deterimine when more than one entry should be accepted as a list.

```python
from openbb_core.provider.abstract.query_params import QueryParams
```

<details>
<summary mdxType="summary">Example</summary>

```python
"""Some Query Model."""

from datetime import date as dateType
from typing import Optional
from warnings import warn

from openbb_core.provider.abstract.query_params import QueryParams
from pydantic import Field, field_validator


class SomeQueryParams(QueryParams):
    """Some Query Parameters."""

    __alias_dict__ = {
        "symbol": "ticker",
        "start_date": "begin",
        # "input_field": "output_alias"
    }
    __json_schema_extra__ = {
        "symbol": {"multiple_items_allowed": True, "choices": SOME_SYMBOL_LIST},
        "interval": {"multiple_items_allowed": False},  # No need to define this, it is the default behaviour.
    }

    symbol: str = Field(description="The ticker symbol.")
    interval: Literal["1d", "1w", "1m"] = Field(
        default="1d",
        description="The interval of the timeseries. Choices: ["1d", "1w", "1m"]",
    )
    start_date: Optional[dateType] = Field(
        default=None,
        description="The start date, as YYYY-MM-SS, or datetime.date object",
    )
    end_date: Optional[dateType] = Field(
        default=None,
        description="The end date, as YYYY-MM-SS, or datetime.date object",
    )

    @field_validator("symbol", mode="before", check_fields=False)
    @classmethod
    def _validate_symbol(cls, v) -> str:
        """Validate the symbol."""
        if not v:
            raise ValueError("Please enter a symbol.")
        symbol = v if isinstance(v, list) else v.upper().split(",")

        new_symbols: list = []

        for s in symbol:
            if s not in SOME_SYMBOL_LIST:
                msg = f"Invalid symbol provided {s}"
                warn(msg)
                continue
            new_symbols.append(s)

        if not new_symbols:
            raise ValueError(f"No valid symbols supplied. Choices are: {SOME_SYMBOL_LIST}")

        return ",".join(new_symbols)
```

</details>

### Data Class

The OpenBB Standardized Data Model, and is a subclass of `pydantic.BaseModel`.

This is the base class for all data returned via the `ProviderInterface`, and is used for `POST` requests to the `data` field.

```python
from openbb_core.provider.abstract.data import Data
```

Key Features:

- Dynamic field support: Dynamically handles fields that are not pre-defined in the model,
- Alias handling: Maintain compatibility with different naming conventions across various data formats.
- Datetime/string interoperability.

<details>
<summary mdxType="summary">Example</summary>

```python
# Direct instantiation
data_record = Data(name="OpenBB", value=42)

# Conversion from a dictionary
data_dict = {"name": "OpenBB", "value": 42}
data_record = Data(**data_dict)

# __alias_dict__
class SomeData(Data):
    """Some Data Model."""

    __alias_dict__ = {
        "output_field": "someWhackyInputName",
    }
    output_field: str = Field(description="My Output")

SomeData(someWhackyInputName="Some Output")
```

Output:

```sh
SomeData(output_field=Some Output)
```

</details>

### Fetcher Class

The `Fetcher` class is the execution pipeline for the provider interface.
It imposes a standardized structure, namely:

- Transform the query: output of this method should be `QueryParams` child.
- Extract the data: output of this method can be `Any` but it's recommended to be a `dict`.
- Transform the data: output of this method should be a `List[Data]` or `Data` (or a child of it - i.e. SomeData).
- Built-in test for verifying basic operation at each stage.

#### The TET Pattern

Each `Fetcher` follows this pattern. It stands for **Transform, Extract, Transform**.

The workflow divides data collection into three, seperate, tasks.

![Diagram](https://github.com/OpenBB-finance/OpenBB/assets/48914296/ae9908be-00c0-40af-8acb-afeeb9629f2b)

```python
from openbb_core.provider.abstract.fetcher import Fetcher
```

The generic methods are meant to be overwritten with the implementation.

```python

class SomeFetcher(Fetcher[SomeQueryParams, list[SomeData]]):
    """Some Fetcher."""

    # Tell query executor if credentials are required. Can be overridden by subclasses.
    # Useful if a provider has some endpoints requiring API keys, but not all.
    require_credentials = False

    @staticmethod
    def transform_query(params: dict[str, Any]) -> SomeQueryParams:
        """Transform the params to the provider-specific query."""
        raise NotImplementedError

    @staticmethod
    async def aextract_data(query: SomeQueryParams, credentials: Optional[dict[str, str]], **kwargs: Any) -> dict:
        """Asynchronously extract the data from the provider."""
        raise NotImplementedError

    @staticmethod
    def extract_data(query: SomeQueryParams, credentials: Optional[dict[str, str]], **kwargs: Any) -> dict:
        """Extract the data from the provider."""
        raise NotImplementedError

    @staticmethod
    def transform_data(query: SomeQueryParams, data: dict, **kwargs: Any) -> list[SomeData]:
        """Transform the provider-specific data."""
        raise NotImplementedError
```

:::note Notes

- One of, `extract_data`, or, `aextract_data`, must be implemented.
- All parameters for these methods are positional and should be defined as described above.
  :::

## Extensions

<div
  style={{ display: "flex", justifyContent: "center", alignItems: "center" }}
>
  <img
    src="https://openbb-cms.directus.app/assets/a25f6c03-19a8-4775-9e52-180aff8bf186.png"
    alt="Extensions"
    width="60%"
  />
</div>

### Routers

Router extensions are registered in the `pyproject.toml` file, and installed as a Python package.

```toml
[tool.poetry.plugins."openbb_core_extension"]
my_router = "my_router.my_router:router"
```

The `Router` class is a subclass of `fastapi.APIRouter`, helping validate and complete function signatures, ensuring that the functions registered as API endpoints have the correct parameters and return types.

```python
from openbb_core.provider.app.router import Router
```

Initialize the class with a prefix and description.

```python
some_router = Router(prefix="", description="Some description of this router.")
some_router.include_router(some_sub_router)
```

The `api_router` property provides access to the underlying APIRouter instance, allowing for direct interaction with the FastAPI routing system, if needed.

### @router.command

A `@router.command` decorator is exposed upon initialization, extending the functionality of `FastAPI().add_api_route()` to include additional parameters:

- `model`
  - A model name shared by all Provider extensions feeding the same input - i.e, "EquityHistorical"
- `examples`
  - Examples for use to include in documentation and Python docstring - see the page [here](/python/developer/extension_types) for an explanation.
- `no_validate`
  - A flag to disable response validation for the endpoint.
    - The output type is assigned as `Any`
- All other arguments and keyword arguments are passed to `APIRouter.add_api_route` - i.e, `openapi_extra=dict(some_key=some_value)`

#### Response Model

Define the response model as part of the function's definition.

```python
@router.command(
    methods=["POST"],
    examples=[
        PythonEx(
            description="Calculate HMA with historical stock data.",
            code=[
                "stock_data = obb.equity.price.historical(symbol='TSLA', start_date='2023-01-01', provider='fmp')",
                "hma_data = obb.technical.hma(data=stock_data.results, target='close', length=50, offset=0)",
            ],
        ),
    ],
)
def hma(
    data: list[Data],
    target: str = "close",
    index: str = "date",
    length: int = 50,
    offset: int = 0,
) -> list[Data]: ...
```

### OBBject Class

The `OBBject` class is the standard response object from output functions, and has the following attributes:

- `results`: Serializable data that was returned by the command.
- `provider`: The name of the provider that was used to obtain the data, if any.
- `warnings`: Warnings generated by the command execution.
- `extra`: Additional metadata about the command run, including any arguments, the route, the timestamp, etc.

It is extendable, similar to a Pandas extension, and has methods for converting the results to different formats.

```python
from openbb_core.app.model.obbject import OBBject
```

A bare instance can be created by defining `results` as None.

```python
obbject = OBBject(results=None)
```

#### Output Conversion

Various formats and filtering can be applied to the function's output.

- `model_dump()`: Pydantic method for converting the complete object to a Python dictionary.
- `model_dump_json()`: Pydantic method for converting the complete object to a serialized JSON string.
- `to_df()`: Alias for `to_dataframe()`, and converts the contents of `obbject.results` to a Pandas DataFrame.
- `to_dict()`: Converts the contents of `obbject.results` to a Python dictionary object with a given `orientation`.
- `to_numpy()`: Convert the contents of `obbject.results` to a NumPy array.
- `to_polars()`: Converts the contents of `obbject.results` to a Polars DataFrame.

:::note
Polars is not included with OpenBB packages and must be installed.
:::

#### OBBject Extensions

An OBBject extension is created by defining `pyproject.toml` and installing the package.

```toml
[tool.poetry.plugins."openbb_obbject_extension"]
some_extension = "some_extension:ext"
```

The module's `__init__.py` file creates an instance of the extension object, and is attached to the output of every command.

```python
from openbb_core.app.model.extension import Extension

ext = Extension(name="some_extension")

@ext.obbject_accessor
class SomeExtension:
    def __init__(self, obbject):
        self._obbject = obbject

    def hello(self):
        print(f"Say Hello!")
```

An example of this type of extension is, [`openbb-charting`](/python/extensions/infrastructure/openbb-charting).

## Provider to Extension

<img
  src="https://openbb-cms.directus.app/assets/67ec2d35-b194-4ce2-8403-bfe274ac54b2.png"
  alt="Overview"
  width="100%"
/>

### Provider Interface

The `ProviderInterface` class is the map of all installed provider extensions to their respective callables, and is a Singleton accepting no initialization parameters.

It is responsible for handling the `provider` parameter - i.e, `provider="yfinance"` at execution, and is called by internal processes.

There is not a general need to interact with this class directly; however, it is useful to know that it exists.

```python
from openbb_core.app.provider_interface import ProviderInterface
```

Each item in the `ProviderInterface` maps to a `Fetcher`, which executes the TET pattern.

#### Provider Extensions

A provider extension is created by defining `pyproject.toml` and installing the package.

```toml
[tool.poetry.plugins."openbb_provider_extension"]
some_provider = "some_provider:some_provider"
```

It is a collection of data-collecting Fetchers that should be added to the application via the `provider` parameter.

### Provider Class

The `Provider` class is initialized in the `__init__.py` file of a provider extension module.

```python
from openbb_core.provider.abstract.provider import Provider
```

It maps the `Router` to the `Provider`, and defines other key metadata for the extension. The example below is from `openbb-bls`.

This is how the `ProviderInterface` maps any `@router.command(model="SomeModel")` function to all known instances.

<details>
<summary mdxType="summary">Example</summary>

```python
"""BLS Provider Module."""

from openbb_bls.models.search import BlsSearchFetcher
from openbb_bls.models.series import BlsSeriesFetcher
from openbb_core.provider.abstract.provider import Provider

bls_provider = Provider(
    name="bls",
    website="https://www.bls.gov/developers/api_signature_v2.htm",
    description="The Bureau of Labor Statistics' (BLS) Public Data Application Programming Interface (API)"
    + " gives the public access to economic data from all BLS programs."
    + " It is the Bureau's hope that talented developers and programmers will use the BLS Public Data API to create"
    + " original, inventive applications with published BLS data.",
    credentials=["api_key"],
    fetcher_dict={
        "BlsSearch": BlsSearchFetcher,
        "BlsSeries": BlsSeriesFetcher,
    },
    repr_name="Bureau of Labor Statistics' (BLS) Public Data API",
    instructions="Sign up for a free API key here: https://data.bls.gov/registrationEngine/",
)
```

</details>

### Using Fetcher Class as a function

A `Fetcher` can be executed without initialization, as an async function. It requires two positional arguments as dictionaries:

- `query` - a dictionary to be converted into the QueryParams class.
- `credentials` - a dictionary of credentials required for the provider and endpoint.
  - Pass as an empty dictionary when no credentials are required.

```python
results = await SomeFetcher.fetch_data({"symbol": "btcusd"}, {})
```

The return is the output of `SomeFetcher.tranform_data`

To implement the `ProviderInterface` as a `Router` endpoint, follow the pattern below in the extension's `router` file.

<details>
<summary mdxType="summary">Example</summary>

```python

from openbb_core.app.model.command_context import CommandContext  # A FastAPI Depends injection with the initialized user and system preferences
from openbb_core.app.model.obbject import OBBject  # The OpenBB standard response object with output validation.
from openbb_core.app.provider_interface import (
    ExtraParams, # All provider-specific parameters.
    ProviderChoices, # All providers feeding the endpoint.
    StandardParams,  # Parameters defined in the common 'Standard' model, if any.
)
from openbb_core.app.query import Query  # The query executor.
from openbb_core.app.router import Router


router = Router(prefix="", description="Some Router.")


@router.command(
    model="SomeModel",
    examples=[
        APIEx(parameters={"symbol": "btcusd", "interval": "1d", "provider": "some_provider"}),
    ],
)
async def some_function(
    cc: CommandContext,
    provider_choices: ProviderChoices,
    standard_params: StandardParams,
    extra_params: ExtraParams,
) -> OBBject:
    """Use the `SomeModel` Fetcher."""
    return await OBBject.from_query(Query(**locals()))
```

</details>


---

---
title: Introduction
sidebar_position: 0
description: An overview of the three types of OpenBB extensions.
keywords:
  - ODP
  - OpenBB Platform
  - Develop
  - Extension
  - Provider
  - Router
  - OBBject
  - Local Development
  - Python
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="Extension Types | OpenBB Docs" />



<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Provider Extensions"
    description="Get started building OpenBB Provider Extensions."
    url="/python/developer/extension_types/provider"
  />
</ul>

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Router Extensions"
    description="Create new routes and endpoints with OpenBB Router Extensions."
    url="/python/developer/extension_types/router"
  />
</ul>

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="OBBject"
    description="Add functionality to the OBBject response object."
    url="/python/developer/extension_types/obbject"
  />
</ul>


---

---
title: OBBject Extensions
sidebar_position: 4
description: This page provides information about how to write extensions for the OBBject class and Python interface response object.
keywords:
  - OBBject
  - Python
  - Development
  - OpenBB Platform
  - extensions
  - obbject extension
  - accessor
  - decorator
  - how-to
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Build OBBject Extensions - Developer | OpenBB Docs" />

OpenBB provides some basic methods for interacting with common data structures that will be seen in the results attribute of the [`OBBject`](/python/basic_usage/response_model).

If you are working with custom data, you may also want specific methods for interacting with the data, post-request.

The `openbb-core` package makes the `OBBject` class extendable, similar to extensions and accessors for Pandas.
It relies on plugins through the Poetry dependency management package.

This page will go through the steps for developing a simple response object extension.

:::note
This type of extension is intended for use with the Python Interface.
:::

## Folder structure

```shell
obbject_example
├── README.md
├── openbb_empty_obbject
│   └── __init__.py
├── poetry.lock
└── pyproject.toml
```

The `README.md` file can be completely empty, it just needs to exist.

Extension code will go directly in the `__init__.py` file.

### TOML File

The entry point for the extension is specified as a Poetry plugin, near the bottom of the file.

```toml
[tool.poetry.plugins."openbb_obbject_extension"]
example = "openbb_empty_obbject:ext"
```

A complete `pyproject.toml` looks something like:

<details>
<summary mdxType="summary">`pyproject.toml` </summary>
```toml
[tool.poetry]
name = "openbb-empty-obbject"
version = "0.0.0"
description = "An empty OBBject extension"
authors = ["Hello <hello@world.com>"]
readme = "README.md"
packages = [{ include = "openbb_empty_obbject" }]

[tool.poetry.dependencies]
python = "^3.10,<3.14"
openbb-core = "*"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.plugins."openbb_obbject_extension"]
empty = "openbb_empty_obbject:ext"
```
</details>


### Writing the Extension

In this example the extension code all lives inside `__init__.py`.

When installed, every response object from the Python Interface will have the attribute defined by "name".

```python
"""Empty OBBject extension."""

from openbb_core.app.model.extension import Extension

ext = Extension(name="empty")

@ext.obbject_accessor
class Empty:
    """An Empty OBBject extension."""
    # `obbject` is the response object that will be passed into the extension.
    # Note: this is not a typo.
    def __init__(self, obbject):
        """Creates an instance of the Empty OBBject extension."""
        self._obbject = obbject

    def hello(self):
        """Print a greeting message."""
        print(f"Hello from the Empty OBBject extension!\n\nOBBject Results: {self._obbject.results}")
```

## Install Extension

With the code structure in place, install the extension into the desired environment.

Navigate into the folder where the `pyproject.toml` file is, open a terminal, and enter:

```sh
pip install -e .
openbb-build
```

If there are no provider or router extensions installed, the console will still display the error message.

```sh
Failed to import extensions. Are any installed?
```

This means there are no endpoints to run - i.e, `obb.equity.price.historical()`. The extension is applied only the output of the endpoints. You can try this example code in conjunction with the [router](/python/developer/extension_types/router) extension example.

## Use Extension

The router example contains an endpoint, `obb.empty.hello()`, which returns an `OBBject`.

This response will have the `empty` accessor, with the function defined above, in `__init__.py`.

```console
>>> from openbb import obb
>>> output = obb.empty.hello()
>>> output

OBBject

id: 068ee9a9-7853-7176-8000-567f982f83ad
results: Hello from the Empty Router extension!
provider: None
warnings: None
chart: None
extra: {'metadata': {'arguments': {'provider_choices': {}, 'standard_params': {}, '...

>>> output.empty.hello()

Hello from the Empty OBBject extension!

OBBject Results: Hello from the Empty Router extension!
```

## Callable Accessor

The namespace represents any callable, not just a class. Include `obbject` as the first positional argument for the function being decorated.

Replace the `__init__.py` code with the snippet below.

```python
"""Empty OBBject extension."""

from openbb_core.app.model.extension import Extension

ext = Extension(name="empty")


@ext.obbject_accessor
def hello(obbject):
    """Say hello."""
    return f"Hello from empty OBBject extension! You have {len(obbject.results)} items."
```

The `hello` function now runs directly from `output.empty`.

```console
>>> from openbb import obb
>>> output = obb.empty.hello()
>>> output.empty
'Hello from empty OBBject extension! You have 38 items.'
>>> len(output.results)
38
>>> output.results
'Hello from the Empty Router extension!'
```


---

---
title: Provider Extensions
sidebar_position: 1
description: This page provides information about how to write provider extensions for the OpenBB Python Package using the ETL pattern, and how to add them to Routers as endpoints.
keywords:
  - ODP
  - Provider
  - Data
  - Standardization
  - ETL
  - Router
  - API
  - OBBject
  - Python
  - Development
  - OpenBB Platform
  - extensions
  - endpoints
  - how-to
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Build Provider Extensions - Developer | OpenBB Docs" />

A provider extension refers to a specific source of data.
Each endpoint can be serviced by multiple providers,
and shared parameters or data fields are considered as "standard" items.

:::important
By themselves, provider extensions do not map to any specific endpoint or API route.

Instead, they map to metamodels and the router function references a model through a specific pattern.
:::

## Folder structure

```shell
provider_example
├── README.md
├── openbb_empty_provider
│   └── __init__.py
│   └── models
│       └── __init__.py
│       └── empty_model.py
│   └── utils
│       └── __init__.py
│       └── helpers.py
├── poetry.lock
└── pyproject.toml
```

The main `__init__.py` file will initialize a `Provider` class and map all of the models to the metamodels referenced in router endpoints.

## TOML File

The entry point for the extension is specified as a Poetry plugin, near the bottom of the file.

```toml
[tool.poetry.plugins."openbb_provider_extension"]
empty = "openbb_empty_provider:empty_provider"
```

<details>
<summary mdxType="summary">`pyproject.toml` </summary>
```toml
[tool.poetry]
name = "openbb-empty-provider"
version = "0.0.0"
description = "Empty provider extension for OpenBB"
authors = ["Hello <hello@world.co>"]
readme = "README.md"
packages = [{ include = "openbb_empty_provider" }]

[tool.poetry.dependencies]
python = "^3.10,<3.14"
openbb-core = "*"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.plugins."openbb_provider_extension"]
empty = "openbb_empty_provider:empty_provider"
```

</details>

## Provider Definition

Open or create the main `__init__.py` file with a code editor.

Initialize an instance of the `Provider` class by naming the local variable as `{name}_provider`.
This should be the same as what was defined in `pyproject.toml`

:::tip
`__init__.py` requires imports which may not have been built yet.

Install the extension with an empty `fetcher_dict` field - `fetcher_dict={}` - then add them when ready.

When installing the extension, adding or changing items in the `fetcher_dict`, you must run `openbb-build` from the command line before using the Python Interface.
:::

```python
from openbb_core.provider.abstract.provider import Provider
from openbb_empty_provider.models.empty_model import EmptyFetcher


empty_provider = Provider(
    name="empty",
    website="http://empty.io",
    description="""The empty provider is a supplier of promises.""",
    # credentials=["api_key"],  # Credentials added here are mapped to `user_settings.json` in the `credentials` key.
    # Don't do "empty_api_key" here, the `name` will prefix whatever items are listed in the credentials field.
    fetcher_dict={
        "EmptyModel": EmptyFetcher  # The key is mapped to in @router.command(model="EmptyModel", methods=["GET"])
    },
)
```

## Provider Model

Provider data pipelines use the [`Fetcher`](/python/developer/architecture_overview#fetcher-class) class to transform and validate user input, extract raw data from the source, and transform the data into serializable content.

Transformed data will be ready to load into a database or use by downstream processes.

The entire file consists of three classes, and it can be executed asynchronously without initialization.

- `QueryParams`
- `Data`
- `Fetcher`

### Standard Models

If an endpoint is shared between multiple providers, they are likely to have some common ground.

In this case, the metamodel will represent the standard, and the providers shall inherit from the standard.

A standard model will have only `QueryParams` and `Data`, both are a subclass of `pydantic.BaseModel`.

<details>
<summary mdxType="summary">Example Standard Model</summary>
```python
"""Some Time Series Standard Model"""

from datetime import date as dateType

from openbb_core.provider.abstract.data import Data
from openbb_core.provider.abstract.query_params import QueryParams
from pydantic import Field

class SomeTimeSeriesQueryParams(QueryParams):
    """Some Time Series Query Params"""
    symbol: str = Field(
        description="Ticker symbol for the time series."
    )
    start_date: dateType | None = Field(
        default=None,
        description="Start date of the data.",
    )
    end_date: dateType | None = Field(
        default=None,
        description="End date of the data.",
    )

class SomeTimeSeriesData(Data):
    """Some Time Series Data"""

    date: dateType = Field(
        description="Date of the data.",
    )
    symbol: str = Field(
        description="Symbol for the data.",
    )
    value: float = Field(
        description="End of day value of the symbol."
    )
```
</details>

The provider should then inherit from this model, prefixing the name with itself.

```python
class EmptySomeTimeSeriesQueryParams(SomeTimeSeriesQueryParams):
    """Empty Some Time Series Query Params"""
    # No `pass` required if no additional parameters are added.


# Add additional fields, or modify the standard model definition to suit.

class EmptySomeTimeSeriesData(SomeTimeSeriesData):
    """Empty Some Time Series Data"""

    unit: str | None = Field(
        default=None,
        description="Unit of measurement represented by the value."
    )
```

:::info
The resulting function signature will display these parameters as `**kwargs`, but their definitions will display in the docstring and `reference` metadata. Required provider parameters may appear as `Optional` in docstrings, but their inputs will be validated using the model at execution.
:::

### Fetcher

Next, build the `Fetcher` class. Use the code block below as a template, the structure and signatures will always be similar.
Most of the business logic happens in one of, `extract_data` or `aextract_data`.

A Fetcher divides the process into three distinct sections:

- Transform Query
  - Validates the user input against the QueryParams model.
- Extract Data
  - Gets the raw data (or as close to raw as possible) from the source.
- Transform Data
  - Validate the data against the Data model and return the results.
  - Output is returned to the user under `OBBject.results`.

<details>
<summary mdxType="summary">Example Fetcher Code</summary>
```python
class EmptySomeTimeSeriesFetcher(
    Fetcher[
        EmptySomeTimeSeriesQueryParams,
        list[
            EmptySomeTimeSeriesData
        ],  # Remove list if returning a single record or dictionary
    ]
):
    """Some Time Series Fetcher."""

    # Use this to disable the requirement of credentials for this endpoint
    # and provider, if applicable.

    # require_credentials = False

    @staticmethod
    def transform_query(params: dict) -> EmptySomeTimeSeriesQueryParams:
        """Transform query params."""
        transformed_params = params.copy()
        # if transformed_params.get("some_param"):
        #     do something with it here.
        # and use field_validator in the model to set defaults.
        return EmptySomeTimeSeriesQueryParams(**transformed_params)

    @staticmethod
    async def aextract_data(
        query: EmptySomeTimeSeriesQueryParams,
        credentials: dict | None,
        **kwargs,
    ) -> list:  # Typing here should match the 'data' input of 'transform_data'.
        """Extract data."""
        # pylint: disable=import-outside-toplevel
        # from openbb_core.provider.utils.helpers import (
        #    make_request,
        #    amake_request,
        #    amake_requests,
        #    get_querystring,
        #    get_requests_session,
        #    get_async_requests_session,
        # )
        # Use these to make HTTP requests.
        # Always lazy-load imports inside functions to avoid circular imports
        # and to speed up initial load time of the application.

        # Example of making a request
        # url = "https://example.com/api"
        # querystring = get_querystring(
        #     {
        #         "symbol": query.symbol,
        #         "start_date": query.start_date,
        #         "end_date": query.end_date,
        #         # Add other parameters here
        #     }
        # )
        #
        # headers = {
        #     "Authorization": f"Bearer {credentials['empty_api_key']}"
        # } if credentials else ""
        #
        # response = await amake_request(url, headers=headers, params=querystring)
        #
        # data = response.json()
        #
        # Process the data into a list of EmptySomeTimeSeriesData
        data = [
            {
                "date": dateType(2023, 1, 1),
                "symbol": query.symbol,
                "value": 100.0,
                "unit": "USD",
            },
            {
                "date": dateType(2023, 1, 2),
                "symbol": query.symbol,
                "value": 101.5,
                "unit": "USD",
            },
            # Add more records as needed
        ]

        return data

    @staticmethod
    def transform_data(
        query: EmptySomeTimeSeriesQueryParams, data: list, **kwargs: Any
    ) -> list[EmptySomeTimeSeriesData]:
        """Transform data."""
        # Here you can clean and validate the data as needed.
        # The model should do most of the heavy lifting.
        return [EmptySomeTimeSeriesData.model_validate(item) for item in data]

# This is the complete model, it can be executed with:
# result = await EmptySomeTimeSeriesFetcher.fetch_data({}, {})
# Where the first dict is the query parameters, and the second is the credentials.
# If no credentials are required, use an empty dict.
```
</details>


## Add Endpoint

---

---
title: Router Extensions
sidebar_position: 1
description: This page provides information about how to write router extensions for the OpenBB Python Package.
keywords:
  - ODP
  - Router
  - API
  - MCP
  - OBBject
  - Python
  - Development
  - OpenBB Platform
  - extensions
  - how-to
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Build Router Extensions - Developer | OpenBB Docs" />

A router extension refers to API endpoints, paths, and the namespaces within the Python Interface.
They are the exposed, user-facing, functions and power all of the interfaces - REST API, MCP, Notebook, etc.

Under the hood, router extension modules are instances of `fastapi.APIRouter`.

## Folder structure

```shell
router_example
├── README.md
├── openbb_empty_router
│   └── __init__.py
│   └── empty_router.py
├── poetry.lock
└── pyproject.toml
```

The `README.md` file can be completely empty, it just needs to exist.

Extension code will go in the `empty_router.py` file, and `__init__.py` contains no code.

### TOML File

The entry point for the extension is specified as a Poetry plugin, near the bottom of the file.

<details>
<summary mdxType="summary">`pyproject.toml` </summary>
```toml
[tool.poetry]
name = "openbb-empty-router"
version = "0.0.0"
description = "An empty OpenBB Router extension"
authors = ["Hello <hello@world.com>"]
readme = "README.md"
packages = [{ include = "openbb_empty_router" }]

[tool.poetry.dependencies]
python = "^3.10,<3.14"
openbb-core = "*"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.plugins."openbb_core_extension"]
empty = "openbb_empty_router.empty_router:router"
```
</details>

## Imports

Here's how to import the Router class, and initialize it.

```python
from openbb_core.app.model.obbject import OBBject
from openbb_core.app.router import Router

router = Router(prefix="", description="An Empty OpenBB Router Extension.")
```

:::note
The prefix will be determined by `pyproject.toml`

```toml
[tool.poetry.plugins."openbb_core_extension"]
empty = "openbb_empty_router.empty_router:router"
```

Router commands will be available under the namepsace, `obb.empty`
:::


---

---
title: Annotated Results
sidebar_position: 6
description: This guide provides instructions for returning extra response metadata from Provider extension models. Use this class to include important citations, credits, or other dictionary-like items that should not be included in table or chart data.
keywords:
- ODP
- credits
- source
- citation
- accreditation
- OpenBB Platform
- metadata
- provider
- results metadata
- AnnotatedResult
- annotations
- develop
- results
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Annotated Results & Metadata - Developer | OpenBB Docs" />

## `AnnotatedResult` Class

Use this class to return function metadata, or other data, that is not intended to be included with the main results.

For example, source citations can be included by using this object as a wrapper for the real results.

```python
from openbb_core.provider.abstract.annotated_result import AnnotatedResult
```

Initialize the class with two objects.

- ***result***: Any
  - Serializable results - i.e, `list[dict]`
- ***metadata***: dict
  - JSON-encodable dictionary

## How To Use

:::important
The class is used in conjunction with the [`ProviderInterface`](/python/developer/extension_types/provider).
:::

In the provider's `Fetcher.transform_data` method, wrap and annotate the output like below.

```python
    @staticmethod
    def transform_data(
        query: FredSeriesQueryParams,
        data: dict,
        **kwargs: Any,
    ) -> AnnotatedResult[list[FredSeriesData]]:
        """Transform data."""
        records = data.get("results", [])
        metadata = data.get("metadata", {})

        return AnnotatedResult(
            result=[FredSeriesData.model_validate(r) for r in records],
            metadata=metadata,
        )
```

## Output

When the pattern above is used, the metadata dictionary is returned to, `output.extra["results_metadata"]`.


---

---
title: Deprecating Endpoints
sidebar_position: 6
description: This guide provides detailed instructions on how to deprecate an endpoint in the ODP Python Package.
keywords:
- ODP
- OpenBB Platform
- Custom commands
- API
- Python Interface
- Deprecation
- Deprecated
- Endpoint
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Deprecating Endpoints - How-To | OpenBB Docs" />

Deprecating commands gives users advanced notice of breaking changes, and time to implement the changes.

1. Add the new endpoint that will replace the deprecated one.

2. Add the deprecation warning

    Navigate to the **router** where the endpoint to be deprecated exists. Set the `deprecated` flag to `True` and add `deprecation=OpenBBDeprecationWarning(…)` argument to the decorator. Refer to the example below:

    ```python
    from openbb_core.app.deprecation import OpenBBDeprecationWarning

        @router.command(
            model="MarketIndices",
            deprecated=True,
            deprecation=OpenBBDeprecationWarning(
                message="This endpoint is deprecated; use `/index/price/historical` instead.",
                since=(4, 1),
                expected_removal=(4, 5),
            ),
        )
        async def market(
            cc: CommandContext,
            provider_choices: ProviderChoices,
            standard_params: StandardParams,
            extra_params: ExtraParams,
        ) -> OBBject:
            """Historical Market Indices."""
        return await OBBject.from_query(Query(**locals()))
    ```

3. Set a #TO-DO marker as a reminder to remove the endpoint on the indicated version release.


---

---
title: Disabling Output Validation
sidebar_position: 3
description: This page provides instructions for disabling output validation, when defining a new router function.
keywords:
- Validation
- Pydantic
- Python
- Development
- OpenBB Platform
- Provider Interface
- Router
- Custom
- Commands
- FastAPI
- extensions
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Disabling Output Validation - Developer Guides | OpenBB Docs" />

You might want to disable output type checking and validation entirely.

:::important
This section refers to settings available beginning OpenBB v4.4.0
:::

In boths endpoints of the example, the output will be typed as "Any" regardless of what the `return` definition states.

Within the `@router.command` decorator, add the keyword argument:

```python
no_validate = True
```

## Example

This example assumes that ficticious extensions have been defined and installed.

```python
from datetime import datetime

from openbb_core.app.model.command_context import CommandContext
from openbb_core.app.model.example import APIEx, PythonEx
from openbb_core.app.model.obbject import OBBject
from openbb_core.app.provider_interface import (
    ExtraParams,
    ProviderChoices,
    StandardParams,
)
from openbb_core.app.query import Query
from openbb_core.app.router import Router
from openbb_core.provider.abstract.data import Data

router = Router(prefix="", description="Some OpenBB Router Extension.")

# This uses the Provider Interface.
@router.command(
    model="SomeModel",
    no_validate=True,
    examples=[
        APIEx(parameters={"provider": "some_provider"}),
        PythonEx(
            description="Say Hello.",
            code=[
                "result = obb.some_extension.some_provider_function()",
            ],
        ),
    ],
)
async def some_provider_function(
    cc: CommandContext,
    provider_choices: ProviderChoices,
    standard_params: StandardParams,
    extra_params: ExtraParams,
) -> OBBject[Data]:
    """Some function using the Provider Interface."""
    obbject = await OBBject.from_query(Query(**locals()))

    new_output = []
    results = obbject.results

    # Do something with results and append to `new_output` list.

    return new_output


# This is a standard router "get" command.
@router.command(
    methods=["GET"],
    no_validate=True
    examples=[
        PythonEx(
            description="Say Hello.",
            code=[
                "result = obb.some_extension.hello()",
            ],
        ),
    ],
)
async def hello() -> (
    Any
):
    """Hello World."""
    return {
        datetime.now().strftime(
            "%Y-%m-%d"
        ): "Hello from the Empty Router extension!"
    }
```

:::tip
If you are building Provider and Router extensions that are generating errors from `openbb-build`,
try setting `no_validate=True`.
:::


---

---
title: Dynamic Command Execution
sidebar_position: 2
description: This guide provides detailed instructions on how to execute commands dynamically in the OpenBB Python Package.
keywords:
- ODP
- How-To
- Python
- OpenBB Platform
- Custom commands
- Dynamic Execution
- command_runner
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Dynamic Command Execution - Developer | OpenBB Docs" />

Dynamic execution provides an alternate entry point to functions.

:::tip
This is the pure Python method to run API endpoints without the need for static assets.
:::

Parameters should be formatted like the snippet below,
where `standard_params` are items belonging to the Standard Model,
and `extra_params` are all other parameters and keyword arguments.

```python
>>> from openbb_core.app.command_runner import CommandRunner
>>>runner = CommandRunner()
>>> output = await runner.run(
    "/equity/fundamental/ratios",
    provider_choices={
        "provider": "fmp",
    },
    standard_params={
        "symbol" : "TSLA",
        "period" : "quarter",
    },
    extra_params={}
)
>>> output
OBBject

id: 065241b7-bd9d-7313-8000-9406d8afab75
results: [{'symbol': 'TSLA', 'date': '2023-06-30', 'period': 'Q2', 'current_ratio':...
provider: fmp
warnings: None
chart: None
extra: {'metadata': {'arguments': {'provider_choices': {'provider': 'fmp'}, 'standa...
```


---

---
title: HTTP Requests
sidebar_position: 1
description: This guide outlines OpenBB processes for making HTTP requests synchronously and asynchronously. Using the helpers will keep the codebase leaner and easier to maintain by eliminating duplicate processes. Anyone can build effective and efficient data fetchers, this guide outlines how to import and implement either type of request into any fetcher.
keywords:
- OpenBB Platform
- Open source
- Python interface
- REST API
- Code contribution
- Requests
- HTTP
- Async
- Synchronous
- provider
- extension
- data
- fetch
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="HTTP Requests - Contributor Guidelines - Development | OpenBB Docs" />

Utility functions within the `openbb-core` simplify the procedure for making both asynchronous and synchronous requests.
These cover the majority of typical requests and should be imported for use instead of creating a new client from scratch.

## Generate Query String

The helper function `get_querystring()` converts a dictionary of parameters to a standard query URL string.

```python
from openbb_core.provider.utils.helpers import get_querystring
```

<details>
<summary mdxType="summary">Function Docstring</summary>

```python

Parameters
----------
items: dict
    The dictionary to be turned into a querystring.

exclude: List[str]
    The keys to be excluded from the querystring.

Returns
-------
str
    The querystring.
```
</details>


### Excluding Params

Within the context of the Fetcher, the "query" object is a Pydantic model. To pass the query parameters to the helper function, apply `model_dump()` to the query object. This removes any key:values where the value is `None`.

There may be parameters that are not intended to be included in the parameters portion of the URL string.
Pass those as a `list` to the `exclude` parameter of `get_querystring()`. If None, pass an empty list.

```python
query_string = get_querystring(query.model_dump(), ["interval"])
```

## Making Requests

:::info
Using these functions applies `http` settings from [system_settings.json](/python/settings/system_settings#available-settings), if supplied.
:::

### Synchronous - Requests

```python
from openbb_core.provider.utils import make_request
```

This function is an abstract helper to make requests from a URL with potential headers and parameters.
It accepts `**kwargs` and returns a `requests.Response` object.
If no headers are supplied, it will attempt to use a generic user-agent.
Add headers as a dictionary to the `headers` parameter of the query.

All parameters of `requests.get` or `requests.post`are accessible and passed through as `**kwargs`.

<details>
<summary mdxType="summary">Function Docstring</summary>

```python

    Parameters
    ----------
    url : str
        Url to make the request to
    method : str, optional
        HTTP method to use.  Can be "GET" or "POST", by default "GET"
    timeout : int, optional
        Timeout in seconds, by default 10.  Can be overwritten by user setting, request_timeout

    Returns
    -------
    requests.Response
        Request response object

    Raises
    ------
    ValueError
        If invalid method is passed
```

</details>

### Requests Session Object

Use this function to initialize and return a configured `requests.Session` object. There are no parameters.

```python
from openbb_core.provider.utils.helpers import get_requests_session

session = get_requests_session()
```

### Asynchronous - AIOHTTP

Use this function to make single URL requests asynchronously. No callback handling is required for JSON content.

This function uses the `aiohttp` client and accepts `kwargs`.
It has a default callback function that assumes the content is `json`.
No post-request object parsing is required, but this behaviour is overridden with the `response_callback` parameter.


```python
from openbb_core.provider.utils.helpers import amake_request
```

<details>
<summary mdxType="summary">Function Docstring</summary>

```python
    Parameters
    ----------
    url : str
        Url to make the request to
    method : str, optional
        HTTP method to use.  Can be "GET" or "POST", by default "GET"
    timeout : int, optional
        Timeout in seconds, by default 10.  Can be overwritten by user setting, request_timeout
    response_callback : Callable[[ClientResponse, ClientSession], Awaitable[Union[dict, List[dict]]]], optional
        Async callback with response and session as arguments that returns the json, by default None
    session : ClientSession, optional
        Custom session to use for requests, by default None


    Returns
    -------
    Union[dict, List[dict]]
        Response json
```

</details>

:::tip
Don't forget to `await`!

```python
url = "https://someurlwithdata.profit"
response_json = await amake_requests(url)
```

Absent `await`, the response is a coroutine.
:::

### Multi-URL Requests

Use this function to download and handle data from a list of URLs. The same default callback function from `amake_request` exists, only here it appends the expected `json` output to a `list[dict]`.

```python
from openbb_core.provider.utils.helpers import amake_requests
```


<details>
<summary mdxType="summary">Function Docstring</summary>

```python
    Parameters
    ----------
    urls : Union[str, List[str]]
        List of urls to make requests to
    method : Literal["GET", "POST"], optional
        HTTP method to use.  Can be "GET" or "POST", by default "GET"
    timeout : int, optional
        Timeout in seconds, by default 10.  Can be overwritten by user setting, request_timeout
    response_callback : Callable[[ClientResponse, ClientSession], Awaitable[Union[dict, List[dict]]]], optional
        Async callback with response and session as arguments that returns the json, by default None
    session : ClientSession, optional
        Custom session to use for requests, by default None

    Returns
    -------
    Union[dict, List[dict]]
        Response json
```

</details>

### Response Callback

AIOHTTP uses a callback pattern, and if you need to handle response types other than JSON, pass a small handler as a parameter.

The example below is a method for converting CSV data to a dictionary and appending it to a list.

```python
from io import StringIO
from typing import Any
from pandas import DataFrame

results = []

async def response_callback(response, _: Any):
    """Callback for HTTP Client Response."""
    response = await response.text()
    data = DataFrame(StringIO(response), skiprows=2)
    results.append(data.to_dict("records"))

url = "https://someurlwithdata.profit"

response_json = await amake_requests(url, response_callback=response_callback)
```

### AIOHTTP Session Object

Use this function to initialize and return a configured AIOHTTP session object.

```python
from openbb_core.provider.utils.helpers import get_async_requests_session

session = await get_async_requests_session()  # Don't do this in the main event loop of the file.
```

It can be used within an `async with` context block.

```python

url = "https://someurlwithdata.profit"

async with await get_async_requests_session() as session:
    async with await session.get(url) as response:
        if response.status != 200:
            raise OpenBBError(
                f"Failed to fetch data: {response.status} -> {response.reason}"
            )

        data = await response.json()
```

## Asynchronous Fetchers

When asynchronous methods are used within a Fetcher, implement the `aextract_data` method instead of `extract_data`.

```python
    @staticmethod
    async def aextract_data(
        query: SourceModelQueryParams,
        credentials: Optional[dict[str, str]],
        **kwargs: Any,
    ) -> list[dict]:
```


---

---
title: How-To
sidebar_position: 0
description: Quick how-to guides for developers that cover key concepts.
keywords:
  - ODP
  - OpenBB Platform
  - Develop
  - Extension
  - Provider
  - Router
  - Local Development
  - Python
  - how-to
  - guide

---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="How-To Guides - Development | OpenBB Docs" />

Guides in this section provide short example code snippets and implementation strategies.


<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="HTTP Requests"
    description="How to utilize the built-in and configured session objects for external HTTP requests."
    url="/python/developer/how-to/http_requests"
  />
  <NewReferenceCard
    title="Annotated Results"
    description="How to include additional metadata from a provider in the function output."
    url="/python/developer/how-to/annotated_results"
  />
</ul>


---

---
title: Tests
sidebar_position: 7
description: This section provides an in-depth look at the Quality Assurance (QA) process in the Open Data Platform. It covers the use of QA tools for testing extensions, creation of unit and integration tests, and the importance of maintaining a short import time for the package.
keywords:
  - OpenBB QA process
  - Unit and integration tests
  - QA tools
  - Extension testing
  - Import time optimization
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Tests - Contributor Guidelines - Development | OpenBB Docs" />

There are a set of QA tools that you can use to test your work.

## Dev Tools

Install the developer toolkit packages from PyPI:

```sh
pip install openbb-devtools
```

This includes `pytest` and the extensions used for capturing unit test cassettes for replay.

## Built-In Test

Each `Fetcher` comes equipped with a `test` method that will ensure it is implemented correctly, that it is returning the expected data, that all types are correct, and that the data is valid.

You can run the testing pattern by initializing your Fetcher and running the `.test` method,
passing `parameters` and `credentials` dictionaries.

A successful test will return `None`

```python
>>> from openbb_imf.models.port_volume import ImfPortVolumeFetcher

>>> fetcher = ImfPortVolumeFetcher()

>>>fetcher.test({}, {})

# Returns nothing because default values allow no parameters to be passed, and credentials are not required.

fetcher.test({"country": "bad_country"}, {})  # Fails with error.
```

<details>
<summary mdxType="summary">Error Message</summary>

```python
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
Cell In[12], line 1
----> 1 fetcher.test({"country": "bad_country"}, {})

File ~/github/OpenBB/openbb_platform/core/openbb_core/provider/abstract/fetcher.py:141, in Fetcher.test(cls, params, credentials, **kwargs)
    138 # pylint: disable=import-outside-toplevel
    139 from pandas import DataFrame
--> 141 query = cls.transform_query(params=params)
    142 data = run_async(
    143     cls.extract_data, query=query, credentials=credentials, **kwargs
    144 )
    145 result = cls.transform_data(query=query, data=data, **kwargs)

File ~/github/OpenBB/openbb_platform/providers/imf/openbb_imf/models/port_volume.py:393, in ImfPortVolumeFetcher.transform_query(params)
    383     raise OpenBBError(
    384         ValueError(
    385             "start_date must be after 2019-01-01 for IMF Port Volume data."
    386         )
    387     )
    389 if country := params.pop("country", None):
    390     params["port_code"] = (
    391         params["port_code"]
    392         if params.get("port_code")
--> 393         else get_port_ids_by_country(country)
    394     )
    396 return ImfPortVolumeQueryParams(**params)

File ~/github/OpenBB/openbb_platform/providers/imf/openbb_imf/utils/port_watch_helpers.py:61, in get_port_ids_by_country(country_code)
     58     port_ids_by_country = json.load(file)
     60 if country_code.upper() not in port_ids_by_country:
---> 61     raise ValueError(
     62         f"Country code '{country_code}' is not supported by IMF Port Watch."
     63     )
     65 return port_ids_by_country.get(country_code.upper(), "")

ValueError: Country code 'bad_country' is not supported by IMF Port Watch.
```

</details>

## Unit Tests

Creating unit tests with mock data can be time consuming, so we use `vcrpy` in conjunction with our own set of `pytest` plugins published as, `pytest_recorder`.

The plugins capture the HTTP interactions as a YML cassette and replays it while running tests.

Record with:

```sh
pytest test_some_file.py::test_imf_port_volume_fetcher --record http
```

<details>
<summary mdxType="summary">Example Code</summary>

```python
"""IMF Fetcher Tests."""

from datetime import date

import pytest
from openbb_core.app.service.user_service import UserService
from openbb_imf.models.port_volume import ImfPortVolumeFetcher

test_credentials = UserService().default_user_settings.credentials.model_dump(
    mode="json"
)

@pytest.fixture(scope="module")
def vcr_config():
    """VCR configuration."""
    return {
        "filter_headers": [("User-Agent", None)],
    }

@pytest.mark.record_http
def test_imf_port_volume_fetcher(credentials=test_credentials):
    """Test the ImfPortVolume fetcher."""
    params = {
        "port_code": "port1201",
        "start_date": date(year=2023, month=1, day=1),
        "end_date": date(year=2023, month=1, day=31),
    }

    fetcher = ImfPortVolumeFetcher()
    result = fetcher.test(params, credentials)
    assert result is None
```

</details>

## Repository Scripts & Integration Tests

Automatic unit test generation will add unit tests for all the fetchers available in a given provider.
Run the script from the root of the repository.

```bash
python openbb_platform/providers/tests/utils/unit_tests_generator.py
```

To record the unit tests, you can run the following command:

```bash
pytest <path_to_the_unit_test_file> --record=all
```

:::note
Sometimes manual intervention is needed. For example, adjusting out-of-top level imports or adding specific arguments for a given fetcher.
:::

## Integration tests

The integration tests are a bit more complex than the unit tests, as we want to test both the Python interface and the API interface.
For this, we have two scripts that will help you generate the integration tests.

To generate the integration tests for the Python interface, you can run the following command:

```bash
python openbb_platform/extensions/tests/utils/integration_tests_generator.py
```

To generate the integration tests for the API interface, you can run the following command:

```bash
python openbb_platform/extensions/tests/utils/integration_tests_api_generator.py
```

When testing the API interface, you'll need to start a server locally before running the tests. To do so, run the following command:

```bash
uvicorn openbb_core.api.rest_api:app --host 0.0.0.0 --port 8000 --reload
```

These automated tests are a great way to reduce the amount of code you need to write,
but they are not a replacement for manual testing and might require tweaking.

To run the tests we can do:

- Unit tests only:

```bash
pytest openbb_platform -m "not integration"
```

- Integration tests only:

```bash
pytest openbb_platform -m integration
```

- Both integration and unit tests:

```bash
pytest openbb_platform
```

## Import time

We aim to have a short import time for the package. To measure that we use `tuna`.

- [https://pypi.org/project/tuna/](https://pypi.org/project/tuna/)

To visualize the import time breakdown by module and find potential bottlenecks, run the
following commands from `openbb_platform` directory:

```bash
pip install tuna
python -X importtime openbb/__init__.py 2> import.log
tuna import.log
```

## Known caveats

When using the OpenBB QA Framework it is important to be aware of the following caveats:

- The tests are semi-automated and might require manual intervention. For example, adjusting out-of-top level imports or changing specific arguments for a given payload.

- The integration tests are more complex and if your newly added provider integration is already covered by the
  integration tests from previous commands or providers, you will need to manually inject the payload for the new
  provider.

- In the integration test parametrized payload, the first item is always the set of standard parameters. Every
  consecutive item is a set of parameters for a specific provider with the standard parameters included.

- The integration tests require you to be explicit, by using all of the standard parameters and provider-specific
  parameters in the payload. If you want to exclude a parameter, you can use `None` as its value.

- The integration tests require you to be explicit by specifying the `provider` parameter in provider-specific
  payloads.

- When recording unit tests, you might run into issues with the cache that is tied to your specific provider and present
  on your local machine. You will know that this is the case if your tests pass locally, but fail on the CI. To fix this,
  you can delete the cache file from your local machine and re-record the tests.

      > Note that the cache is likely located here:
      > Windows: `C:\Users\user\AppData\Local\`
      > Linux: `/home/user/.cache/`
      > Mac: `/Users/user/Library/Caches`

- Some providers (we are aware only of YFinance so far) do an additional request when used from the US region. As our CI
  is running from the US region, this might cause the tests to fail. A workaround for this is to use a VPN to record the
  tests from a different region.


---

---
title: Validators
sidebar_position: 2
description: This guide describes the use of validators with model inputs and outputs.
keywords:
- ODP
- Pydantic
- field_validator
- model_validator
- QueryParams
- Data
- Fetcher
- validator
- Field
- Fast API
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Validators - Developer | OpenBB Docs" />

Both QueryParams and Data models can benefit from the tactical use of Pydantic validators.
They assist with enforcing FastAPI compliance for both inputs and outputs,
and they work in the final stage of transformation immediately before output.

Some situations where they are used include:

- Transform, conform, or otherwise alter the entered query parameter or returned data value.
- Handle type checking and formatting.
- Setting default values.
- Normalizing percent values.
- Cleaning NaN values.
- Validating unbound string parameters.

## Importing

The items to import are from the Pydantic library:

```python
from pydantic import field_validator, model_validator
```

:::info
Field validators work at the row-level and do not access other parts of the model.
Use `model_validator` to work with the entire row.
:::

## Examples

These are a few examples, functions will be inside the class code block definition.
Some static type checkers may disagree with the Pydantic patterns.

### Parsing Dates

Providers will format dates in a number of ways. OpenBB uses YYYY-MM-DD as the standard convention for inputs.
Outputs are a `datetime` object or a valid ISO date string.

```python
@field_validator("last_trade_timestamp", mode="before", check_fields=False)
@classmethod
def _parse_timestamp(cls, v):
    """Parse a Unix timestamp."""
    return datetime.fromtimestamp(v)
```

### Normalize Percent Values

At the provider level, we want to standardize the way values representing a percent are returned.

It is our intention to ensure those values are ready-to-consume by formulas without conversion.
This example would be used within a provider's `Data` model.

```python
@field_validator("change_percent", mode="before", check_fields=False)
@classmethod
def _normalize_percent(cls, v):
    """Normalize the percent."""
    return v / 100 if v else None
```

### Dynamic Default Date

It might be desirable to have a default date parameter that is not static. To allow this, we must set the default parameter value as `None`, and use the `model_validator`. This example is for the `QueryParams`.

```python
@model_validator(mode="before")
@classmethod
def _validate_dates(cls, values):
    """Validate the query parameters."""
    if values.get("start_date") is None:
        values["start_date"] = (datetime.now() - timedelta(days=90)).date()
    if values.get("end_date") is None:
        values["end_date"] = datetime.now().date()
    return values
```

### Replace 0s With None

Sometimes values are returned as a `0` when they should really be a `null`.
This example looks at the entire `Data` model, but could easily be adapted to use on individual fields.

```python
@model_validator(mode="before")
@classmethod
def replace_zero(cls, values):
    """Check for zero values and replace with None."""
    return (
        {k: None if v == 0 else v for k, v in values.items()}
        if isinstance(values, dict)
        else values
    )
```


---

---
title: Developer
sidebar_position: 0
description: An overview of getting started developing with the OpenBB Python Package and extensions.
keywords:
  - ODP
  - OpenBB Platform
  - Develop
  - Extension
  - Provider
  - Router
  - Local Development
  - Python
  - Guides
  - how-to
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="Development Overview | OpenBB Docs" />

This section provides information resources for developers and advanced users.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Architecture Overview"
    description="A high level overview of the architecture behind `openbb-core` and the user interfaces."
    url="/python/developer/architecture_overview"
  />
</ul>

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Standardization"
    description="A high level explanation of the applied standardization framework."
    url="/python/developer/standardization"
  />
</ul>

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Extension Types"
    description="Instructions for getting started building the different types of OpenBB Python Package Extensions."
    url="/python/developer/extension_types"
  />
</ul>

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="How-To"
    description="Quick how-to guides that cover key concepts and code snippets."
    url="/python/developer/how-to"
  />
</ul>


---

---
title: Standardization
sidebar_position: 2
description: Learn about standardization techniques for consistent inputs and outputs across the OpenBB Python Package.
keywords:
- ODP
- OpenBB Platform
- Python
- REST API
- Data
- Standardization
- ETL
- Extension
- openbb-core
- Provider
- Architecture
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Standardization - Developer | OpenBB Docs" />

The Standardization Framework is a set of tools and guidelines that enable the user to query and obtain data in a consistent way across multiple providers.

Provider models can inherit from an already defined [standard](/python/data_models) model.
The standard models are also the metamodel names defined in the Router's [function definition](/python/developer/extension_types/router),
and the Provider's [`fetcher_dict`](/python/developer/extension_types/provider)

Standardizing provider query parameters and response data enhances the user experience by overcoming things like:

- Transparently defined schemas for the data and query parameters.
- Outputs from multiple sources are comparable with each other and easily interchanged.
- Consistent query parameters across all data sources for a function, or type of function.
  - Use `symbol` instead of `ticker`.
- Output data that has conformed types, is validated, and will be JSON serializable.
  - `NaN`, `NaT`, `"None"`, empty strings, should be `NoneType` (null).
  - Percent values should be represented as decimal points.
- Parameter and fields are always `lower_snake_case`.

The standard models [here](/python/data_models) are the contents of the repository code - `/OpenBB/openbb_platform/core/openbb_core/provider/standard_models/` [directory](https://github.com/OpenBB-finance/OpenBB/tree/main/openbb_platform/core/openbb_core/provider/standard_models).

Every standard model consists of two classes, with each being a Pydantic model.

- [`QueryParams`](https://raw.githubusercontent.com/OpenBB-finance/OpenBB/main/openbb_platform/core/openbb_core/provider/abstract/query_params.py)
- [`Data`](https://raw.githubusercontent.com/OpenBB-finance/OpenBB/main/openbb_platform/core/openbb_core/provider/abstract/data.py)

Any parameter or field can be assigned a custom `field_validator`, or the entire model can be passed through a `model_validator` on creation.
See the page on [validators](/python/developer/how-to/validators) for examples.

:::info
- Function signatures prioritize the standard models, provider-specific implementations become `extra_params`.
- Field aliases should be implemented at the model level - i.e., use `__alias_dict__ = {"field": "mapped_field"}`
- Similarly, `json_schema_extra`, should be applied at the model level, `__json_schema_extra__`.
- CamelCase to snake_case is handled automatically.
:::


---

---
title: openbb-econometrics
sidebar_position: 0
description: An overview of the `openbb-econometrics` Python package.
keywords:
  - ODP
  - Python Package
  - OpenBB Platform
  - Extension
  - Router
  - Econometrics
  - statsmodels
  - pandas
  - Data
  - POST
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Econometrics - Python Packages & Extensions | OpenBB Docs" />

The `openbb-econometrics` extension provides API access to common econometrics models.

## Installation

```console
pip install openbb-econometrics
```

### Dependencies

Installation includes a new router path (`obb.econometrics`), and additional Python libraries:

- arch
- linearmodels
- pandas-ta-openbb
    - scipy
    - statsmodels

:::info Optional

The `econometrics` router has one chart, a correlation matrix, exposed when `openbb-charting` is installed.
:::

### Post Installation

After installation, rebuild the Python Interface.

```sh
openbb-build
```

## Endpoints

The `obb.econometrics` namespace includes:

```python
>>> from openbb import obb
>>> obb.econometrics

/econometrics
    autocorrelation
    causality
    cointegration
    correlation_matrix
    ols_regression
    ols_regression_summary
    panel_between
    panel_first_difference
    panel_fixed
    panel_fmac
    panel_pooled
    panel_random_effects
    residual_autocorrelation
    unit_root
    variance_inflation_factor
```

Go to the [reference](/python/reference/econometrics) page for function, parameter, and response descriptions, as well as code examples.


---

---
title: openbb-quantitative
sidebar_position: 0
description: An overview of the `openbb-quantitative` Python package.
keywords:
  - ODP
  - Python Package
  - OpenBB Platform
  - Extension
  - Router
  - Quantitative
  - statsmodels
  - pandas
  - Data
  - POST
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Quantitative - Python Packages & Extensions | OpenBB Docs" />

The `openbb-quantitative` extension provides API access to common quantitative models and statistical analysis, with a focus on time series.

## Installation

```console
pip install openbb-quantitative
```

### Dependencies

Installation includes a new router path (`obb.quantitative`), and additional Python libraries:

- pandas-ta-openbb
    - scipy
    - statsmodels

### Post Installation

After installation, rebuild the Python Interface.

```sh
openbb-build
```

## Endpoints

The `obb.quantitative` namespace includes:

```python
>>> from openbb import obb
>>> obb.quantitative

/quantitative
    capm
    normality
    /performance
        omega_ratio
        sharpe_ratio
        sortino_ratio
    /rolling
        kurtosis
        mean
        quantile
        skew
        stdev
        variance
    /stats
        kurtosis
        mean
        quantile
        skew
        stdev
        variance
    summary
    unitroot_test
```

Go to the [reference](/python/reference/quantitative) page for function, parameter, and response descriptions, as well as code examples.


---

---
title: openbb-technical
sidebar_position: 0
description: An overview of the `openbb-technical` Python package for time series analysis.
keywords:
  - ODP
  - Python Package
  - OpenBB Platform
  - Extension
  - Router
  - Technical
  - ta
  - pandas-ta
  - pandas
  - Data
  - POST
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Technical - Python Packages & Extensions | OpenBB Docs" />

The `openbb-technical` extension provides API access to time series anaylsis endpoints.

## Installation

```console
pip install openbb-technical
```

### Dependencies

Installation includes a new router path (`obb.quantitative`), and additional Python libraries:

- pandas-ta-openbb
    - scipy
    - statsmodels

:::info Optional

The `technical` router has several charts, exposed when `openbb-charting` is installed.
:::

### Post Installation

After installation, rebuild the Python Interface.

```sh
openbb-build
```

## Endpoints

```python
>>> from openbb import obb
>>> obb.technical

    ad
    adosc
    adx
    aroon
    atr
    bbands
    cci
    cg
    clenow
    cones
    demark
    donchian
    ema
    fib
    fisher
    hma
    ichimoku
    kc
    macd
    obv
    relative_rotation
    rsi
    sma
    stoch
    vwap
    wma
    zlma
```

### With Charts

These endpoints have a built-in charting method, set `chart=True` to return.

- adx
- aroon
- cones
- ema
- technical_hma
- technical_macd
- technical_relative_rotation
- technical_rsi
- technical_sma
- technical_wma
- technical_zlma

Go to the [reference](/python/reference/technical) page for function, parameter, and response descriptions, as well as code examples.


---

---
title: Introduction
sidebar_position: 0
description: An overview of installable ODP Python packages and extensions.
keywords:
  - ODP
  - Python Package
  - OpenBB Platform
  - Extension
  - Router
  - Provider
  - Data
  - Developer Tools
  - API
  - MCP
  - Server
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="Python Packages & Extensions | OpenBB Docs" />

An OpenBB environment is the combination of packages installed. The core is the underlying infrastructure, while extensions represent API routes, data sources, and the response object.

When you run, `pip install openbb`, you the extensions maintained in the official OpenBB GitHub [repository](https://www.github.com/OpenBB-finance/OpenBB). You can create your own custom Python apps by extending the `openbb-core` library, or by selectively installing individual components.

Anyone can build and publish [installable extensions](/python/developer/extension_types) for the OpenBB ecosystem.

## Core

All OpenBB packages are extensions of `openbb-core`.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="OpenBB Core"
    description="A light-weight package responsible for base operations, serialized ETL pipelines, and package building. It is developed with Pydantic and FastAPI."
    url="extensions/openbb-core"
  />
</ul>

## Infrastructure

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="OpenBB Providers"
    description="A providers is an individual source of data implementing the standardized pipeline. They are self-contained, and feed shared router endpoints."
    url="/python/extensions/providers/"
  />
  <NewReferenceCard
    title="OpenBB Routers"
    description="Routers direct the IO of the application. They are instances of `fastapi.APIRouter`, are self-contained, and do not depend on another."
    url="reference/"
  />
  <NewReferenceCard
    title="OpenBB Charting"
    description="Extend routers with REST API compatible views, and with an optional Python method for dedicated window creation."
    url="extensions/infrastructure/openbb-charting"
  />
</ul>

## Interface

These tools extend and enhance last mile delivery of OPD packages to interface with additional mediums, like the OpenBB Workspace.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="OpenBB Platform API"
    description="Generate OpenBB Workspace Widgets and Applications. Create dashboarding experiences with zero frontend code, from any FastAPI."
    url="extensions/interface/openbb-api"
  />
  <NewReferenceCard
    title="OpenBB MCP Server"
    description="Convert OpenBB environments, and FastAPI instances, into ready-to-use MCP servers. Highly configurable, and easily secured. Connect AI to your data, on your terms."
    url="extensions/interface/openbb-mcp"
  />
  <NewReferenceCard
    title="OpenBB CLI"
    description="Explore OpenBB environments from a scriptable, Command Line Interface (CLI)."
    url="/cli"
  />
</ul>

## Data Processing

Unlike data-fetching endpoints, these routers do not have a `provider` component.
OpenBB publishes several extensions for data analysis and feature engineering pipelines.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="OpenBB Econometrics"
    description="REST API compatible econometrics models, such as OLS."
    url="/python/extensions/data-processing/econometrics"
  />
  <NewReferenceCard
    title="OpenBB Quantitative"
    description="REST API compatible quantitative analysis tools."
    url="/python/extensions/data-processing/quantitative"
  />
  <NewReferenceCard
    title="OpenBB Technical"
    description="REST API compatible time series analysis tools."
    url="/python/extensions/data-processing/technical"
  />
</ul>


---

---
title: openbb-charting
sidebar_position: 2
description: Learn about the openbb-charting extension and adding Plotly charts to the response object.
keywords:
- charts
- charting
- Plotly
- GraphObject
- Figure
- PyWry
- OBBject
- Indicators
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Charting | OpenBB Docs" />

This extension provides a charting library for Open Data Platform by OpenBB.

The library includes:

- API charting infrastructure
- Mutable `chart` attribute in every response object
- Plotly charting components
- Pre-built charts for a set of endpoints
- Optional extra for dedicated window creation
  - Includes an interactive `table()` method in the Python Interface

:::note
*The charting library is an `OBBject` extension, which means you'll have the functionality it exposes on every command result.*
:::

## Installation

To install the extension, run the following command in this folder:

```bash
pip install openbb-charting
```

### Extras

The PyWry dependency handles the display of interactive charts and tables in a separate window.

Add the PyWry extra for standalone window creation.

```sh
pip install "openbb-charting[pywry]"
```

### PyWry on Linux

For Linux systems, the PyWry dependency requires certain dependencies to be installed first.

- Debian-based / Ubuntu / Mint:
`sudo apt install libwebkit2gtk-4.0-dev`

- Arch Linux / Manjaro:
`sudo pacman -S webkit2gtk`

- Fedora:
`sudo dnf install gtk3-devel webkit2gtk3-devel`

## Set Theme

The default theme setting is `dark`, and this can be changed to "light" in the [user preference](/python/settings/user_settings/preferences)
for both, `chart_style` and `table_style`.

For the current Python session, set them with:

```python
from openbb import obb

obb.user.prefernces.chart_style="dark"
obb.user.prefernces.table_style="light"

```

## Available Charts

Not all the endpoints are supported by the charting extension. To discover which endpoints are supported, you can run the following command:

```python
from openbb_charting import Charting
Charting.functions()
```

This produces the same result as using the class method from the `OBBject.charting` function response.

```console
Methods
-------
show
    Display chart and save it to the OBBject.
to_chart
    Redraw the chart and save it to the OBBject, with an optional entry point for Data.
functions
    Return a list of Platform commands with charting functions.
get_params
    Return the charting parameters for the function the OBBject was created from.
indicators
    Return the list of the available technical indicators to use with the `to_chart` method and OHLC+V data.
table
    Display an interactive table.
create_line_chart
    Create a line chart from external data.
create_bar_chart
    Create a bar chart, on a single x-axis with one or more values for the y-axis, from external data.
create_correlation_matrix
    Create a correlation matrix from external data.
toggle_chart_style
    Toggle the chart style, of an existing chart, between light and dark mode.
```

## Usage

:::important user_settings.json
This extension requires that the [user preference](/python/settings/user_settings/preferences) for `output_type` is set to, "OBBject", the default state.
:::

To use, run any of the ODP Python Package endpoints with the `chart` argument set to `True`.

```python
>>> from openbb import obb
>>> equity_data = obb.equity.price.historical(symbol="TSLA", chart=True)
>>> equity_data

OBBject[T]

id: 068ec8c8-9ea2-78dc-8000-97703428789b
results: [{'date': datetime.date(2024, 10, 14), 'open': 220.1300048828125, 'high': ...
provider: yfinance
warnings: None
chart: {'content': {'data': [{'close': {'dtype': 'f8', 'bdata': 'AAAAwB5la0AAAACAPX...
extra: {'metadata': {'arguments': {'provider_choices': {'provider': 'yfinance'}, 's...
```

The chart will be returned in the response object under the `chart` attribute.

Display the current figure by calling:

```python
equity_data.show()
```

<details>
<summary mdxType="summary">Sample Chart</summary>

![candles](image.png)

</details>

### Chart Params

:::note
When a supported endpoint is called with `chart=True`, chart parameters can be passed as a nested dictionary under the name, `chart_params`.

```python
chart_params = dict(
    title="AAPL 50/200 Day EMA",
    indicators=dict(
        ema=dict(length=[50,200]),
    ),
)
params = dict(
    symbol="AAPL",
    start_date="2022-01-01",
    provider="yfinance",
    chart=True,
    chart_params=chart_params,
)
data = obb.equity.price.historical(**params)
```
`chart_params` are sent in the body of the request when using the API.
:::

Passing only `chart=True` will return a default view which can be modified and drawn again post-request, via the `OBBject`.

```console
OBBject

id: 06614d74-7443-7201-8000-a65f358136a3
results: [{'date': datetime.date(2022, 1, 3), 'open': 177.8300018310547, 'high': 18...
provider: yfinance
warnings: None
chart: {'content': {'data': [{'close': [182.00999450683594, 179.6999969482422, 174....
extra: {'metadata': {'arguments': {'provider_choices': {'provider': 'yfinance'}, 's...
```

```python
data.show()
```

<details>
<summary mdxType="summary">Sample Chart With EMA</summary>

![candles with ema](https://github.com/OpenBB-finance/OpenBB/assets/85772166/b427d68b-777e-4230-852a-df749c5dbc46)

</details>

### Endpoints Without Charts

Most functions do not have dedicated charts. However, it's still possible to generate one automatically. Try passing it through a quantitative analysis command.

```python
data = obb.equity.price.historical(
    symbol="XLK",
    start_date="2023-01-01",
    provider="yfinance",
)
qa = obb.quantitative.rolling.stdev(data.results, target="close")

qa.charting.show(title="XLK Rolling 21 Day Standard Deviation")
```

<details>
<summary mdxType="summary">Sample Generic Line Chart</summary>

![auto chart](https://github.com/OpenBB-finance/OpenBB/assets/85772166/f87a6648-7365-4529-a254-35897af448ca)

</details>

### Tables

Interactive tables are displayed by the `table` method.

:::important
This functionality is intended for response object exploration and is not suitable for production environments.
:::

```python
data = obb.equity.price.quote("AAPL,MSFT,GOOGL,META,TSLA,AMZN", provider="yfinance")
data.charting.table()
```

<details>
<summary mdxType="summary">Sample Interactive Table</summary>

![Interactive Tables](https://github.com/OpenBB-finance/OpenBB/assets/85772166/77f5f812-b933-4ced-929c-c1e39b2a3eed)

</details>

External data can also be supplied, providing an opportunity to filter or apply Pandas operations before display.

```python
new_df = df.to_df().T
new_df.index.name="metric"
new_df.columns = new_df.loc["symbol"]
new_df.drop("symbol", inplace=True)
data.charting.table(data=new_df)
```

<details>
<summary mdxType="summary">Sample Custom Data Table</summary>

![Tables From External Data](https://github.com/OpenBB-finance/OpenBB/assets/85772166/d02f8c34-e1d1-4001-a73e-d3b948a4c5c1)

</details>


---

---
title: Technical Indicators
sidebar_position: 2
description: A tutorial of the technical indicators included with the openbb-charting library, including how to get started using them.
keywords:
- tutorial
- ODP
- Open Data Platform by OpenBB
- OpenBB Platform
- getting started
- extensions
- charting
- view
- Plotly
- toolkits
- indicators
- Plotly
- OpenBBFigure
- PyWry
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Technical Indicators - OpenBB Charting | OpenBB Docs" />

Select indicators (technical) can be added to a chart where the data is OHLC+V prices over time, and the data is for one symbol only.
They are meant as quick visualizations, and a way to build more complex charts.
As starting points, they can be refined to perfection by manipulating the figure object directly.

```python
from datetime import datetime, timedelta
from openbb import obb
data = obb.equity.price.historical(
    "TSLA",
    provider="yfinance",
    interval="15m",
    start_date=(datetime.now()-timedelta(days=21)).date(),
    chart=True,
    chart_params=dict(
        heikin_ashi=True,
        indicators=(dict(
            ema=dict(length=[8,32]),
            srlines={}, # For indicators, an empty dictionary implies the default state.
            rsi=dict(length=32)
        ))
    )
)
data.show()
```

![TSLA Intraday With Indicators](https://github.com/OpenBB-finance/OpenBB/assets/85772166/7d8d95d8-0383-4e9d-9477-7ad2424328df)

## Available Indicators

To get all the indicators, use the `charting.indicators()` method.
The object returned is a Pydantic model where each indicator is field.
If you don't catch it, it will print as a docstring to the console.

```python
data.charting.indicators()
```

<details>
<summary mdxType="summary">Indicator Details</summary>

```console
SMA:
    length : Union[int, list[int]]
        Window length for the moving average, by default is 50.
        The number is relative to the interval of the time series data.
    offset : int
        Number of periods to offset for the moving average, by default is 0.

EMA:
    length : Union[int, list[int]]
        Window length for the moving average, by default is 50.
        The number is relative to the interval of the time series data.
    offset : int
        Number of periods to offset for the moving average, by default is 0.

HMA:
    length : Union[int, list[int]]
        Window length for the moving average, by default is 50.
        The number is relative to the interval of the time series data.
    offset : int
        Number of periods to offset for the moving average, by default is 0.

WMA:
    length : Union[int, list[int]]
        Window length for the moving average, by default is 50.
        The number is relative to the interval of the time series data.
    offset : int
        Number of periods to offset for the moving average, by default is 0.

ZLMA:
    length : Union[int, list[int]]
        Window length for the moving average, by default is 50.
        The number is relative to the interval of the time series data.
    offset : int
        Number of periods to offset for the moving average, by default is 0.

AD:
    offset : int
        Offset value for the AD, by default is 0.

AD Oscillator:
    fast : int
        Number of periods to use for the fast calculation, by default 3.
    slow : int
        Number of periods to use for the slow calculation, by default 10.
    offset : int
        Offset to be used for the calculation, by default is 0.

ADX:
    length : int
        Window length for the ADX, by default is 50.
    scalar : float
        Scalar to multiply the ADX by, default is 100.
    drift : int
        Drift value for the ADX, by default is 1.

Aroon:
    length : int
        Window length for the Aroon, by default is 50.
    scalar : float
        Scalar to multiply the Aroon by, default is 100.

ATR:
    length : int
        Window length for the ATR, by default is 14.
    mamode : Literal[rma, ema, sma, wma]
        The mode to use for the moving average calculation.
    drift : int
        The difference period.
    offset : int
        Number of periods to offset the result, by default is 0.

CCI:
    length : int
        Window length for the CCI, by default is 14.
    scalar : float
        Scalar to multiply the CCI by, default is 0.015.

Clenow:
    period : int
        The number of periods for the momentum, by default 90.

Demark:
    show_all : bool
        Show 1 - 13.
        If set to False, show 6 - 9.
    offset : int
        Number of periods to offset the result, by default is 0.

Donchian:
    lower : Union[int, NoneType]
        Window length for the lower band, by default is 20.
    upper : Union[int, NoneType]
        Window length for the upper band, by default is 20.
    offset : Union[int, NoneType]
        Number of periods to offset the result, by default is 0.

Fib:
    period : int
        The period to calculate the Fibonacci Retracement, by default 120.
    start_date : Union[str, NoneType]
        The start date for the Fibonacci Retracement.
    end_date : Union[str, NoneType]
        The end date for the Fibonacci Retracement.

Fisher:
    length : int
        Window length for the Fisher Transform, by default is 14.
    signal : int
        Fisher Signal Period

Ichimoku:
    conversion : int
        The conversion line period, by default 9.
    base : int
        The base line period, by default 26
    lagging : int
        The lagging line period, by default 52.
    offset : int
        The offset period, by default 26.
    lookahead : bool
        Drops the Chikou Span Column to prevent potential data leak

KC:
    length : int
        Window length for the Keltner Channel, by default is 20.
    scalar : float
        Scalar to multiply the ATR, by default is 2.
    mamode : Literal[ema, sma, wma, hna, zlma, rma]
        The mode to use for the moving average calculation, by default is ema.
    offset : int
        Number of periods to offset the result, by default is 0.

MACD:
    fast : Union[int, NoneType]
        Window length for the fast EMA, by default is 12.
    slow : Union[int, NoneType]
        Window length for the slow EMA, by default is 26.
    signal : Union[int, NoneType]
        Window length for the signal line, by default is 9.
    scalar : Union[float, NoneType]
        Scalar to multiply the MACD by, default is 100.

OBV:
    offset : int
        Number of periods to offset the result, by default is 0.

RSI:
    length : int
        Window length for the RSI, by default is 14.
    scalar : float
        Scalar to multiply the RSI by, default is 100.
    drift : int
        Drift value for the RSI, by default is 1.

SRLines:
    show : bool
        Show the support and resistance lines.

Stoch:
    fast_k : int
        The fast K period, by default 14.
    slow_d : int
        The slow D period, by default 3.
    slow_k : int
        The slow K period, by default 3.
```
</details>

The model can be converted to a dictionary and then passed through the `indicators` params.

:::warning
Some indicators, like RSI and MACD, create subplots. Only 4 subplots (not including the main candles + volume) can be created within the same view.
:::

The chart below is built from the same object as the one above.

```python
indicators = data.charting.indicators().dict()
macd=indicators.get("macd")
kc=indicators.get("kc")
chart_params=dict(
    candles=False,
    title="My New Chart",
    indicators=(dict(
        macd=macd,
        kc=kc,
    ))
)
data.charting.to_chart(**chart_params)
```

![indicators2](https://github.com/OpenBB-finance/OpenBB/assets/85772166/76c06aff-a568-4b7f-80d4-c58a73c0f1d7)

:::tip
Data can be exported directly from the chart as a CSV. Use the button at the bottom-right of the mode bar.
:::


---

---
title: openbb-api
sidebar_position: 3
description: Learn how to use a Python tool to generate widgets.json from an openapi.json file.
keywords:
- widgets.json
- openapi.json
- OpenBB API
- Endpoint integration
- Widget configuration
- Language-Agnostic API
- API implementation
- Python
- FastAPI
- Workspace widgets
- Widget definitions
- Autogenerate
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="ODP API | OpenBB Docs" />

The, [openbb-platform-api](https://pypi.org/project/openbb-platform-api/), Python package is for converting FastAPI instances, or `openapi.json` objects, into OpenBB Workspace Backends and Widget definitions.

It provides drop-in-like functionality for the FastAPI + Uvicorn development stack, and is intended to speed up the development of Workspace Apps and Backends with Minimal Viable Python.

## Features

- Bulk-generate widgets from an OpenAPI JSON schema file.
- Start and configure Backends for Workspace using arbitrary Python files and FastAPI app factories, or use the environment's installed Open Data Platform extensions.
- Merges inline widget configurations with automatically generated content for customizing any property of a widget's definition.
- No separate `widgets.json` file required.
- Use an existing `widgets.json` file, or create a new one, and it can be edited live without requiring restart.
- Automatically adds endpoints to serve Workspace configuration JSON files.

## Installation

Install from PyPI in an environment with a Python version between 3.9 and 3.13:

```sh
pip install openbb-platform-api
```

## Usage

Without supplying parameters, the script loads a FastAPI instance generated by the environment's installed Open Data Platform extensions and preferences.

If there are no installed extensions, and no `--app` parameter is supplied, an API with zero endpoints and widgets will be created.

Defaults are, `--host 127.0.0.1 --port 6900`, and it will fallback to the next available port if already in use.

### Keyword Arguments

```sh
--app                           Absolute path to the Python file with the target FastAPI instance. Default is the installed Open Data Platform API.
--name                          Name of the FastAPI instance in the app file. Default is 'app'.
--factory                       Flag to indicate if the app name is a factory function. Default is 'false'.
--editable                      Flag to make widgets.json an editable file that can be modified during runtime. Default is 'false'.
--build                         If the file already exists, changes prompt action to overwrite/append/ignore. Only valid when --editable true.
--no-build                      Do not build the widgets.json file. Use this flag to load an existing widgets.json file without checking for updates.
--exclude                       JSON encoded list of API paths to exclude from widgets.json. Disable entire routes with '*' - e.g. '["/api/v1/*"]'.
--widgets-json                  Absolute/relative path to use as the widgets.json file. Default is ~/envs/{env}/assets/widgets.json, when --editable is 'true'.
--apps-json                     Absolute/relative path to use as the apps.json file for the server. Default is ~/OpenBBUserData/workspace_apps.json.
--agents-json                   Absolute/relative path to use as the agents.json file. Including this will add the /agents endpoint to the API.
```

Remaining parameters are passed to `uvicorn.run`

### Example Syntax

```sh
openbb-api --app ./some_file.py --host 0.0.0.0 --port 8005 --reload
```

### Factory Flag

If the FastAPI instance is served via factory function, set the `--factory` flag.

Also, declare the name of the factory function.

```sh
openbb-api --app some_file.py:main --factory
```

### App or Factory Name

It is assumed that the FastAPI instance within the module is named, `app`.

```sh
openbb-api --app some_file.py --name my_app
```

## Inline Widget Definitions

With FastAPI and Pydantic, widget definitions can be supplied inside the code and `openapi.json` schema.

### OpenAPI Extra

The entrypoint at the function-level provides the same utility as examples demonstrating a `@register_widget` decorator, with no required imports or boiler-plate code.

Define as many, or few, items as desired here. They will be given the highest priority in the final result, overriding pre-existing definitions within the route.

```python
from fastapi import FastAPI

app = FastAPI()

app.get(
  "/some_endpoint",
  openapi_extra={
    "widget_config": {
      # Any key:value object defined on the Widgets JSON Reference page.
      "name": "Custom Widget Name",
      "description": "Override the function's docstring with a different description",
    }
  }
)
async def endpoint_func():
  """Description that gets transferred to Widget's description."""
  pass
```

### Exclude Endpoint

An API endpoint may not be intended as a widget, like an optionsEndpoint. Exclude it from the widgets by setting `{"exclude": True}`.

```python
@app.get(
  "/some_param_choices",
  openapi_extra={
    "widget_config": {
      "exclude": True
    }
  }
)
async def some_param_choices():
  return [{"label": "Choice 1", "value": "choice1"}]
```

### Dropdown Parameters

[Dropdown](/workspace/developers/widget-parameters/dropdown) choices are generated automatically from a `Literal` Type of function parameter.

```python
from typing import Literal

@app.get(
  "/some_endpoint_with_dropdown",
)
async def some_endpoint_with_dropdown(
  choices: Literal[
    "Choice 1",
    "Choice 2",
    "Choice 3"
  ] = "Choice 3"
):
  pass
```

The params array in the Widget definition will end up like:

```json
{
  "widgetId": "some_endpoint_with_dropdown_custom_obb",
  "params": [
    {
      "paramName": "choices",
      "label": "Choices",
      "value": "Choice 3",
      "type": "text",
      "description": "",
      "options": [
        {"label": "Choice 1", "value": "Choice 1"},
        {"label": "Choice 2", "value": "Choice 2"},
        {"label": "Choice 3", "value": "Choice 3"},
      ],
    },
  ],
}
```

### JSON Schema Extra

Annotating parameters and response models extends the capabilities for auto-generation, and is a way to define items unreachable by automation.

Additional settings, compatible with `widgets.json`, are placed in the `json_schema_extra` dictionary, under the key, `x-widget_config`.

```python
from typing import Annotated
from fastapi import FastAPI, Query

my_param: Annotated[
  str,
  Query(
    title="My Title",
    description="My custom hovertext with detailed information",
    json_schema_extra={
      "x-widget_config": {
        "optionsEndpoint": "/my_param_choices_endpoint_returning_list_of_dictionaries" #[{"label": "Display Name": "value": "actual_value"}]
      }
    }
  )
]

app = FastAPI()

@app.get(
  "/annotated_endpoint",
  openapi_extra={
    "widget_config": {
      "params": [
        "paramName": "my_param", # Identify the parameter to match with and update.
        "value": "new_default_value"  # Tell Workspace to use a different default value.
      ]
    }
  }
)
async def annotated_endpoint(my_param = "") -> str:  # Defining a `str` here marks the widget as `{"type":"markdown"}`
  """Example creating markdown widget."""
  return "Hello world!"
```

Column definitions for tables are discovered by using a Pydantic model as the return type.

```python
import datetime
from fastapi import FastAPI
from pydantic import BaseModel, Field

class MyData(BaseModel):
    """This is a custom response model."""

    # Add fields to the model.
    column_1: datetime.date = Field(
        description="The date column is a mandatory field.",
        title="Some Date",
    )
    column_2: Optional[str] = Field(
        default=None,
        description="This is an optional string column.",
        title="Some String",
    )
    column_3: int = Field(
        default=-1,
        description="This is an integer column.",
        title="Some Integer",
    )
    column_4: float = Field(
        default=10.25,
        description="This is a float column.",
        title="Some Float",
    )
    column_5: float = Field(
        default=10.25,
        description="This is a percent column.",
        title="Some Percent",
        json_schema_extra={"x-widget_config": {"formatterFn": "percent"}},
    )
    column_6: float = Field(
        default=0.1025,
        description="This is a normalized percent value adjusted for presentation.",
        title="Some Normalized Percent",
        json_schema_extra={
            "x-widget_config": {
                "formatterFn": "normalizedPercent",
                "renderFn": "greenRed",
            }
        },
    )


@app.get("/hello_data")
async def hello_data() -> list[MyData]: # Define response as a list of models. This sets {"type":"table"} in the widget definition.
    """Widget description created by docstring."""
    # Do something with the parameters and return the result of work.
    return [MyData(column_1=datetime.date.today(), column_2="Hello!")]
```

## Convert From OpenAPI JSON

Convert `openapi.json` to `widgets.json` with an imported function.

```python
from openbb_platform_api.utils.widgets import build_json
```

This is the spec file for a basic FastAPI server with only one endpoint that returns a JSON list object:

<details>
<summary mdxType="summary">openapi.json</summary>
```json
{
  "openapi": "3.1.0",
  "info": {
    "title": "FastAPI",
    "version": "0.1.0"
  },
  "paths": {
    "stock_quote": {
      "get": {
        "summary": "Quote",
        "description": "Widget description derived from the endpoint's docstring.",
        "operationId": "quotestock_quote_get",
        "parameters": [
          {
            "name": "some_parameter",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Some Parameter"
            }
          },
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "AAPL",
              "title": "Symbol"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {},
                  "title": "Response Quotestock Quote Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}
```
</details>

Assuming the spec above is an in-memory object, use the syntax below to convert it.

```python
import json
from openbb_platform_api.utils.widgets import build_json

openapi = json.loads(...)
widgets = json.dumps(build_json(openapi), []) # The empty list can be a list of paths to ignore.
```

<details>
<summary mdxType="summary">widgets.json</summary>
```json
{
  "stock_quote_custom_obb": {
    "name": "Stock Quote",
    "description": "Widget description derived from the endpoint's docstring.",
    "category": "Stock Quote",
    "type": "table",
    "searchCategory": "Stock Quote",
    "widgetId": "stock_quote_custom_obb",
    "params": [
      {
        "label": "Some Parameter",
        "description": "Some Parameter",
        "type": "text",
        "value": null,
        "show": true,
        "paramName": "some_parameter"
      },
      {
        "label": "Symbol",
        "description": "Symbol",
        "type": "text",
        "value": "AAPL",
        "show": true,
        "paramName": "symbol"
      }
    ],
    "endpoint": "stock_quote",
    "runButton": false,
    "gridData": {
      "w": 40,
      "h": 15
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true,
        "enableAdvanced": true
      }
    },
    "source": [
      "Custom"
    ]
  }
}
```
</details>

## Examples

The default widget type is `table`, and all that is required to generate a basic AgGrid widget is to return a list of dictionaries.

:::note
It should be assumed that `app` is an instance of `FastAPI`.

```python
from fastapi import FastAPI

app = FastAPI()
```

:::

```python
@app.get("/table_widget")
async def table_widget() -> list:
  """Returns a table widget with no column definitions."""
  return [{"column1": "Hello", "column2": "World!"}]
```

### Markdown Widget

Define the response output as a string to set the generated widget entry as a [Markdown widget](/workspace/developers/widget-types/markdown).

```python
@app.get("/markdown_widget")
async def markdown_widget() -> str:
    """Returns a markdown widget"""
    return "# Markdown Widget"
```

![Markdown Widget](https://openbb-cms.directus.app/assets/60cbbcb5-194e-4c03-905e-65f3de7f4efe.png)

### Metric Widget

A [Metric Widget](/workspace/developers/widget-types/metric) is generated by importing a response model type, and returning a dictionary.

```python
from openbb_platform_api.response_models import MetricResponseModel

@app.get("/test_metric", response_model=MetricResponseModel)
async def test_metric():
    """Widget description created by docstring."""
    return dict(label="Example Label", value=12345, delta=5.67)
```

![Metric Widget](https://openbb-assets.s3.us-east-1.amazonaws.com/docs/pro/metric-widget.png)

<details>
<summary mdxType="summary">Generated Widget Entry</summary>
```json
{
  "test_metric_custom_obb": {
    "name": "Test Metric",
    "description": "Widget description created by docstring.",
    "category": "Metric",
    "type": "metric",
    "searchCategory": "Metric",
    "widgetId": "test_metric_custom_obb",
    "params": [],
    "endpoint": "/test_metric",
    "runButton": false,
    "gridData": {
      "w": 4,
      "h": 5
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true
      }
    },
    "source": [
      "Custom"
    ]
  }
}
```
</details>

:::info
Return multiple metrics in the same widget by returning a list of MetricResponseModel types.

```python
@app.get("/test_metric", response_model=list[MetricResponseModel])
async def test_metric():
    """Widget description created by docstring."""
    return [
        dict(label="Example Label", value=12345, delta=5.67),
        dict(label="Another Label", value=67890, delta=-2.34),
    ]
```

:::

### PDF Widget

Generate a PDF widget by importing a response model and returning a dictionary. The model formats the PDF as a base64-encoded string that can be read by Workspace.

```python
from typing import Annotated

from fastapi import Query
from openbb_platform_api.response_models import PdfResponseModel

@app.get("/open_pdf", response_model=PdfResponseModel)
async def open_pdf(
    file_path: Annotated[
        str,
        Query(
            description="Local path to the PDF document.",
            title="File Path",
        ),
    ],
):
    """Open a local PDF document."""
    with open(file_path, "rb") as file:
        pdf = file.read()

    return dict(
        content=pdf,
    )
```

<details>
<summary mdxType="summary">Generated Widget Entry</summary>
```json
{
  "open_pdf_custom_obb": {
    "name": "Open PDF",
    "description": "Open a local PDF document.",
    "category": "File",
    "type": "pdf",
    "searchCategory": "File",
    "widgetId": "open_pdf_custom_obb",
    "params": [
      {
        "label": "File Path",
        "description": "Local path to the PDF document.",
        "optional": false,
        "type": "text",
        "value": null,
        "show": true,
        "paramName": "file_path"
      }
    ],
    "endpoint": "/open_pdf",
    "runButton": false,
    "gridData": {
      "w": 20,
      "h": 25
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true
      }
    },
    "source": [
      "Custom"
    ],
    "refetchInterval": false,
    "subCategory": "PDF"
  }
}
```
</details>

### Plotly Chart Widget

Plotly Figure objects should be returned as their JSON-serializable, dictionary, representation. At minimum, the `openapi_extra` dictionary should contain the following:

```python
@app.get(
    "/hello_chart",
    openapi_extra={"widget_config": {"type": "chart"}},
)
async def hello_chart() -> dict:
    """Widget description created by docstring."""
    from plotly.graph_objs import Bar, Layout, Figure

    fig = Figure(
        data=[Bar(x=["A", "B", "C"], y=[1, 2, 3])],
        layout=Layout(title="Hello Chart!", template="plotly_dark"),
    )

    return fig.to_plotly_json()
```

<details>
<summary mdxType="summary">Generated Widget Entry</summary>
```json
{
  "hello_chart_custom_obb": {
    "name": "Hello Chart",
    "description": "Widget description created by docstring.",
    "category": "Hello Chart",
    "type": "chart",
    "searchCategory": "Hello Chart",
    "widgetId": "hello_chart_custom_obb",
    "params": [],
    "endpoint": "/hello_chart",
    "runButton": false,
    "gridData": {
      "w": 40,
      "h": 15
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true
      }
    },
    "source": [
      "Custom"
    ]
  }
}
```
</details>

### Omni Widget

An [Omni Widget](/workspace/developers/widget-types/omni) requires a little more structure, it relies on Pydantic models to generate query parameters and validate the output.

- POST endpoint where all parameters are sent to the request body as a dictionary.
  - A single, positional argument.
- Inherit from utility class for Input model and parameter definitions.
  - Import: `from openbb_platform_api.query_models import OmniWidgetInput`
  - Pre-defined `prompt` parameter. Where required, overwrite the existing in the inheriting model's definition.
- Use utility class for API response model.
  - Import: `from openbb_platform_api.response_models import OmniWidgetResponseModel`
  - Simplifies output handling by dynamically setting the `data_format` object based on the supplied `content`.
- Define the response model as, `OmniWidgetResponseModel`, return a dictionary from the function.
  - `{"content": ...}`
  - API will validate the content and assign the output based on:
    - "text": For markdown/text content
    - "table": For tabular data (list of dictionaries or dictionary of arrays)
    - "chart": For Plotly Figure objects

<details>
<summary mdxType="summary">Code</summary>

```python
from typing import Literal, Optional
from openbb_platform_api.query_models import OmniWidgetInput
from openbb_platform_api.response_models import OmniWidgetResponseModel
from pydantic import Field

class TestOmniWidgetQueryModel(OmniWidgetInput):
    """Test query model for OmniWidget."""
    # Here, all parameters are required except `parse_as`.
    param1: str = Field(description="A string parameter for testing")
    param2: int = Field(description="An integer parameter for testing")
    param3: bool = Field(default=False, description="A boolean parameter for testing")
    start_date: str = Field(description="The start date for testing")
    end_date: str = Field(description="The end date for testing")
    parse_as: Optional[Literal["table", "chart", "text"]] = Field(  # Here for demonstration and handled by function output validation.
        default=None,
        description="The format to parse the response as, either 'table', 'chart', or 'text'."
        + " If not defined, the model will try to infer the type based on the content.",
    )

@app.post("/omni_widget", response_model=OmniWidgetResponseModel)
async def create_omni_widget(item: TestOmniWidgetQueryModel):
    """This is a test endpoint for generating an OmniWidget in OpenBB Workspace."""
    # Here you would process the incoming request and return a response

    some_test_data = [
        {"prompt": item.prompt,  # This is the text area box on the widget.
        "param1": item.param1,
        "param2": item.param2,
        "param3": item.param3,
        "start_date": item.start_date,
        "end_date": item.end_date,
    }]

    if item.parse_as == "chart":  # This could also be an instance of plotly.graph_objects.Figure
        some_test_data = {
            "data": [{"type": "bar", "x": ["A", "B", "C"], "y": [1, 2, 3]}],
            "layout": {"template": "plotly_dark", "title": {"text": "Hello Chart!"}}
        }
    elif item.parse_as == "text":
        some_test_data = f"""
### This is a test OmniWidget response

- Prompt: {item.prompt}
- Param1: {item.param1}
- Param2: {item.param2}
- Param3: {item.param3}
- Start Date: {item.start_date}
- End Date: {item.end_date}
"""
    return {"content": some_test_data}

```

</details>

![omni widget](https://pypi-camo.freetls.fastly.net/e8796d08d0ae50bb5b653c317dd936fce33ecf1a/68747470733a2f2f6769746875622e636f6d2f757365722d6174746163686d656e74732f6173736574732f36613561613838362d393730312d343434382d623339372d656437626162393963616337)

<details>
<summary mdxType="summary">Generated Widget Entry</summary>
```json
{
  "omni_widget_custom_obb": {
    "name": "Omni Widget",
    "description": "This is a test endpoint for generating an OmniWidget in OpenBB Workspace.",
    "category": "Omni Widget",
    "type": "omni",
    "searchCategory": "Omni Widget",
    "widgetId": "omni_widget_custom_obb",
    "params": [
      {
        "label": "Prompt",
        "description": "Input prompt value for the OmniWidget.",
        "optional": true,
        "type": "text",
        "value": "",
        "show": false,
        "paramName": "prompt"
      },
      {
        "label": "Param 1",
        "description": "A string parameter for testing",
        "optional": true,
        "type": "text",
        "value": null,
        "paramName": "param_1"
      },
      {
        "label": "Param 2",
        "description": "An integer parameter for testing",
        "optional": true,
        "type": "number",
        "value": null,
        "paramName": "param_2"
      },
      {
        "label": "Param 3",
        "description": "A boolean parameter for testing",
        "optional": true,
        "type": "boolean",
        "value": false,
        "paramName": "param_3"
      },
      {
        "label": "Start Date",
        "description": "The start date for testing",
        "optional": true,
        "type": "date",
        "value": null,
        "paramName": "start_date"
      },
      {
        "label": "End Date",
        "description": "The end date for testing",
        "optional": true,
        "type": "date",
        "value": null,
        "paramName": "end_date"
      },
      {
        "label": "Parse As",
        "description": "The format to parse the response as, either 'table', 'chart', or 'text'. If not defined, the model will try to infer the type based on the content.",
        "optional": true,
        "type": "text",
        "value": null,
        "options": [
          {
            "label": "table",
            "value": "table"
          },
          {
            "label": "chart",
            "value": "chart"
          },
          {
            "label": "text",
            "value": "text"
          }
        ],
        "paramName": "parse_as"
      }
    ],
    "endpoint": "/omni_widget",
    "runButton": false,
    "gridData": {
      "w": 40,
      "h": 15
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true
      }
    },
    "source": [
      "Custom"
    ]
  }
}
```
</details>

### Form Widget

An input form can be added as a widget parameter, where a successful submission to a POST endpoint triggers a refresh of the widget data.

The entry in `widgets.json` will be automatically created if the conditions below are met:

- GET request route defines in top-level `widget_config`:
  - `{"form_endpoint": "/path_to/form_post_endpoint"}`
- POST method route takes 1 positional argument, a sub-class of Pydantic BaseModel.
  - Create a model, similar to annotated table fields, defining all inputs to the form.
  - Submit button added automatically if not manually defined.

The following snippet creates a widget with a form as the input, and an output table of all submitted forms, as processed through the `IntakeForm` model.

<details>
<summary mdxType="summary">Code</summary>

```python
import uuid
from datetime import date as dateType
from typing import Literal, Union

from fastapi import FastAPI
from pydantic import BaseModel, ConfigDict, Field

app = FastAPI()

AccountTypes = Literal["General Fund", "Separately Managed", "Private Equity", "Family Office"]


class GeneralIntake(BaseModel):
    """Submit a form via POST request."""

    model_config = ConfigDict(
        extra="ignore", model_title_generator=lambda model: "Submit Form"
    )

    date_created: dateType = Field(alias="Created On", default_factory=dateType.today)
    first_name: str = Field(alias="First Name")
    last_name: str = Field(alias="Last Name")
    email: str = Field(alias="Contact Email")
    dob: dateType = Field(
        alias="Date Of Birth",
    )
    account_types: Union[AccountTypes, list[AccountTypes]] = Field(
        alias="Type Of Account",
        json_schema_extra={
            "x-widget_config": {"multiSelect": True},
        },
    )


class IntakeForm(BaseModel):
    """Submission Records."""

    model_config = ConfigDict(extra="ignore")

    contacted: bool = Field(
        title="Contacted",
        default=False,
    )
    date_created: dateType = Field(
        title="Created On",
    )
    first_name: str = Field(title="First Name")
    last_name: str = Field(title="Last Name")
    email: str = Field(title="Contact Email")
    dob: dateType = Field(
        title="Date Of Birth",
    )
    account_types: Union[AccountTypes, list[AccountTypes]] = Field(
        title="Account Interest",
    )
    unique_id: uuid.UUID = Field(
        title="Unique ID",
        default_factory=uuid.uuid4,
    )


INTAKE_FORMS: list[IntakeForm] = []


@app.post("/general_intake_submit")
async def general_intake_post(data: GeneralIntake) -> bool:
    global INTAKE_FORMS
    try:
        INTAKE_FORMS.append(IntakeForm(**data.model_dump()))
        return True
    except Exception as e:
        raise e from e


@app.get(
    "/general_intake",
    openapi_extra= {
        "widget_config": {
            "form_endpoint": "/general_intake_submit",
        },
    },
)
async def general_intake() -> list[IntakeForm]:
    return INTAKE_FORMS
```

</details>

<img width="1552" alt="Form Input Widget" src="https://github.com/user-attachments/assets/16bb3844-ea43-44c8-ae44-67159b0b70e4" />

<details>
<summary mdxType="summary">Generated Widget Entry</summary>
```json
{
  "general_intake_custom_obb": {
    "name": "General Intake",
    "description": "",
    "category": "General Intake",
    "type": "table",
    "searchCategory": "General Intake",
    "widgetId": "general_intake_custom_obb",
    "params": [
      {
        "type": "form",
        "paramName": "form",
        "label": "Submit Form",
        "description": "Submit a form via POST request.",
        "endpoint": "/general_intake_submit",
        "inputParams": [
          {
            "label": "Created On",
            "description": "Created On",
            "type": "date",
            "value": null,
            "paramName": "Created On"
          },
          {
            "label": "First Name",
            "description": "First Name",
            "type": "text",
            "value": null,
            "paramName": "First Name"
          },
          {
            "label": "Last Name",
            "description": "Last Name",
            "type": "text",
            "value": null,
            "paramName": "Last Name"
          },
          {
            "label": "Contact Email",
            "description": "Contact Email",
            "type": "text",
            "value": null,
            "paramName": "Contact Email"
          },
          {
            "label": "Date Of Birth",
            "description": "Date Of Birth",
            "type": "date",
            "value": null,
            "paramName": "Date Of Birth"
          },
          {
            "label": "Type Of Account",
            "description": "Type Of Account",
            "type": "text",
            "value": null,
            "multiSelect": true,
            "options": [
              {
                "label": "General Fund",
                "value": "General Fund"
              },
              {
                "label": "Separately Managed",
                "value": "Separately Managed"
              },
              {
                "label": "Private Equity",
                "value": "Private Equity"
              },
              {
                "label": "Family Office",
                "value": "Family Office"
              }
            ],
            "paramName": "Type Of Account"
          },
          {
            "paramName": "submit",
            "label": "Submit",
            "value": true,
            "type": "button",
            "description": "Submit the form."
          }
        ]
      }
    ],
    "endpoint": "/general_intake",
    "runButton": false,
    "gridData": {
      "w": 40,
      "h": 15
    },
    "data": {
      "dataKey": "",
      "table": {
        "showAll": true,
        "columnsDefs": [
          {
            "field": "contacted",
            "formatterFn": null,
            "headerName": "Contacted",
            "headerTooltip": "Contacted",
            "cellDataType": "text"
          },
          {
            "field": "date_created",
            "formatterFn": null,
            "headerName": "Created On",
            "headerTooltip": "Created On",
            "cellDataType": "date"
          },
          {
            "field": "first_name",
            "formatterFn": null,
            "headerName": "First Name",
            "headerTooltip": "First Name",
            "cellDataType": "text"
          },
          {
            "field": "last_name",
            "formatterFn": null,
            "headerName": "Last Name",
            "headerTooltip": "Last Name",
            "cellDataType": "text"
          },
          {
            "field": "email",
            "formatterFn": null,
            "headerName": "Contact Email",
            "headerTooltip": "Contact Email",
            "cellDataType": "text"
          },
          {
            "field": "dob",
            "formatterFn": null,
            "headerName": "Date Of Birth",
            "headerTooltip": "Date Of Birth",
            "cellDataType": "date"
          },
          {
            "field": "account_types",
            "formatterFn": null,
            "headerName": "Account Interest",
            "headerTooltip": "Account Interest",
            "cellDataType": "text"
          },
          {
            "field": "unique_id",
            "formatterFn": null,
            "headerName": "Unique ID",
            "headerTooltip": "Unique ID",
            "cellDataType": "text"
          }
        ],
        "enableAdvanced": true
      }
    },
    "source": [
      "Custom"
    ],
    "form_endpoint": "/general_intake_submit"
  }
}
```
</details>


---

---
title: openbb-mcp
sidebar_position: 4
description: Learn how to use the `openbb-mcp-server` Python library to convert a FastAPI application into a Workspace-ready MCP server.
keywords:
- MCP Server
- MCP Tool
- AI
- Ada
- Agent
- Copilot
- Prompts
- openapi.json
- OpenBB MCP
- FastAPI
- Python
- FastMCP
- Workspace widgets
- Widget definitions
- Autogenerate
---

The, [openbb-mcp-server](https://pypi.org/project/openbb-mcp-server/), Python package is for converting OPD Python installations, or other FastAPI instances, into Workspace-compatible MCP servers accessible from the chat interface.

Servers can be extensively configured in a manner similar to [`openbb-api`](/python/extensions/interface/openbb-api), the Minimum Viable Python approach.

## Features

- Convert any FastAPI application into a MCP server.
- Configure MCP tools and prompts through inline code via `openapi_extra`, under the `mcp_config` key.
- Add a system prompt to provide connecting agents with comprehensive onboarding and usage instructions.
- Add server prompts for agents to execute multi-tool workflows with minimal reasoning effort.
- Compatible with `stdio`, `sse`, and `streamable-http` transports.
- Supports dynamic tool discovery and fixed tool sets.
- No-code Basic Auth implementation via Bearer token.

## Installation & Usage

```sh
pip install openbb-mcp-server
```

Start the OpenBB MCP server with default settings:

```sh
openbb-mcp
```

### Command Line Arguments

Enter `openbb-mcp --help` to see the docstring from the command line.

<details>
<summary mdxType="summary">Arguments List</summary>

```sh
--help
    Show this help message and exit.

--app <app_path>
    The path to the FastAPI app instance. This can be in the format
    'module.path:app_instance' or a file path 'path/to/app.py'.
    If not provided, the server will run with the default built-in app.

--name <name>
    The name of the FastAPI app instance or factory function in the app file.
    Defaults to 'app'.

--factory
    If set, the app is treated as a factory function that will be called
    to create the FastAPI app instance.

--host <host>
    The host to bind the server to. Defaults to '127.0.0.1'.
    This is a uvicorn argument.

--port <port>
    The port to bind the server to. Defaults to 8000.
    This is a uvicorn argument.

--transport <transport>
    The transport mechanism to use for the MCP server.
    Defaults to 'streamable-http'.

--allowed-categories <categories>
    A comma-separated list of tool categories to allow.
    If not provided, all categories are allowed.

--default-categories <categories>
    A comma-separated list of tool categories to be enabled by default.
    Defaults to 'all'.

--no-tool-discovery
    If set, tool discovery will be disabled.

--system-prompt <path>
    Path to a TXT file with the system prompt.

--server-prompts <path>
    Path to a JSON file with a list of server prompts.
```

</details>

#### All other arguments will be passed to `uvicorn.run`.

## Settings Reference

Go [here](/python/settings/mcp_settings) to see the complete table.
All settings can be configured via the `mcp_settings.json` file or as environment variables.

## Configuration

The server can be configured through multiple methods, with settings applied in the following order of precedence:

1.  **Command Line Arguments**: Highest priority, overriding all other methods.
2.  **Environment Variables**: Each setting can be controlled by an environment variable, which will override the configuration file.
3.  **Configuration File**: A JSON file at `~/.openbb_platform/mcp_settings.json` provides the base configuration.
    - If the configuration file does not exist, one will be populated with defaults.

:::note
For some data providers, you need to set API key in the `~/.openbb_platform/user_settings.json` file.
:::

## Authentication

The MCP server supports client-side and server-side authentication to secure endpoints.

### Server-Side Authentication

Server-side authentication requires incoming requests to provide credentials. This is configured using the `server_auth` setting, which accepts a tuple of `(username, password)`.

When `server_auth` is enabled, clients must include an `Authorization` header with a `Bearer` token. The token should be a Base64-encoded string of `username:password`.

**Example: Environment Variable**

```env
OPENBB_MCP_SERVER_AUTH='["myuser", "mypass"]'
```

**Example: `mcp_settings.json`**

```json
{
  "server_auth": ["myuser", "mypass"]
}
```

### Client-Side Authentication

Client-side authentication configures the MCP server to use credentials when making downstream requests. This is useful when the server needs to authenticate with other services.

**Example: Environment Variable**

```env
OPENBB_MCP_CLIENT_AUTH='["client_user", "client_pass"]'
```

**Example: `mcp_settings.json`**

```json
{
  "client_auth": ["client_user", "client_pass"]
}
```

### Programmatic Authentication

For advanced use cases, you can pass a pre-configured authentication object directly to the `create_mcp_server` function using the `auth` parameter. This allows you to implement custom authentication logic or use third-party authentication providers.

```python
from fastmcp.server.auth.providers import BearerProvider
from openbb_mcp_server.app import create_mcp_server

# Create a custom auth provider
custom_auth = BearerProvider(...)

# Pass it to the server
mcp_server = create_mcp_server(settings, fastapi_app, auth=custom_auth)
```

## Advanced Configuration: Lists and Dictionaries

For settings that accept a list or a dictionary, you have two flexible formats for defining them in both command-line arguments and environment variables.

#### 1. Comma-Separated Strings

This is a simple and readable way to define lists and simple dictionaries.

-   **Lists**: Provide a string of comma-separated values.
    -   Example: `equity,news,crypto`
-   **Dictionaries**: Provide a string of comma-separated `key:value` pairs.
    -   Example: `host:0.0.0.0,port:9000`

#### 2. JSON-Encoded Strings

For more complex data structures, or to ensure precise type handling (e.g., for numbers and booleans), you can use a JSON-encoded string.

-   **Lists**: A standard JSON array.
    -   Example: `'["equity", "news", "crypto"]'`
-   **Dictionaries**: A standard JSON object.
    -   Example: `'{"host": "0.0.0.0", "port": 9000}'`

**Important Note on Quoting**: When passing JSON-encoded strings on the command line, it is highly recommended to wrap the entire string in **single quotes (`'`)**. This prevents your shell from interpreting the double quotes (`"`) inside the JSON string, which can lead to parsing errors.

#### Practical Examples

Here’s how you can apply these formats in practice:

**Command-Line Arguments:**

```sh
# List with comma-separated values
openbb-mcp --default-categories equity,news

# List with a JSON-encoded string (note the single quotes)
openbb-mcp --default-categories '["equity", "news"]'

# Dictionary with comma-separated key:value pairs
openbb-mcp --uvicorn-config "host:0.0.0.0,port:9000"

# Dictionary with a JSON-encoded string (note the single quotes)
openbb-mcp --uvicorn-config '{"host": "0.0.0.0", "port": 9000, "env_file": "./path_to/.env"}'
```

**Environment Variables (in a `.env` file):**

```env
# List with comma-separated values
OPENBB_MCP_DEFAULT_TOOL_CATEGORIES="equity,news"

# List with a JSON-encoded string
OPENBB_MCP_DEFAULT_TOOL_CATEGORIES='["equity", "news"]'

# Dictionary with comma-separated key:value pairs
OPENBB_MCP_UVICORN_CONFIG="host:0.0.0.0,port:9000"

# Dictionary with a JSON-encoded string
OPENBB_MCP_UVICORN_CONFIG='{"host": "0.0.0.0", "port": 9000, "env_file": "./path_to/.env"}'
```

## Tool Categories

The server organizes OpenBB tools into categories based on the included API Routers (paths).
Categories depend on the installed extensions, but will be the first path in the API after the given prefix.

For example:

- **`equity`** - Stock data, fundamentals, price history, estimates
- **`crypto`** - Cryptocurrency data and analysis
- **`economy`** - Economic indicators, GDP, employment data
- **`news`** - Financial news from various sources

Each category contains subcategories that group related functionality (e.g., `equity_price`, `equity_fundamental`, etc.).

### Root Tools

An additional set of tools are tagged as "admin", or "prompt".

<details>
<summary mdxType="summary">Tool List</summary>

- available_categories: List all categories.

- available_tools: List all tools by category.
  - `category`: Category of tool to list.
  - `subcategory`: Optional subcategory. Use 'general' for tools directly under the category.

- activate_tools: Activate a tool for use.
  - `tool_names`: Names of tools to activate. Comma-separated string for multiple.

- deactivate_tools: Deactivate a tool after use.
  - `tool_names`: Names of tools to deactivate. Comma-separated string for multiple.

- list_prompts: Lists all available prompts in the server.

- execute_prompt: Execute a prompt with arguments, if any.
  - `prompt_name`: Name of the prompt to execute.
  - `arguments`: Dictionary of argument:value for the prompt.

</details>

## Tool Discovery

When `enable_tool_discovery` is enabled (default), the server provides discovery tools that allow agents to:

- Discover available tool categories and subcategories
- See tool counts and descriptions before activating
- Enable/disable specific tools dynamically during a session
- Start with minimal tools and progressively add more as needed

To take full advantage of minimal startup tools, you should set the `--default-categories` argument to `admin`. This will enable only the discovery tools at startup.

For multi-client deployments or scenarios where you want a fixed toolset, disable tool discovery with `--no-tool-discovery`.

## System Prompt

A system prompt file can be added on initialization, or defined in the configuration file, or as an environment variable.
It should be a valid, relative or absolute, path to a `.txt` file.

The system prompt is made available as a resource, `resource://system_prompt`, and is discoverable from the, `list_prompts`, tool.

Clients will not automatically use the system prompt, instruct them to use it as part of their onboarding and orientation.

## Server Prompts

A system prompt file can be added on initialization, or defined in the configuration file, or as an environment variable.
It should be a valid, relative or absolute, path to a `.json` file with a list of prompt definitions.

Each entry in the JSON file is a dictionary with the following properties:

- **`name`**: Name of the prompt.
- **`description`**: A brief description of the prompt.
- **`content`**: The content for rendering the prompt.
- **`arguments`**: Optional list of arguments.
  - **`name`**: Name of the argument.
  - **`type`**: Simple Python type as a string - i.e, "int".
  - **`default`**: Supplying a default value makes the parameter Optional.
  - **`description`**: Description of the parameter. Supply need-to-know details for the LLM.
- **`tags`**: List of tags to apply to the argument.

Prompts here should provide the LLM a clear path for executing a workflow combining multiple tools or steps, for example:

<details>
<summary mdxType="summary">Example Server Prompt</summary>

```json
[
    {
      "name": "equity_analysis",
      "description": "Perform a comprehensive equity analysis using multiple data sources and metrics",
      "content": "Conduct a comprehensive analysis of {symbol} for {analysis_period}. Follow this workflow:\n1. First, get basic stock quote and recent price performance using equity_price_performance.\n2. Retrieve fundamental data including financial statements, ratios, and key metrics using [equity_fundamental_ratios, equity_fundamental_metrics, quity_fundamental_balance].\n3. Gather recent news and analyst estimates for the company using [news_company, equity_estiments_price_target].\n4. Compare valuation metrics with industry peers using equity_compare_peers.\n5. Summarize findings with investment recommendation.\n\nFocus areas: {focus_areas}\nRisk tolerance: {risk_tolerance}",
      "arguments": [
        {
          "name": "symbol",
          "type": "str",
          "description": "Stock ticker symbol to analyze (e.g., AAPL, TSLA)"
        },
        {
          "name": "analysis_period",
          "type": "str",
          "default": "last 12 months",
          "description": "Time period for the analysis"
        },
        {
          "name": "focus_areas",
          "type": "str",
          "default": "growth, profitability, valuation",
          "description": "Specific areas to focus on in the analysis"
        },
        {
          "name": "risk_tolerance",
          "type": "str",
          "default": "moderate",
          "description": "Risk tolerance level: conservative, moderate, or aggressive"
        }
      ],
      "tags": ["equity", "analysis", "comprehensive"]
    }
]
```

</details>

:::warning
An invalid prompt definition, or prompt argument, will be logged to the console as an error.
The item will be ignored, and will not raise an error.
:::

## Inline Prompts

Prompts can be added to an endpoint through the `openapi_extra` dictionary.

Adding prompts here will help the LLM use the endpoint for specific purposes, with less reasoning overhead.

Direct it to `execute_prompt`, or to make note that helpful prompts may be included in the tool's metadata.

The block below assumes `app` is an instance of `FastAPI`

<details>
<summary mdxType="summary">Example Inline Prompt</summary>

```python
@app.get(
    "/economy/gdp",
    openapi_extra={
        "mcp_config": {
            "prompts": [
                {
                    "name": "gdp_summary_prompt",
                    "description": "Generate a brief summary of GDP for a country.",
                    "content": "Provide a concise summary of the GDP for {country} over the last {years} years.",
                    "arguments": [
                        {
                            "name": "years",
                            "type": "int",
                            "default": 5,
                            "description": "Number of years to summarize.",
                        }
                    ],
                    "tags": ["economy", "gdp", "summary"],
                },
                {
                    "name": "gdp_comparison_prompt",
                    "description": "Compare the GDP of two countries.",
                    "content": "Compare the GDP growth of {country1} and {country2}.",
                    "arguments": [
                        {
                            "name": "country1",
                            "type": "str",
                            "description": "First country for comparison.",
                        },
                        {
                            "name": "country2",
                            "type": "str",
                            "description": "Second country for comparison.",
                        },
                    ],
                    "tags": ["economy", "gdp", "comparison"],
                },
            ]
        }
    },
)
def get_gdp_data(country: str, period: Literal["annual", "quarterly"] = "annual"):
    """Get GDP data for a specific country."""
    return {"country": country, "period": period}
```

</details>

Along with being added to `list_prompts`, prompts will be included with the tool's metadata, returned by `list_tools`.

The discovery metadata for this tool would look like:

__Economy Tools:__

- __`economy_gdp`__: Get GDP data for a specific country.

  - __Associated Prompts:__

    - `gdp_summary_prompt`: Generate a brief summary of GDP for a country. (Arguments: `years`, `country`)
    - `gdp_comparison_prompt`: Compare the GDP of two countries. (Arguments: `country1`, `country2`)

Use a prompt with the `execute_prompt` tool:

```json
{
  "prompt_name": "gdp_summary_prompt",
  "arguments": {
    "years": 10,
    "country": "Japan"
  }
}
```

Which outputs:

```json
{
  "description": "Generate a brief summary of GDP for a country.",
  "messages": [
    {
      "role": "user",
      "content": {
        "type": "text",
        "text": "Use the tool, economy_gdp, to perform the following task.\n\nProvide a concise summary of the GDP for Japan over the last 10 years."
      }
    }
  ]
}
```

## Inline MCP Configuration

In addition to defining prompts, the `openapi_extra.mcp_config` dictionary allows for more granular control over how your FastAPI routes are exposed as MCP tools.
By using the `MCPConfigModel`, you can validate your configuration and access several powerful properties to customize tool behavior.

It can be imported with:

```
from openbb_mcp_server.models.mcp_config import MCPConfigModel
```

Including this configuration in the `openapi_extra` slot will override any automatically generated value.
You only need to enter the values that you wish to customize.

Below are the properties you can define within `mcp_config`:

<details>
<summary mdxType="summary">Properties</summary>

-   **`expose`** (`Optional[bool]`): Set to `False` to completely hide a route from the MCP server. This is useful for internal or deprecated endpoints that should not be available as tools.

-   **`mcp_type`** (`Optional[MCPType]`): Classify the route as a specific MCP type. Valid options are `"tool"`, `"resource"`, or `"resource_template"`.

-   **`methods`** (`Optional[list[HTTPMethod]]`): Specify which HTTP methods to expose for a route that supports multiple methods (e.g., GET, POST). If omitted, all supported methods are exposed. Valid methods include `"GET"`, `"POST"`, `"PUT"`, `"PATCH"`, `"DELETE"`, `"HEAD"`, `"OPTIONS"`, and `*` (for all).

-   **`exclude_args`** (`Optional[list[str]]`): Provide a list of argument names to exclude from the tool’s signature. This is useful for filtering out parameters that are handled internally or are not relevant to the end-user.

- **`prompts`** (`Optional[list[dict[str, str]]]`): List of prompts specific to the endpoint. Keys for a prompt are:
  - **`name`**: Name of the prompt.
  - **`description`**: A brief description of the prompt.
  - **`content`**: The content for rendering the prompt. Endpoint parameters are inferred by placeholders.
  - **`arguments`**: Optional list of arguments. Items can be exclusive to the prompt, and not referenced in the endpoint.
    - **`name`**: Name of the argument.
    - **`type`**: Simple Python type as a string - i.e, "int".
    - **`default`**: Supplying a default value makes the parameter Optional.
    - **`description`**: Description of the parameter. Supply need-to-know details for the LLM.
  - **`tags`**: List of tags to apply to the argument.

</details>

### MCPConfigModel Validation

Values will be validated by the model before including in the server. Invalid configurations will be logged to the console as an error, and the inline definition will be ignored.

```console
ERROR    Invalid MCP config found in route, 'GET /equity/price'. Skipping tool customization because of validation error ->
          1 validation error for MCPConfigModel
          mcp_type
            Input should be 'tool', 'resource' or 'resource_template' [type=enum, input_value='some_setting', input_type=str]
              For further information visit https://errors.pydantic.dev/2.11/v/enum
```


### Example

Here is an example demonstrating how to use these properties to fine-tune a tool’s behavior:

```python
@app.get(
    "/some/route",
    openapi_extra={
        "mcp_config": {
            "expose": True,
            "mcp_type": "tool",
            "methods": ["GET"],
            "exclude_args": ["internal_param"],
            "prompts": [
                # ... prompt definitions ...
            ]
        }
    },
)
def some_route(param1: str, internal_param: str = "default"):
    """An example route with advanced MCP configuration."""
    return {"param1": param1}
```

In this example, the `/some/route` endpoint is explicitly exposed as a `tool` for the `GET` method only, and the `internal_param` argument is hidden from the tool’s interface.

## Client Examples

Start the server with the appropriate transport and configuration for the client, the default transport is `http`.

```bash
# Start with default settings
openbb-mcp

# Use an alternative transport
openbb-mcp --transport sse

# Start with specific categories and custom host/port
openbb-mcp --default-categories equity,news --host 0.0.0.0 --port 8080

# Start with allowed categories restriction
openbb-mcp --allowed-categories equity,crypto,news

# Disable tool discovery for multi-client usage
openbb-mcp --no-tool-discovery
```

### Claude Desktop

To connect the OpenBB MCP server with Claude Desktop, you need to configure it as a custom tool server. Here are the steps:

<details>
<summary mdxType="summary">Steps</summary>

1.  Locate the settings or configuration file for Claude Desktop where you can define custom MCP servers.
2.  Add the following entry to your `mcpServers` configuration. This will configure Claude Desktop to launch the OpenBB MCP server automatically using `stdio` for communication.

```json
{
  "mcpServers": {
    "openbb-mcp": {
      "command": "uvx",
      "args": [
        "--from",
        "openbb-mcp-server",
        "--with",
        "openbb",
        "openbb-mcp",
        "--transport",
        "stdio"
      ]
    }
  }
}
```

3.  Ensure that `uvx`, is installed and available in your system's PATH. If not, follow the installation instructions.
4.  Restart Claude Desktop to apply the changes. You should now see "openbb-mcp" as an available tool source.

</details>

### Cursor

To use OpenBB tools within Cursor, you first need to run the MCP server and then tell Cursor how to connect to it.

<details>
<summary mdxType="summary">Steps</summary>

**Step 1: Run the OpenBB MCP Server**

Open your terminal and start the server. You can use the default settings or customize it.

For a default setup, run:
```bash
openbb-mcp
```
The server will start on `http://127.0.0.1:8001`.

**Step 2: Configure Cursor**

Add the following configuration to the `mcpServers` object in your `mcp.json` file. If the `mcpServers` object doesn't exist, you can add it.

```json
{
  "mcpServers": {
    "openbb-mcp": {
      "url": "http://localhost:8001/mcp/"
    }
  }
}
```

</details>

### VS Code

<details>
<summary mdxType="summary">Steps</summary>

**Step 1: Enable MCP in VS Code Settings**

Enter `shift + command + p` and open "Preferences: Open User Settings"

Search for "mcp", and the item should show up under "Chat". Check the box to enable MCP server integrations.

<img width="1278" height="411" alt="vs-code-mcp-enable" src="https://github.com/user-attachments/assets/5ace29de-e59c-45c3-b751-c6d92614e0ee" />

**Step 2: Run the OpenBB MCP Server**

Open your terminal and start the server. You can use the default settings or customize it.

For a default setup, run:
```bash
openbb-mcp
```
The server will start on `http://127.0.0.1:8001`.

**Step 3: Add Server as HTTP**

Enter `shift + command + p` and select "MCP: Add Server".

<img width="595" height="412" alt="vs-code-mcp-commands" src="https://github.com/user-attachments/assets/9b13a5b6-ec20-43e2-9aae-7982e9fdcae6" />

Press enter and then select HTTP.

<img width="594" height="174" alt="vs-code-mcp-add-http" src="https://github.com/user-attachments/assets/d2a06e4b-404a-4317-ad2c-241c1ac5e04b" />

Copy the URL from the console of the running server, and enter it

```sh
INFO     Starting MCP server 'OpenBB MCP' with transport 'streamable-http' on http://127.0.0.1:8001/mcp
```

Give it a name, and add it either as global or to a workspace. The end result will create a `mcp.json` VS Code configuration file for the chosen domain.

<img width="402" height="195" alt="vs-code-mcp-json" src="https://github.com/user-attachments/assets/fdea335b-0523-4103-be3e-b5d9675c25b3" />

The tools can now be added as context to the chat.

<img width="601" height="442" alt="vs-code-mcp-tools" src="https://github.com/user-attachments/assets/06c39248-aedd-4f53-9560-6dfbae1efaf8" />

**Note**: When adding to the Cline extension, set `--transport sse` when starting the server.

</details>


---

---
title: openbb-core
sidebar_position: 1
description: Learn about the openbb-core package and its role as the base layer.
keywords:
- core
- OpenBB API
- Python Interface
- Extensions
- Routers
- OBBject
- FastAPI
- Pandas
- Numpy
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Core | OpenBB Docs" />

Developing with the `openbb-core` allows you to build once, then deploy everywhere.
The package serves as the foundational component of the OpenBB open-source ecosystem,
encapsulating essential services and infrastructure for other extensions.

:::info
The majority of users will not need to install, or interact with, this package directly, beyond running `openbb-build`.
:::

## Key Features

- **Extendable API Routing Mechanism** (`Router` Class): Simplifies the process of defining API routes and endpoints - out of the box Python and Web endpoints.
- **Standardized Data Model** (`Data` Class): A flexible and dynamic Pydantic model capable of handling various data structures.
- **Standardized Query Params** (`QueryParams` Class): A Pydantic model for handling querying to different providers.
- **Dynamic Field Support**: Enables handling of undefined fields, providing versatility in data processing.
- **Robust Data Validation**: Utilizes Pydantic's validation features to ensure data integrity.

## Installation

Install `openbb-core` as a standalone package from PyPI with:

```sh
pip install openbb-core
```

### Dependencies

Current specifications can be found in the pyproject.toml [file](https://raw.githubusercontent.com/OpenBB-finance/OpenBB/refs/heads/develop/) of the GitHub repository.

The top-level dependencies are:

- pydantic
- fastapi
- uvicorn
- requests
- aiohttp
- websockets
- python-multipart
- uuid7
- html5lib
- importlib-metadata
- python-dotenv
- ruff
- pyjwt
- pandas

## Usage

Most usage is described in other parts of this documentation.

General concepts and classes are explained on the [Architecture Overview](/python/developer/architecture_overview) page.

Go to the [Extension Types](/python/developer/extension_types) page to learn about, or get started building, OpenBB extensions.


---

---
title: Providers
sidebar_position: 2
description: This page describes the toolkit extensions available for the Open Data Platform.
keywords:
- Open Data Platform by OpenBB
- OpenBB Platform
- ODP
- data
- market
- source
- provider
- extension
- Python
- package
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

Provider extensions expand the breadth and coverage of the data available from the application endpoints.
Each source (provider) is its own independent extension, even if there is only one endpoint accessible.
This allows every data source to be inserted or removed, at any time, without disturbing the operation of the Core components.

Fetchers can be executed individually, independent of any router and interface.
They do not require static assets or application import to use.

## Provider Coverage

The total installed coverage can be determined through the Python interface.

```python
from openbb import obb
obb.coverage.providers
```

:::tip Missing endpoints or providers?
You might find that your build is "incomplete" when compared to the [reference](/python/reference) documentation.
Is it installed and/or configured with credentials? Try installing individually and then run `openbb-build`.
:::

## Available Provider Extensions

A variety of data sources are available out-of-the-box. Others need to be installed independently.
Anyone can build and publish data provider extensions for ODP.
See the documentation [here](/python/developer/extension_types/provider) to get started building.

:::important
OpenBB does not host or serve any data, and it provides connectors without warranty or support.
Bugs should be reported on [GitHub](https://github.com/OpenBB-finance/OpenBB/issues/new/choose)
:::

Many data providers require an API key for access.
Use the "API Key Name" column in the tables below to configure the user settings.

### Public Data

Along with the routers, these packages will be installed when `pip install openbb` is run.
Sources of the data are public agencies providing open APIs.
Some require registration, but all are free.

| Extension Name | Description | Installation Command | API Key Name |
|----------------|-------------|----------------------|-------------:|
| openbb-bls | [Bureau of Labor Statistics](https://www.bls.gov/developers/home.htm) data connector | pip install openbb-bls | bls_api_key |
| openbb-congress-gov | [United States Congress](https://api.congress.gov) data connector | pip install openbb-congress-gov | congress_gov_api_key |
| openbb-cftc | [Commodity Futures Trading Commission](https://publicreporting.cftc.gov/stories/s/r4w3-av2u) data connector | pip install openbb-cftc | cftc_app_token|
| openbb-ecb | [ECB](https://data.ecb.europa.eu/) data connector | pip install openbb-ecb | - |
| openbb-imf | [IMF](https://data.imf.org) data connector | pip install openbb-imf | - |
| openbb-federal-reserve | [Federal Reserve](https://www.federalreserve.gov/) data connector | pip install openbb-federal-reserve | - |
| openbb-fred | [FRED](https://fred.stlouisfed.org/) data connector | pip install openbb-fred | fred_api_key |
| openbb-government-us | [US Government](https://data.gov) data connector | pip install openbb-us-government | - |
| openbb-oecd | [OECD](https://data.oecd.org/) data connector | pip install openbb-oecd | - |
| openbb-polygon | [Polygon](https://polygon.io/) data connector | pip install openbb-polygon | polygon_api_key |
| openbb-sec | [SEC](https://www.sec.gov/edgar/sec-api-documentation) data connector | pip install openbb-sec | - |
| openbb-us-eia | U.S. Energy Information Administration - [EIA](https://www.eia.gov/opendata/register.php) - data connector | pip install openbb-us-eia | Free | eia_api_key |

### Third-Party

These packages are not installed when `pip install openbb` is run, but can be installed with the "all" extra.

:::info `pip install "openbb[all]"`
The behaviour of package extras may change in the future, installing modules individually is encouraged.
:::

Endpoint and data availability will vary by provider and subscription level, these extensions are not officially endorsed

<details>
<summary mdxType="summary">Unofficial Third-Party</summary>

| Extension Name | Description | Installation Command | Subscription Required | API Key Name |
|----------------|-------------|----------------------|------------------------------------|-------------:|
| openbb-alpha-vantage | [Alpha Vantage](https://www.alphavantage.co/) data connector | pip install openbb-alpha-vantage | Free | alpha_vantage_api_key |
| openbb-benzinga | [Benzinga](https://www.benzinga.com/apis/en-ca/) data connector | pip install openbb-benzinga | Paid | | benzinga_api_key |
| openbb-biztoc | [Biztoc](https://api.biztoc.com/#biztoc-default) News data connector | pip install openbb-biztoc | Free | biztoc_api_key |
| openbb-cboe | [Cboe](https://www.cboe.com/delayed_quotes/) data connector | pip install openbb-cboe | None | - |
| openbb-deribit | [Deribit](https://docs.deribit.com/) data connector | pip install openbb-deribit | None | - |
| openbb-econdb | [EconDB](https://econdb.com) data connector | pip install openbb-econdb | None | econdb_api_key |
| openbb-famafrench | [Ken French Data Library](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html) connector | pip install openbb-famafrench | None | - |
| openbb-finra | [FINRA](https://www.finra.org/finra-data) data connector | pip install openbb-finra | None / Free | - |
| openbb-finviz | [Finviz](https://finviz.com) data connector | pip install openbb-finviz | None | - |
| openbb-fmp | [FMP](https://site.financialmodelingprep.com/developer/) data connector | pip install openbb-fmp | Free | fmp_api_key |
| openbb-intrinio | [Intrinio](https://intrinio.com/pricing) data connector | pip install openbb-intrinio | Paid | intrinio_api_key |
| openbb-nasdaq | [Nasdaq Data Link](https://data.nasdaq.com/) connector | pip install openbb-nasdaq | None / Free | nasdaq_api_key |
| openbb-seeking-alpha | [Seeking Alpha](https://seekingalpha.com/) data connector | pip install openbb-seeking-alpha | None | - |
| openbb-tmx | [TMX](https://money.tmx.com) data connector | pip install openbb-tmx | None | - |
| openbb-tradier | [Tradier](https://tradier.com) data connector | pip install openbb-tradier | None | tradier_api_key; tradier_account_type ('sandbox' or 'live')
| openbb-tiingo | [Tiingo](https://www.tiingo.com/about/pricing) data connector | pip install openbb-tiingo | Free | tiingo_token |
| openbb-tradingeconomics | [TradingEconomics](https://tradingeconomics.com/api) data connector | pip install openbb-tradingeconomics | Paid | tradingeconomics_api_key |
| openbb-yfinance | [Yahoo Finance](https://finance.yahoo.com/) data connector | pip install openbb-yfinance | None | - |

</details>

Have you published a data provider extension and want it featured on this list? Tell us about it! Open a pull request on [GitHub](https://github.com/OpenBB-finance/OpenBBTerminal/) to submit an extension for inclusion. Code contributions, for new and existing, data providers are always welcome.

Search [PyPI](https://pypi.org/search/?q=openbb-) to find more extensions.


---

---
title: Data and Data Providers
sidebar_position: 2
description: This page contains some frequently asked questions about OpenBB data and providers.
keywords:
  - provider
  - data
  - source
  - live
  - platform
  - api
  - FastAPI
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Data Providers FAQ - FAQs | OpenBB Docs" />

<details>
<summary mdxType="summary">Does OpenBB have coverage for [insert type of data]?</summary>

Equity market coverage will vary by provider and subscription status with them. It is common for free tiers to be US-listings only.

You can find all data models and reference documentation at [docs.openbb.co/python](https://docs.openbb.co/python).

If the type of data you are looking for is not listed there, send us a [feature request](https://openbb.co/request-a-feature) telling us about your use case.

</details>

<details>
<summary mdxType="summary">The router appears to be missing functions.</summary>

The router populates itself from the installed extensions.

For example, if the Technical Analysis extension is not installed, the `obb.technical` router path will not be present.

The same applies to data extensions. If a provider module is not installed, it will not be displayed as a choice.

If you have just installed a new extension, the Python interface may need to be rebuilt. This can be triggered manually with:

```python
import openbb
openbb.build()
exit()
```

:::tip
Install all toolkits and data providers with:

```bash
pip install "openbb[all]"
```

or by cloning the GitHub repo, from the `/openbb_platform/` folder:

```bash
python dev_install.py -e
```

The nightly PyPI distribution is another way to install everything, and to be on the bleeding edge of development:

```bash
pip install openbb-nightly
```

:::

</details>

<details>
<summary mdxType="summary">Why is the returned data not matching the start/end date I requested?</summary>

The provider may not have data from the requested period, in which case the data will be what they return. For example, `provider='yfinance'` at one-minute intervals will not return beyond one week ago.

Another reason could be the data entitlements of your API key. Check the provider's website to know what data coverage to expect.

If there is technical problem with a provider or function, please check [GitHub](https://github.com/OpenBB-finance/OpenBB/issues/new/choose) and raise an issue if one does not already exist.

Or, send us an [email](mailto:support@openbb.co) with the details, your system configuration, the syntax used, and any error messages that are raised.

</details>

<details>
<summary mdxType="summary">How do I load a ticker symbol from India?</summary>

Ticker symbols listed on exchanges outside of the US will have a suffix attached, for example, Rico Auto Industries Limited:

```python
from openbb import obb
data = obb.equity.price.historical("ricoauto.ns", provider="fmp")
```

The precise naming convention will differ by source, it's best to reference each source's own documentation for conventions.

</details>

<details>
<summary mdxType="summary">How can I request a data provider or function?</summary>

Please [request a feature](https://openbb.co/request-a-feature), tell us about your use case.

</details>

<details>
<summary mdxType="summary">Can I contribute my own data provider extension?</summary>

Yes! Please take a look at our [Development](/python/developer) pages for more information.

</details>

<details>
<summary mdxType="summary">Can my company become a data partner?</summary>

Yes! Please visit our website [here](https://openbb.co/use-cases/data-vendors) and fill out the form.

</details>


<details>
<summary mdxType="summary">Endpoints that are displayed in this documentation are not found when I try to use them.</summary>

The [Reference](/python/reference) pages are created from the contents of our GitHub [repo](https://github.com/OpenBB-finance/OpenBB), and may not match your installation.

If a router/endpoint appears to be missing from your installation, it is quite likely that it is not installed. It may also be that the functions are served by provider extensions that require API keys. The function will not be added to the application unless a value has been supplied, or there is another provider which does not require authorization.

See the page [here](/python/extensions/providers) for a current list of data provider extensions.

</details>


---

---
title: Errors
sidebar_position: 3
description: This page contains some frequently asked questions about Open Data Platform errors.
keywords:
  - provider
  - data
  - source
  - error
  - OpenBBError
  - unknown error
  - EmptyDataError
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Errors FAQ - FAQs | OpenBB Docs" />

<details>
<summary mdxType="summary">[Arg] provider -> input: nasdaq -> Input should be 'fmp' or 'yfinance'</summary>

There could be a few reasons for this message.

1. The provider supplied is not installed, in which case install it and follow the next step.

2. The provider extension is installed, but the static assets have not been refreshed. Rebuild the static assets from the command line with:

```sh
python -c "import openbb;openbb.build()"
```

An environment variable to auto-build the static assets on import - if there are changes to the installed configuration - can be defined as:

```env
OPENBB_AUTO_BUILD="true"
```

The expected behaviour is for this to be "true" by default, however can be situations where the flag does not trigger a build.
Manually invoke the process from the command line if necessary.

3. Not every endpoint is supported by every provider. To see the coverage of commands and data providers within the current installation, use `reference` property in the app. The docstring for each function contains the same information as the code block below.

```python
from openbb import obb

path = "/index/available"

[d for d in obb.reference["paths"][path]["parameters"] if d != "standard"]
```

```sh
['cboe', 'fmp', 'tmx', 'yfinance']
```

Complete breakdowns of query and return fields by provider and endpoint are available at [docs.openbb.co/python](https://docs.openbb.co/python)

</details>

<details>
<summary mdxType="summary">Attribute Error: 'App' object has no attribute 'some attribute'</summary>

There could be a few reasons for this message that are similar to the issue above.

1. The extension is not installed.

- Install it and rebuild the static files (described in the item above.)

2. No installed provider extension services an endpoint within the router.

- Under these conditions, the router is excluded from the app factory.

3. The extension is installed, a provider does service the router, but the static assets have not been rebuilt.

- Rebuild the static files (described in the item above.)

</details>

<details>
<summary mdxType="summary">Unauthorized Error - HTTP Status Code 502</summary>

This error is raised when provider credentials are supplied but is invalid for the particular endpoint.

Verify your credentials, access level, and subscription status directly with the provider.

</details>

<details>
<summary mdxType="summary">Unprocessable Entity (OpenBBError) - HTTP Status Code 422</summary>

This error is raised for handled exceptions. An abbreviated traceback message will display, and the full message is enabled via debug mode.

A common reason for this error is because a required parameter was not supplied, or was an incorrect choice. It may also be raised during parsing and transformation, post-request.

</details>

<details>
<summary mdxType="summary">Empty Data Error - HTTP Status Code 204</summary>

Also a 204 status code from the API. It means that the data was returned empty but the operation was a success.

There might not be anything wrong, or it could be the result of parameter choices. In which case, widen the scope of the query to capture output.

Some sources will return bad requests with a 200 status code and no message.

If all parameter permutations are only capable of returning an empty response, please open a bug issue on [GitHub](https://github.com/OpenBB-finance/OpenBB/issues/new?assignees=&labels=type%3Abug&projects=&template=bug_report.md&title=%5BBug%5D) with the operating system and version, Python version, and the syntax responsible for the error.

</details>

<details>
<summary mdxType="summary">Unexpected Error - HTTP Status Code 500</summary>

An unhandled exception. Traceback messages are truncated unless the debug environment variable is set.

```python
import os

os.environ["OPENBB_DEBUG_MODE"] = "true"

from openbb import obb

# run the syntax that created the error and the full traceback will print to the console.
```

If the issue originates from OpenBB code, please open a bug issue on [GitHub](https://github.com/OpenBB-finance/OpenBB/issues/new?assignees=&labels=type%3Abug&projects=&template=bug_report.md&title=%5BBug%5D)

Be sure to include the contents of the traceback, the operating system and version, Python version, and the syntax responsible for the error.

</details>

<details>
<summary mdxType="summary">How do I start in debug mode?</summary>

Debug mode can be set as an environment variable, in `~/openbb_platform/.env`, as:

```env
OPENBB_DEBUG_MODE=true
```

It can be invoked for the current session only by adding this code before importing the OpenBB package.

```python
import os

os.environ["OPENBB_DEBUG_MODE"] = "true"

from openbb import obb
```

</details>


---

---
title: License
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Licensing FAQ | OpenBB Docs" />

As we adopt the Affero General Public License (AGPL) for Open Data Platform by OpenBB, we understand you may have questions about how this change affects your use of the platform. Below are some frequently asked questions to help clarify the implications of our new licensing model.

## General Questions

<details>
<summary mdxType="summary">Q: What has changed with the ODP license?</summary>

A: We have transitioned from the MIT license to the Affero General Public License (AGPL) with an option for a commercial license. This change aligns with our commitment to keeping ODP open and free while also providing options for commercial use.

</details>

<details>
<summary mdxType="summary">Q: Why did OpenBB choose AGPL?</summary>

A: AGPL helps ensure that improvements to the ODP remain freely available. This license is ideal for protecting the community's contributions while allowing the platform to evolve sustainably.

</details>

<details>
<summary mdxType="summary">Q: What does the change to AGPL mean for general users of OpenBB?</summary>

A: For most users, there will be no impact. You can continue to use ODP for research, development, and in your applications under the same conditions as before, provided you comply with the AGPL if you distribute the software or run it on a network server.

</details>

## Specific Use Cases

<details>
<summary mdxType="summary">Q: I'm using ODP for research at work. Do I need a commercial license now?</summary>

A: No, if you are using ODP in its unmodified form for research or internal business purposes and do not redistribute it or use it to provide a network-based service, you do not need a commercial license.

</details>

<details>
<summary mdxType="summary">Q: I am selling educational content and use ODP in my course notebooks. Do I need a commercial license? Do I need to make my course content public?</summary>

A: No, you do not need a commercial license simply for using ODP in educational content, nor do you need to make your course content public. If you are using ODP to fetch data or perform analysis in your teaching materials, this is considered normal use of the platform. Your educational content is a separate work and does not fall under the AGPL's requirements for derivative works.

</details>

<details>
<summary mdxType="summary">Q: I want to integrate a proprietary dataset for internal use through ODP. What does this mean for me?</summary>

A: You can freely integrate proprietary datasets without violating the AGPL, provided that any such integration uses standard interfaces of ODP and does not modify the core AGPL-licensed code.

</details>

<details>
<summary mdxType="summary">Q: I run a business that integrates proprietary datasets through ODP for internal use. What does the license change mean for us?</summary>

A: If you are integrating proprietary datasets and creating extensions that do not modify the ODP code, these extensions are considered separate works. You do not need to disclose these proprietary integrations under the AGPL, provided these do not form part of the ODP distributed to others or used to provide a network-based service.

</details>

## Modifications and Contributions

<details>
<summary mdxType="summary">Q: If I modify the ODP for personal or internal business use, do I need to disclose my modifications?</summary>

A: If you modify the ODP and do not distribute your modified version or use it to provide a service over a network, you do not need to disclose your modifications. However, if you distribute the modified platform or run it as a service, you must share your modifications under the AGPL.

</details>

<details>
<summary mdxType="summary">Q: We want to contribute to the OpenBB project. How does the licensing affect our contributions?</summary>

A: This doesn’t change. Contributions to the OpenBB project are very welcome. Contributions to the [main GitHub repository](https://github.com/OpenBB-finance/OpenBBTerminal) are accepted under our existing [Contributor License Agreement (CLA)](https://cla-assistant.io/OpenBB-finance/OpenBBTerminal). This means any contributions that are accepted into the main repository will be re-licensed by us under the AGPL, ensuring they remain free and open.

</details>

## Commercial Licensing Options

<details>
<summary mdxType="summary">Q: What are the benefits of obtaining a commercial license?</summary>

A: A commercial license is suitable for companies that wish to use Open Data Platform in a proprietary product or service, or who do not wish to disclose their modifications to the platform. It offers more flexibility for commercial use while protecting your proprietary developments.

</details>

<details>
<summary mdxType="summary">Q: How can I obtain a commercial license?</summary>

A: Please contact us directly at [licensing@openbb.co](mailto:licensing@openbb.co) to discuss commercial licensing options. We are here to help you find the best licensing solution for your specific needs.

</details>

## Conclusion

<details>
<summary mdxType="summary">Q: Where can I get more information or assistance regarding licensing?</summary>

A: For more detailed inquiries or specific scenarios not covered in this FAQ, please reach out to us at [licensing@openbb.co](mailto:licensing@openbb.co). We are here to help you navigate the licensing requirements to ensure you meet your needs.

</details>


---

---
title: Introduction
sidebar_position: 0
description:
  Introduction to the Open Data Platform Python packages; a convenient and powerful tool that
  provides pre-built data connectors and libraries to design and build financial reports
  and applications. Learn more about the open source ecosystem, packages, and how to contribute.
keywords:
  - ODP
  - Open Data Platform by OpenBB
  - OpenBB Platform
  - Python
  - pip install openbb
  - investment research infrastructure
  - data connectors
  - financial reports
  - OpenBB team
  - third-party data providers
  - CONTRIBUTING GUIDELINES
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="OpenBB Docs" />

The ODP Python Package serves as scaffolding for a unified API that is standardized, consumable, and deployable across multiple mediums simultaneously - REST API, pure Python, Jupyter Notebook, MCP, Docker, OpenBB Workspace, Excel, etc. - from a single source of truth.

With cross-compatibility out-of-the-box, its ready-to-use data connectors, and a wealth of extensions, it lets you concentrate on creating outstanding research reports and applications quickly and easily.

## Installation

:::info Packages are distributed via PyPI.
They can be installed in any Python environment with a version between 3.10 and 3.13.
```sh
pip install openbb
```
:::

Go to the [installation](/python/installation) page for detailed instructions, and see the [extensions](/python/extensions) page for information on individual components.

:::tip Looking for a graphical method, or having trouble with virtual environments?
Go to the [Open Data Platform](/desktop/installation) to get started.
:::

## Documentation Structure

The documentation will be generally targeted towards the user profile - user or developer

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="Installation"
    description="Instructions for installation."
    url="/python/installation"
  />
  <NewReferenceCard
    title="Quick Start Guides"
    description="Get started using the ODP Python Package."
    url="/python/quickstart"
  />
  <NewReferenceCard
    title="Settings"
    description="Configure your ODP environment."
    url="/python/settings"
  />
  <NewReferenceCard
    title="Developer Guides"
    description="Documentation, guides, and reference material for developers."
    url="python/developer"
  />
  <NewReferenceCard
    title="Command Reference"
    description="Provides detailed information about the command structure, parameters, outputs, examples, and more for the endpoints of ODP Python packages."
    url="/python/reference"
  />
  <NewReferenceCard
    title="Data Model Reference"
    description="Provides detailed information about the standard data models used in the Open Data Platform by OpenBB."
    url="/python/data_models"
  />
  <NewReferenceCard
    title="FAQs"
    description="Provides answers to frequently asked questions."
    url="/python/faqs/errors"
  />
  <NewReferenceCard
    title="Licensing"
    description="Provides information about the licensing of the Open Data Platform by OpenBB."
    url="/python/faqs/license"
  />
</ul>

## User, Developer, or Contributor?

The line between user and developer can be blurry, and is often the same individual.

For the purpose of this documentation, a User represents a person, organization, robot,
or other type of end-user consuming the interface(s) as-supplied.

A contributor is someone submitting a pull request to the OpenBB GitHub repository.

Most other use-cases fall somewhere on the development spectrum.

### Example Users

- Consuming data or services from published packages via a supported interface.
  - `pip install openbb`
- General use of `from openbb import obb`, `openbb-api`, `openbb-mcp`, etc.
  - This could be for local development or remote deployment.

### Example Developer

- Creating OpenBB extensions or Workspace applications.
- Importing individual components or utility functions.
- Preparing an OpenBB environment, container, or application for non-personal use.

## Developer Docs

The [developer](/python/developer) pages provide an orientation to the codebase, as well as technical details and snippets for working with it.


---

---
title: Installation
sidebar_position: 1
description:
  This page presents the general system requirements, supported environments,
  installation procedures, and setup for running the Open Data Platform - by OpenBB.
keywords:
  - ODP
  - Open Data Platform
  - Python
  - System requirements
  - Installation
  - Docker
  - virtual environment
  - source
  - Windows
  - macOS
  - Linux
  - pip
  - VS Code
  - PyCharm
  - Jupyter
  - GitHub
  - Conda
  - venv
  - API
  - Repository
  - Poetry
  - PyPI
  - Node.js
  - npm
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Installation | OpenBB Docs" />

Most systems capable of running Python `3.10-3.13` will be compatible.

### System Requirements

A modern processor (five years or less), running an up-to-date operating system, with at least 8GB of RAM, is recommended. Maintaining the system with current patches ensures maximum compatibility. At a minimum, Windows and macOS should be:

- Windows 11
- Mac OS Big Sur

Linux users should run the command line update for the package manager, prior to installation.

### Install via ODP Desktop

For a graphical installer, see the [ODP](/desktop/installation) desktop application.

### Setup Environment

:::tip
If you are having trouble with virtual environments or package installation, use the ODP [Desktop Application](/desktop/installation) instead.
:::

The method for creating the environment will be a matter of user preference, from the command line - [Conda](https://docs.conda.io/projects/miniconda/en/latest/miniconda-install.html), [venv](https://docs.python.org/3/library/venv.html), etc. - or in a code editor and IDE - [VS Code](https://code.visualstudio.com/docs/languages/python), [PyCharm](https://www.jetbrains.com/pycharm/), [Jupyter](https://jupyter.org/).

If you're interested in building a [Docker](/python/installation#docker) container, skip ahead to the specific section [below](/python/installation#docker).

For those new to Python, [this article](https://www.infoworld.com/article/3306656/python-virtualenv-and-venv-dos-and-donts.html) shares some tips on getting started and why environments are important.

See [this guide](https://code.visualstudio.com/docs/python/environments) for creating a Python environment in VS Code.

Before installation, update the package manager so that `pip` is current, then create the environment with the desired version of Python.

:::warning
Installing packages directly to the system Python or `base` environment is not recommended. Create a new environment first.
:::

## Install

With the environment created, and activated, begin the installation process.

### PyPI

```console
pip install openbb
```



### Docker

<details>
<summary mdxType="summary">We provide a `platformAPI.Dockerfile` on [GitHub](https://raw.githubusercontent.com/OpenBB-finance/OpenBB/refs/heads/develop/build/docker/platformAPI.Dockerfile)</summary>

Run the following command from the repo root to build the image:

```bash
docker build -f build/docker/platformAPI.Dockerfile -t openbb-platform:latest .
```

To run it:

```bash
docker run -it --rm -p 6900:6900 -v ~/.openbb_platform:/root/.openbb_platform openbb-platform:latest
```

This will mount the local `~/.openbb_platform` directory into the Docker container to use and exposes the API on port `6900`.

</details>

### Source

To install from source, create a Python virtual environment and update `pip` and `setuptools`, within the newly created environment, **before** installing any packages.

<details>
To build the ODP Python packages from the source code, first install `git`:

```console
pip install git
```

Next, clone the repository from GitHub:

```console
git clone git@github.com:OpenBB-finance/OpenBB.git
```

When it is done, checkout the branch where the code is living:

```console
git checkout develop
```

Then, `cd` into the directory:

```console
cd openbb_platform
```

Install required packages

```console
pip install poetry
```

Finally, run the developer installation script:

```console
python dev_install.py
```

:::note
To install all extensions and providers, run: `python dev_install.py -e`
:::

</details>

## Post-Installation

When using the Python Interface, the static assets will need to be generated. This happens on first import but, when installing inside a container or CI, invoke the build command immediately after installation.

```console
openbb-build
```

### Getting Started

See the [quickstart](/python/quickstart) guide for getting started with the ODP Python Package.


---

---
title: Quick Start
sidebar_position: 1
description: Get started with the OpenBB Platform by following this quickstart guide for the Python interface.
keywords:
- ODP
- Python Package
- OpenBB Platform
- investment research infrastructure
- data connectors
- financial reports
- OpenBB team
- quickstart
- getting started
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Python Interface - Quick Start | OpenBB Docs" />

## Import

To get started with the ODP Python Package, import it with:

```python
from openbb import obb
```

Show the contents of any given path with:

```python
>>>obb.equity
/equity
    /calendar
    /compare
    /darkpool
    /discovery
    /estimates
    /fundamental
    historical_market_cap
    market_snapshots
    /ownership
    /price
    profile
    screener
    search
    /shorts
```

Each endpoint might have multiple data providers servicing it, and parameter choices may vary.
Consult the docstring for details specific to your combination of installed extensions and available providers.

```python
# Docstring snippet from `obb.equity.price.historical`
interval : str
    Time interval of the data to return. (provider: alpha_vantage, cboe, fmp, intrinio, polygon, tiingo, tmx, tradier, yfinance)
    Choices for alpha_vantage: '1m', '5m', '15m', '30m', '60m', '1d', '1W', '1M'
    Choices for cboe: '1m', '1d'
    Choices for fmp: '1m', '5m', '15m', '30m', '1h', '4h', '1d'
    Choices for intrinio: '1m', '5m', '10m', '15m', '30m', '60m', '1h', '1d', '1W', '1M', '1Q', '1Y'
    Choices for tradier: '1m', '5m', '15m', '1d', '1W', '1M'
    Choices for yfinance: '1m', '2m', '5m', '15m', '30m', '60m', '90m', '1h', '1d', '5d', '1W', '1M', '1Q'
```

## Query

When the `provider` parameter is not supplied (default), it will pick the first available in alphabetical order.

If a provider requires an API key for this endpoint, and has not been added to the [settings](/python/settings/user_settings/api_keys), it will skip and try the next.

```python
# Get the price of a stock 
>>> quote_data = obb.equity.price.quote(symbol="AAPL", provider="yfinance")
>>> quote_data

OBBject

id: 06649f4e-896c-7b31-8000-52242b1605f2
results: [{'symbol': 'AAPL', 'asset_type': 'EQUITY', 'name': 'Apple Inc.', 'exchang...
provider: yfinance
warnings: None
chart: None
extra: {'metadata': {'arguments': {'provider_choices': {'provider': 'yfinance'}, 's...
```

To output as a DataFrame, use the `to_df()` method.

```python
>>> quote_data.to_df().T

symbol                    AAPL
asset_type              EQUITY
name                Apple Inc.
exchange                   NMS
bid                      232.3
bid_size                     1
ask                     257.91
ask_size                     1
last_price              245.27
open                    255.04
high                    256.38
low                     244.57
volume                61999098
prev_close              254.04
year_high                260.1
year_low                169.21
ma_50d                237.0188
ma_200d              222.25485
volume_average      54836700.0
volume_average_10d  43155290.0
currency                   USD
```

### Historical Stock Prices

Time series data will always have `start_date` and `end_date` parameters.
The default date range will vary by function, in this example it is one year. 

```python
>>> output = obb.equity.price.historical(symbol="AAPL", provider="yfinance").to_df()
>>> df = output.to_df()
>>> df

                  open        high         low       close    volume  dividend
date                                                                          
2024-10-14  228.699997  231.729996  228.600006  231.300003  39882100       0.0
2024-10-15  233.610001  237.490005  232.369995  233.850006  64751400       0.0
2024-10-16  231.600006  232.119995  229.839996  231.779999  34082200       0.0
2024-10-17  233.429993  233.850006  230.520004  232.149994  32993800       0.0
2024-10-18  236.179993  236.179993  234.009995  235.000000  46431500       0.0
...                ...         ...         ...         ...       ...       ...
2025-10-06  257.989990  259.070007  255.050003  256.690002  44664100       0.0
2025-10-07  256.809998  257.399994  255.429993  256.480011  31955800       0.0
2025-10-08  256.519989  258.519989  256.109985  258.059998  36496900       0.0
2025-10-09  257.809998  258.000000  253.139999  254.039993  38322000       0.0
2025-10-10  254.940002  256.380005  244.000000  245.270004  61782400       0.0

[249 rows x 6 columns]
```

### Technical Analysis

Use the output to feed the input of data processing functions.

```python
>>> ta = obb.technical.donchian(data=output.results).to_df().dropna(how="any")
>>> ta

                  open        high         low       close    volume  dividend   DCL_20_20   DCM_20_20   DCU_20_20
date                                                                                                              
2024-11-08  227.169998  228.660004  226.410004  226.960007  38328800      0.25  219.710007  228.600006  237.490005
2024-11-11  225.000000  225.699997  221.500000  224.229996  42005600      0.00  219.710007  228.600006  237.490005
2024-11-12  224.550003  225.589996  223.360001  224.229996  40398300      0.00  219.710007  228.280006  236.850006
2024-11-13  224.009995  226.649994  222.759995  225.119995  48566200      0.00  219.710007  228.280006  236.850006
2024-11-14  225.020004  228.869995  225.000000  228.220001  44923900      0.00  219.710007  228.280006  236.850006
...                ...         ...         ...         ...       ...       ...         ...         ...         ...
2025-10-06  257.989990  259.070007  255.050003  256.690002  44664100      0.00  225.949997  242.594994  259.239990
2025-10-07  256.809998  257.399994  255.429993  256.480011  31955800      0.00  225.949997  242.594994  259.239990
2025-10-08  256.519989  258.519989  256.109985  258.059998  36496900      0.00  226.649994  242.944992  259.239990
2025-10-09  257.809998  258.000000  253.139999  254.039993  38322000      0.00  229.020004  244.129997  259.239990
2025-10-10  254.940002  256.380005  244.000000  245.270004  61782400      0.00  235.029999  247.134995  259.239990

[230 rows x 9 columns]
```

## Reference

All function metadata is available directly as a JSON dictionary.

```python
>>> obb.reference.keys()

dict_keys(['openbb', 'info', 'paths', 'routers'])
```

<details>
<summary mdxType="summary">Example JSON Content</summary>

```json
{
    "deprecated": {
        "flag": null,
        "message": null
    },
    "description": "Get summary, status, and other metadata for a specific bill.\n\nEnter the URL of the bill as: https://api.congress.gov/v3/bill/119/hr/131?\n\nURLs for bills can be found from the `uscongress.bills` endpoint.\n\nThe raw JSON response from the API will be returned along with a formatted\ntext version of the key information from the raw response.\n\nIn OpenBB Workspace, this command returns as a Markdown widget.",
    "examples": "\nExamples\n--------\n\n```python\nfrom openbb import obb\nobb.uscongress.bill_info(provider='congress_gov', bill_url=https://api.congress.gov/v3/bill/119/s/1947?)\n# The bill URL can be shortened to just the bill number (e.g., '119/s/1947').\nobb.uscongress.bill_info(bill_url=119/s/1947, provider='congress_gov')\n```\n\n",
    "parameters": {
        "standard": [],
        "congress_gov": [
            {
                "name": "bill_url",
                "type": "str",
                "description": "Enter a base URL of a bill (e.g., 'https://api.congress.gov/v3/bill/119/s/1947?format=json'). Alternatively, you can enter a bill number (e.g., '119/s/1947').",
                "default": "",
                "optional": false,
                "choices": null
            }
        ]
    },
    "returns": {
        "OBBject": [
            {
                "name": "results",
                "type": "list[CongressBillInfo]",
                "description": "Serializable results."
            },
            {
                "name": "provider",
                "type": "Optional[Literal['congress_gov']]",
                "description": "Provider name."
            },
            {
                "name": "warnings",
                "type": "Optional[list[Warning_]]",
                "description": "list of warnings."
            },
            {
                "name": "chart",
                "type": "Optional[Chart]",
                "description": "Chart object."
            },
            {
                "name": "extra",
                "type": "dict[str, Any]",
                "description": "Extra info."
            }
        ]
    },
    "data": {
        "standard": [],
        "congress_gov": [
            {
                "name": "markdown_content",
                "type": "str",
                "description": "Aggregated metadata for the bill in Markdown format.",
                "default": "",
                "optional": false,
                "choices": null
            },
            {
                "name": "raw_data",
                "type": "dict[str, Any]",
                "description": "Raw JSON data from the collected bill information.",
                "default": "",
                "optional": false,
                "choices": null
            }
        ]
    },
    "model": "CongressBillInfo",
    "openapi_extra": {
        "model": "CongressBillInfo"
    }
}
```
</details>

## Next Steps

Go to the [Workspace](/python/quickstart/workspace) page to get started using ODP as an OpenBB Workspace Backend.


---

---
title: MCP Server
sidebar_position: 3
description: This page details the basics for getting started running the ODP Python Package as a MCP server.
keywords:
  - ODP
  - Python Package
  - tutorial
  - MCP
  - quickstart
  - mcp_settings.json
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="MCP Server - Quick Start | OpenBB Docs" />

Install the package to get started using the ODP Python Package as a MCP server.

```sh
pip install openbb-mcp-server
```

## Start Server

The server is started using the command line executable:

```sh
openbb-mcp
```

This starts the server on http://127.0.0.1:8001 over the `streamable-http` transport and exposes all GET endpoints as MCP tools.

## Add to Workspace

Follow the steps [here](/workspace/analysts/ai-features/mcp-tools) to connect the server with Workspace.

![workspace-mcp](https://openbb-cms.directus.app/assets/6d66dcf3-98c0-4150-aace-035a063df35a.png)

## Documentation

Go to the [documentation](/python/extensions/interface/openbb-mcp) for detailed information on configuration, development, and usage.


---

---
title: REST API
sidebar_position: 2
description: This page details the basics for getting started using the OpenBB Python Package as a REST API.
keywords:
  - tutorial
  - quickstart
  - API
  - REST
  - Uvicorn
  - FastAPI
  - Basic Auth
  - Base64
  - CORS
  - system_settings.json
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="REST API - Quick Start | OpenBB Docs" />

The configurable REST API is generated by FastAPI. To start it, activate the Python environment, then run the following command:

```console
uvicorn openbb_core.api.rest_api:app
```

:::info
This starts a server on `http://127.0.0.1:8000`

See [System Settings](/python/settings/system_settings) for API configuration and runtime settings.
:::

## Running in a Container

Use `0.0.0.0` as the host for containerized, or network, deployments.

```console
uvicorn openbb_core.api.rest_api:app --host 0.0.0.0 --port 8000
```

To learn more about how you can run the API in different scenarios refer to [uvicorn's documentation](https://www.uvicorn.org/#command-line-options)

## API Documentation

The default settings provide two flavors of interactive API documentation.

- Swagger: `http://127.0.0.1:8000/docs`
- Redoc: `http://127.0.0.1:8000/redoc`

Both provide detailed descriptions and functions can be executed directly from the page.

Please note that some descriptions and parameter dropdown choices may appear incomplete or linked to the wrong provider. These visual inconsistencies may differ between Redoc and Swagger but do not impact the normal operation or expected behaviour of the API.

## API Authorization

By default, no authorization is required. Data provider credentials must be configured in [`user_settings.json`](/python/settings/user_settings/api_keys)

:::warning
Production environments should utilize access controls and HTTPS encryption.
:::

Basic authorization can be enabled with [environment variables](/python/settings/environment_variables).

```.env
OPENBB_API_AUTH="True"
OPENBB_API_USERNAME="my_email"
OPENBB_API_PASSWORD="my_password"
```

The application will expect a header that contains authorization in the form of `Basic <username:password>`, where "username:password" is a Base64-encoded string.

Pass in the "Authorization" headers of every request to the API.

Here is Python example calling the API where Basic Authorization has been enabled.

```python
import base64
import requests

msg = "some_user:some_pass"
msg_bytes = msg.encode('ascii')
base64_bytes = base64.b64encode(msg_bytes)
base64_msg = base64_bytes.decode('ascii')

symbol="SPY"
url = f"http://127.0.0.1:8000/api/v1/equity/price/quote?provider=fmp&symbol={symbol}"
headers = {"accept": "application/json", "Authorization": f"Basic {base64_msg}"}

response = requests.get(url=url, headers=headers)

response.json()
```

## CORS Configuration

CORS defines the rules for which external domains are allowed to access your API.

:::danger
The default settings are permissive (["*"]), and are suitable for development.

When deploying to the public internet, specify exact domains, methods, and headers to enforce security.

Always run deployed servers over HTTPS.
:::

## HTTPS

Running localhost over HTTPS can appear to be trickier than it needs to be.
The simplest method is to generate a self-signed certificate using the [OPD Desktop](/desktop/backends#self-signed-certificate) feature.

Then use Uvicorn runtime arguments, or environment variables, pointing to the file locations.

```
UVICORN_SSL_CERTFILE = "/pathto/public_folder/certificate.pem"
UVICORN_SSL_KEYFILE = "/pathto/private_folder/private.key"
```

## OpenBB API

`openbb-api` is a command line executable that imports the `app` instance and extends it by building and serving configuration files for OpenBB Workspace, converting API endpoints into interactive widgets.

Go to the extension's [documentation](/python/extensions/interface/openbb-api) for launch arguments and usage examples.


---

---
title: Workspace Integration
sidebar_position: 4
description: Get started using the Open Data Platform as a custom Workspace backend. Create visualizations, dashboards, and generate AI insights by connecting your ODP Python Packages directly to the Workspace UI.
keywords:
- OpenBB Platform
- ODP
- investment research infrastructure
- data connectors
- financial reports
- OpenBB team
- quickstart
- getting started
- Workspace
- custom backend
- backend
- FastAPI
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="Quickstart - Workspace Custom Backend | OpenBB Docs" />

The OPD Python Package can be used as a [Workspace custom backend](/workspace/developers/data-integration), both as a fully-loaded data source, or as the bare shell and launcher of a FastAPI application.

## OpenBB API

`openbb-api` is a command line executable, similar to `uvicorn`, for starting a FastAPI app instance, generating and serving configuration files OpenBB Workspace requires.

It can be installed as standalone with:

```sh
pip install openbb-platform-api
```

See the documentation [here](/python/extensions/interface/openbb-api) for a detailed description of parameters and example snippets.

The sections below will outline a few scenarios.

## Launch

To include the installed extensions and endpoints as widgets in the custom backend connector:

:::info
Open a terminal, activate the environment where `openbb` was installed, then enter:

```sh
openbb-api
```
:::

By default, this starts the server over http://127.0.0.1:6900.

- Next, open your browser and login to [pro.openbb.co](https://pro.openbb.co).

- From the sidebar, click "Data Connectors".

- Then, click the "Add Data" button.

![Add Data](https://github.com/user-attachments/assets/770e6d6c-6cd7-4073-a874-af0850f404cc)

- Enter a name for the connection, and use the server address displayed in the console.

- Then, click the "Test" button.

:::tip
If a connection error displays after pressing the "Test" button, your browser might be blocking access because of "mixed content". Browsers such as Safari, and Brave, do not permit HTTP connections.

Try using Chrome, specifically, or start the server over HTTPS.

See the [Desktop App](/desktop/backends#self-signed-certificate) to get started.
:::

- Finally, click the "Add" button.

All data endpoints are now configured to use and are available to the Search.

## Launch Custom Platform App

Let's say, you want to create a custom backend that presents data differently, and you don't want any of the built-in widgets to populate. You want complete control over the generated view.

In this scenario, use the `--app` argument to point to a new instance of FastAPI. Widgets will now only populate from this instance, and not the OpenBB environment.

```python
from fastapi import FastAPI
from openbb import obb

app = FastAPI()


@app.get("/company_description")
async def company_description(symbol: str = "AAPL") -> str:
    """Reference data for the given company using yFinance."""
    response = obb.equity.profile(symbol, provider="yfinance")

    description = response.results[0].long_description

    md = f"""

# **{response.results[0].name}**
## **{response.results[0].sector}**
### **{response.results[0].industry_category}**

<details>
<summary mdxType="summary">Company Description</summary>
{description}
</details>

{response.results[0].company_url}
"""
    return md
```

Launch the backend by including the path to the Python file as the `--app` argument.

```sh
openbb-api --app /Users/path/to/some/folder/some_file.py --reload
```

<img width="514" alt="Screenshot 2025-02-06 at 1 40 43 PM" src="https://github.com/user-attachments/assets/150b214e-468e-45bf-b28e-6fb1e1a7a5c2" />

## Launch Any FastAPI App

For this, the only requirements are:

- Python version between 3.9 and 3.12, inclusively.
- `openbb-platform-api` package, installable from PyPI.

Add the path to the Python file with the FastAPI instance to launch.

```sh
openbb-api --app /Users/path/to/some/folder/some_file.py
```

:::important
At this time, only "GET" methods are supported by custom backends.
:::


```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/hello")
async def hello() -> str:
    """Widget Description Generated By Docstring"""
    return "Hello, from OpenBB!"
```

Function arguments will populate as widget parameters.

### Parameters With Dropdown

Literal types of function parameters will automatically be recognized as choices in a dropdown menu.

```python
from typing import Literal, Optional

app = FastAPI()

@app.get("/hello")
async def hello(param1: Optional[str] = None, param2: Literal["Choice 1", "Choice 2"] = None, param3: bool = False) -> str:
    """Widget Description Generated By Docstring"""
    if not param1 and not param2 and not param3:
        return "Enter a parameter or make a choice!"
    if param3:
        return f"Param3 enabled!"
    if param2:
        return f"You selected: {param2}"
    if param1:
        return f"You entered: {param1}"

    return "Nothing to return!"
```

### Table Widget

Create a table widget by returning data shaped as a list of dictionaries (records)

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/hello")
async def hello() -> list:
    """Widget Description Generated By Docstring"""
    return [{"Column 1": "Hello", "Column 2": "from OpenBB!"}]
```

### Annotated Functions

Annotated parameters and responses will create column definitions and hover descriptions.

For data responses, return a list of Pydantic models to get the most bang-for-the-buck.


```python
from typing import Annotated
from fastapi import FastAPI, Query
from openbb_core.provider.abstract.data import Data  # Inherit this instead of pydantic.BaseModel to represent 1 row of data.
from pydantic import Field

app = FastAPI()

class MyData(Data):
    """MyData Response Model."""
    column_1: str = Field(title="Some Text", description="Hover text for Column 1")
    column_2: int = Field(title="Some Number", description="Hover text for Column 2")
    column_3: float = Field(
        title="Some Percent",
        description="Hover text for Column 3",
        json_schema_extra={"x-unit_measurement": "percent"},
    )
    column_4: float = Field(
        title="Some Normalized Percent",
        description="Hover text for Column 4",
        json_schema_extra={"x-unit_measurement": "percent", "x-frontend_multiply": 100},
    )


@app.get("/table")
async def table(
    param1: Annotated[str, Query(description="Hover text for param1")] = None,
    param2: Annotated[int, Query(description="Some Number")] = None,
    date: Annotated[str, Query(description="Date selector")] = None,
) -> list[MyData]:
    """Widget Description Generated By Docstring"""
    return [
        MyData.model_validate(
            {
                "column_1": "Hello",
                "column_2": 10,
                "column_3": 33.345,
                "column_4": -0.33345,
            }
        ),
    ]
```

<img width="836" alt="Screenshot 2025-02-06 at 8 00 30 PM" src="https://github.com/user-attachments/assets/78ab6191-50c6-4b76-a6ca-ea23575c6619" />


---

# Reference

import ReferenceCard from '@site/src/components/General/NewReferenceCard';

<ul className="grid grid-cols-1 gap-4 -ml-6">
<ReferenceCard
    title="Commodity"
    description="short_term_energy_outlook, petroleum_status_report, spot"
    url="/python/reference/commodity"
/>
<ReferenceCard
    title="Crypto"
    description="search, historical"
    url="/python/reference/crypto"
/>
<ReferenceCard
    title="Currency"
    description="search, reference_rates, snapshots, historical"
    url="/python/reference/currency"
/>
<ReferenceCard
    title="Derivatives"
    description="unusual, surface, chains, snapshots, instruments, curve, info, historical"
    url="/python/reference/derivatives"
/>
<ReferenceCard
    title="Econometrics"
    description="autocorrelation, panel_fixed, unit_root, cointegration, panel_pooled, panel_between, residual_autocorrelation, panel_random_effects,..."
    url="/python/reference/econometrics"
/>
<ReferenceCard
    title="Economy"
    description="fomc_documents, pce, available_indicators, retail_prices, calendar, fred_series, share_price_index, primary_dealer_positioning,..."
    url="/python/reference/economy"
/>
<ReferenceCard
    title="Equity"
    description="search, historical_market_cap, market_snapshots, screener, profile, dividend, splits, ipo,..."
    url="/python/reference/equity"
/>
<ReferenceCard
    title="Etf"
    description="search, holdings, info, sectors, nport_disclosure, countries, price_performance, historical,..."
    url="/python/reference/etf"
/>
<ReferenceCard
    title="Famafrench"
    description="country_portfolio_returns, breakpoints, international_index_returns, us_portfolio_returns, factors, regional_portfolio_returns"
    url="/python/reference/famafrench"
/>
<ReferenceCard
    title="Fixedincome"
    description="bond_indices, mortgage_indices, bond_prices, spot_rates, commercial_paper, hqm, estr, dpcredit,..."
    url="/python/reference/fixedincome"
/>
<ReferenceCard
    title="Index"
    description="search, available, constituents, sectors, sp500_multiples, snapshots, historical"
    url="/python/reference/index"
/>
<ReferenceCard
    title="News"
    description="company, world"
    url="/python/reference/news"
/>
<ReferenceCard
    title="Quantitative"
    description="normality, summary, capm, unitroot_test, kurtosis, mean, skew, quantile,..."
    url="/python/reference/quantitative"
/>
<ReferenceCard
    title="Regulators"
    description="schema_files, sic_search, symbol_map, htm_file, institutions_search, cik_map, rss_litigation, filing_headers,..."
    url="/python/reference/regulators"
/>
<ReferenceCard
    title="Technical"
    description="sma, demark, stoch, obv, ichimoku, ad, bbands, rsi,..."
    url="/python/reference/technical"
/>
<ReferenceCard
    title="Uscongress"
    description="bills, bill_text_urls, bill_info"
    url="/python/reference/uscongress"
/>
</ul>


---

---
title: Environment Variables
sidebar_position: 4
description: This section details configuring the ODP settings and environment variables.
keywords:
  - ODP
  - Open Data Platform by OpenBB
  - OpenBB Platform
  - Python client
  - getting started
  - local environment
  - environment variables
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Environment Variables - ODP Python | OpenBB Docs" />

Environment variables are defined in a `.env` file. If this file does not exist, create it inside the same folder `user_settings.json` is located.

- `OPENBB_DEBUG_MODE`: enables verbosity while running the program
- `OPENBB_DEV_MODE`: applicable to the API; exposes, /system and /user, paths.
- `OPENBB_AUTO_BUILD`: enables automatic SDK package build on import
- `OPENBB_API_AUTH_EXTENSION`: specifies which API authentication extension to use
- `OPENBB_API_AUTH`: enables API authentication for command endpoints
- `OPENBB_API_USERNAME`: sets API username
- `OPENBB_API_PASSWORD`: sets API password

Variables can be defined for current session only.

```python
import os
os.environ["OPENBB_DEBUG_MODE"] = "True"
from openbb import obb
```

### Proxy Networks

:::info
See [System Settings](/python/settings/system_settings#http) for information on configuring global settings and the session object.
:::

## API Keys

In addition to `user_settings.json`, API keys can be defined as environment variables (openbb-core V1.4.8).

For example, to define `fmp_api_key` as an environment variable, add the following to the `~/.openbb_platform/.env` file.
If it doesn't exist, create it.

```env
FMP_API_KEY = "replaceWITHyourK3Y"
```

Along with the installed providers' credentials, if an entry in the `.env` file ends with `_API_KEY`, it will be accessible as, `obb.user.credentials.some_key`


---

---
title: Settings
sidebar_position: 0
description:
  This section details the various user and system settings and preferences for the ODP Python Package.
keywords:
  - OpenBB Platform
  - ODP
  - Python
  - API
  - user settings
  - system settings
  - settings
  - user_settings.json
  - system_settings.json
  - environment variables
  - .env
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="Settings - ODP Python | OpenBB Docs" />

ODP Python Package settings are `JSON` and `.env` files,
all located in the `~/.openbb_platform` folder,
at the root of the operating system's user account home.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="User Settings"
    description="Preferences, credentials, and defaults are located in `user_settings.json`."
    url="/python/settings/user_settings"
  />
  <NewReferenceCard
    title="System Settings"
    description="FastAPI, Python, HTTP, Uvicorn, and logging settings are defined in `system_settings.json`."
    url="/python/settings/system_settings"
  />
  <NewReferenceCard
    title="MCP Settings"
    description="MCP server settings and configurations are set in `mcp_settings.json`."
    url="/python/settings/mcp_settings"
  />
  <NewReferenceCard
    title="Environment Variables"
    description="Store environment variables in a `.env` file."
    url="/python/settings/environment_variables"
  />
</ul>


---

---
title: MCP Settings
sidebar_position: 3
description: This section details configuring the ODP settings and environment variables.
keywords:
  - ODP
  - system_settings.json
  - OpenBB Platform
  - Python client
  - getting started
  - OpenBB Hub
  - local environment
  - environment variables
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="MCP Settings - ODP Python | OpenBB Docs" />

Configurations on this page assume that [`openbb-mcp`](/python/extensions/interface/openbb-mcp) is installed.

All settings can be configured via the `mcp_settings.json` file or as environment variables.

| Setting | Environment Variable | Type | Default | Description |
|---|---|---|---|---|
| `api_prefix` | `OPENBB_MCP_API_PREFIX` | string | `None` | Overrides the API prefix from SystemService. |
| `name` | `OPENBB_MCP_NAME` | string | `"OpenBB MCP"` | Server name. |
| `description` | `OPENBB_MCP_DESCRIPTION` | string | | Server description. |
| `version` | `OPENBB_MCP_VERSION` | string | `None` | Server version. |
| `default_tool_categories` | `OPENBB_MCP_DEFAULT_TOOL_CATEGORIES` | list[string] | `["all"]` | Default active tool categories on startup. |
| `allowed_tool_categories` | `OPENBB_MCP_ALLOWED_TOOL_CATEGORIES` | list[string] | `None` | Restricts available tool categories to this list. |
| `enable_tool_discovery` | `OPENBB_MCP_ENABLE_TOOL_DISCOVERY` | boolean | `True` | Enable tool discovery. |
| `describe_responses` | `OPENBB_MCP_DESCRIBE_RESPONSES` | boolean | `False` | Include response types in tool descriptions. |
| `system_prompt_file` | `OPENBB_MCP_SYSTEM_PROMPT_FILE` | string | `None` | Path to a text file for the system prompt. |
| `server_prompts_file` | `OPENBB_MCP_SERVER_PROMPTS_FILE` | string | `None` | Path to a JSON file with a list of server prompt definitions. |
| `cache_expiration_seconds` | `OPENBB_MCP_CACHE_EXPIRATION_SECONDS` | float | `None` | Cache expiration time in seconds. `0` to disable. |
| `on_duplicate_tools` | `OPENBB_MCP_ON_DUPLICATE_TOOLS` | string | `None` | Behavior for duplicate tools (`warn`, `error`, `replace`, `ignore`). |
| `on_duplicate_resources` | `OPENBB_MCP_ON_DUPLICATE_RESOURCES` | string | `None` | Behavior for duplicate resources. |
| `on_duplicate_prompts` | `OPENBB_MCP_ON_DUPLICATE_PROMPTS` | string | `None` | Behavior for duplicate prompts. |
| `resource_prefix_format` | `OPENBB_MCP_RESOURCE_PREFIX_FORMAT` | string | `None` | Format for resource URI prefixes (`protocol` or `path`). |
| `mask_error_details` | `OPENBB_MCP_MASK_ERROR_DETAILS` | boolean | `None` | Mask error details from user functions. |
| `dependencies` | `OPENBB_MCP_DEPENDENCIES` | list[string] | `None` | List of dependencies to install. |
| `include_tags` | `OPENBB_MCP_INCLUDE_TAGS` | set[string] | `None` | Only expose components with these tags. |
| `exclude_tags` | `OPENBB_MCP_EXCLUDE_TAGS` | set[string] | `None` | Exclude components with these tags. |
| `module_exclusion_map` | `OPENBB_MCP_MODULE_EXCLUSION_MAP` | dict[str, str] | `None` | Map API tags to Python module names for exclusion. |
| `uvicorn_config` | `OPENBB_MCP_UVICORN_CONFIG` | dict | `{"host": "127.0.0.1", "port": "8001"}` | Configuration for the Uvicorn server. |
| `httpx_client_kwargs` | `OPENBB_MCP_HTTPX_CLIENT_KWARGS` | dict | `{}` | Configuration for the async httpx client. |
| `client_auth` | `OPENBB_MCP_CLIENT_AUTH` | tuple[string, string] | `None` | `(username, password)` for client-side basic authentication (passed-through to HTTPX). |
| `server_auth` | `OPENBB_MCP_SERVER_AUTH` | tuple[string, string] | `None` | `(username, password)` for server-side basic authentication. |

:::note
Runtime argument keys, in general, "-" and "_" are interchangeable.
Nested uvicorn arguments should use `_`.
:::


---

---
title: System Settings
sidebar_position: 2
description: This section details configuring the ODP settings and environment variables.
keywords:
  - ODP
  - system_settings.json
  - OpenBB Platform
  - Python client
  - getting started
  - OpenBB Hub
  - local environment
  - environment variables
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="System Settings - ODP Python | OpenBB Docs" />

An additional configuration file, `system_settings.json`, is located in the same folder as `user_settings.json`, and can be created manually if it does not exist. The items below can be configured via this file, as a JSON dictionary.

## Logging Service

A logging service can be enabled (default is off) in `system_settings.json`.

When active, it logs commands executed, with their parameters, and any errors to a file.
The files will be stored in the `OpenBBUserData\logs` folder, with each session assigned a UUID and logged in a separate file.

Add this entry to `system_settings.json`:

```json
{
    "logging_suppress": false,
}
```

With the configuration set, the logger can be retrieved by name in the code.

```python
logger = logging.getLogger("openbb.logging_service")
```

## API Settings

The, `"api_settings"`, key is a nested dictionary, and is passed to the instance of FastAPI.

```json
{
    "api_settings": {
        "version": "1",
        "title": "OpenBB Platform API",
        "description": "This is the OpenBB Platform API.",
        "terms_of_service": "http://example.com/terms/",
        "contact_name": "OpenBB Team",
        "contact_url": "https://openbb.co",
        "contact_email": "hello@openbb.co",
        "license_name": "AGPLv3",
        "license_url": "https://github.com/OpenBB-finance/OpenBB/blob/develop/LICENSE",
        "servers": [
            {
                "url": "",
                "description": "Local OpenBB development server"
            }
        ],
        "cors": {
            "allow_origins": [
                "*"
            ],
            "allow_methods": [
                "*"
            ],
            "allow_headers": [
                "*"
            ]
        },
        "prefix": "/api/v1"
    }
}
```

## Python Settings

The `python_settings` key is a nested dictionary. It contains configurations for the docstring elements within the Python interface, as well as global HTTP and Uvicorn settings.

Additional keys and values can be supplied, however, unless they are specifically implemented by custom code, they will be ignored.

### Docstring Sections

This configuration allows the user to include specific elements of the docstrings. Useful for reducing the context length when incorporating LLMs and function calling. The settings below are for the complete docstring, and are the default state.

```json
{
    "python_settings": {
        "docstring_sections": ["description", "parameters", "returns", "examples"],
        "docstring_max_length": null
    }
}
```

### HTTP

:::important
This section refers to settings available beginning OpenBB v4.4.0
:::

Configurations within, `python_settings["http"]`, apply to both, the requests, and aiohttp, libraries.

The settings are passed into the `requests.Session` object and the `aiohttp.ClientSession` object by:

- `openbb_core.provider.utils.helpers.make_request` - Sync
- `openbb_core.provider.utils.helpers.amake_request` - Async
- `openbb_core.provider.utils.helpers.amake_requests` - Async (multiple requests)
- Inserted to use with YFinance & Finviz library implementations.

Return a session object with the settings applied by:

- `openbb_core.provider.utils.helpers.get_requests_session`
- `openbb_core.provider.utils.helpers.get_async_requests_session`

:::tip
Pass the session object, returned by `get_requests_session`, to use this configuration directly with the yFinance library.

```python
import yfinance as yf
from openbb_core.provider.utils.helpers import get_requests_session

session = get_requests_session()
ticker = yf.Ticker("AAPL", session=session)
```

:::

#### Available settings:

| Key | Type | Description |
|:----|:----:|------------:|
|cafile| str | Path to a CA certificate file.|
|certfile| str | Path to a client certificate file.|
|keyfile| str | Path to a client key file.|
|password| str | Password for the client key file (aiohttp only).|
|verify_ssl| bool | Verify SSL certificates.|
|fingerprint| str | SSL fingerprint (aiohttp only).|
|proxy| str | Proxy URL.|
|proxy_auth| str, list | Proxy basic authentication (aiohttp only).|
|proxy_headers| dict | Proxy headers (aiohttp only).|
|timeout| int | Request timeout.|
|auth| str, list | Basic authentication.|
|headers| dict | Request headers.|
|cookies| dict | Dictionary of session cookies.|

Any additional keys supplied will be ignored unless explicitly implemented via custom code.

### Uvicorn

The, `python_settings["uvicorn"]`, key covers the launch of FastAPI when using the following entry points:

- Running the FastAPI as a Python module script.
  - python -m openbb_core.api.rest_api
- Running the `openbb-api` command.
  - openbb-api

All settings are passed directly to `uvicorn.run`, and can be found in the Uvicorn [documentation](https://www.uvicorn.org/settings/)

:::important
Keyword arguments supplied to the command line will take priority over the settings in this configuration.
:::


---

---
title: API Keys
sidebar_position: 1
description: An overview for setting up the Open Data Platform Python client and Fast API with data provider API keys.
keywords:
- tutorial
- Open Data Platform
- ODP
- OpenBB Platform
- Python client
- Fast API
- getting started
- authorization
- data providers
- local environment
- environment variables
---

import HeadTitle from '@site/src/components/General/HeadTitle.tsx';

<HeadTitle title="API Keys & Credentials - ODP Python | OpenBB Docs" />

By default, authorization is not required to initialize and use the core services. Most data providers, however, require an API key to access their data. Keys are stored locally, in the `~/.openbb_platform/user_settings.json` file, under the `credentials` object.

### Local Configuration

Credentials and user preferences are stored locally, `~/.openbb_platform/`, as a JSON file, `user_settings.json`. It is read upon initializing the Python client, or when the Fast API is authorized. If the file does not exist, it will be created on the first run. The schema below can be copy/pasted as a template:

```json
{
  "credentials": {
    "fmp_api_key": "REPLACE",
    "polygon_api_key": "REPLACE",
    "benzinga_api_key": "REPLACE",
    "fred_api_key": "REPLACE",
    "nasdaq_api_key": "REPLACE",
    "intrinio_api_key": "REPLACE",
    "alpha_vantage_api_key": "REPLACE",
    "biztoc_api_key": "REPLACE",
    "tradier_api_key": "REPLACE",
    "tradier_account_type": "sandbox OR live",
    "tradingeconomics_api_key": "REPLACE",
    "tiingo_token": "REPLACE"
  }
}
```

To set keys from the Python client for the current session only, access the Credentials class:

```python
obb.user.credentials.intrinio_api_key = "my_api_key"
```

:::info
See [Environment Variables](/python/settings/environment_variables) & [System Settings](/python/settings/system_settings) for more information on configuring the installation via `user_settings.json`.

See [Extensions](/python/extensions) for a current list of data provider extensions.
:::


---

---
title: Defaults
sidebar_position: 3
description: This section details configuring the Open Data Platform settings and environment variables.
keywords:
  - Open Data Platform
  - ODP
  - OpenBB Platform
  - Python client
  - getting started
  - local environment
  - environment variables
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Defaults - ODP Python | OpenBB Docs" />

In the defaults section you can define provider defaults, and other parameters, for Python commands, if no argument is explicitly sent when the command runs. For 'provider', there are two formatting options:

1. **Single provider**: this provider will be selected by default for the given command.
2. **Priority list**: the first provider in the list with all required credentials setup will be used.

```json
{
    ...
    "defaults": {
        "commands": {
            "/equity/price/historical": {
                "provider": "yfinance"
            },
            "/equity/fundamental/balance": {
                "provider": [
                    "yfinance",
                    "fmp",
                    "polygon"
                ]
            },
        }
    }
}
```

:::note

- If no configuration is specified the command will use the default priority list. This is the list of available providers for the command sorted alphabetically.

:::

#### Query Parameters

Individual parameters can also be defined in `user_settings.json`, and the values supplied will applied at runtime.
The default will be ignored when the parameter is passed in the function call.

```json
{
    ...
    "defaults": {
        "commands": {
            "/equity/price/historical": {
                "provider": "yfinance",
                "chart": true,
                "chart_params": {
                    "heikin_ashi": true,
                    "indicators": {
                        "sma": {
                            "length": [
                                21,
                                50
                            ]
                        },
                        "ema": {
                            "length": 150
                        }
                    }
                }
            },
            "/economy/cpi": {
                "provider": "oecd"
            }
        }
    }
}
```

:::important

- Default parameters are somewhat limited in the FastAPI. Apart from 'provider', they are applicable only where parameters have been defined as Optional, with a default value of None.

- Command docstrings and descriptions will not change according to items defined here.

  :::


---

---
title: User Settings
sidebar_position: 0
description:
  This section describes the `user_settings.json` file.
keywords:
  - OpenBB Platform
  - ODP
  - Python
  - API
  - user settings
  - settings
  - user_settings.json
---

<!-- markdownlint-disable MD012 MD031 MD033 MD037 -->

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";
import NewReferenceCard from "@site/src/components/General/NewReferenceCard";

<HeadTitle title="User Settings - ODP Python | OpenBB Docs" />

User settings for the ODP Python Package are defined in a JSON file,
located in the `/.openbb_platform` folder,
at the root of the operating system's user account home.

<ul className="grid grid-cols-1 gap-2 -ml-6">
  <NewReferenceCard
    title="API Keys"
    description="Setting data provider API keys and credentials."
    url="/python/settings/user_settings/api_keys"
  />
  <NewReferenceCard
    title="Preferences"
    description="Configurable user preferences for the ODP Python Package."
    url="/python/settings/user_settings/preferences"
  />
  <NewReferenceCard
    title="Defaults"
    description="Define default parameters for individual endpoints."
    url="/python/settings/user_settings/defaults"
  />
</ul>


---

---
title: Preferences
sidebar_position: 2
description: This section details configuring the Open Data Platform settings and environment variables.
keywords:
  - Open Data Platform by OpenBB
  - ODP
  - OpenBB Platform
  - Python client
  - getting started
  - local environment
  - environment variables
---

import HeadTitle from "@site/src/components/General/HeadTitle.tsx";

<HeadTitle title="Preferences - ODP Python | OpenBB Docs" />

User settings are stored locally, `~/.openbb_platform/`, as a JSON file, `user_settings.json`. It is read upon initializing the Python client, or when the Fast API is authorized. If the file does not exist, it will be created on the first run.

This file stores:

- [credentials](/python/settings/user_settings/api_keys)
- [preferences](#preferences)
- [defaults](defaults)

This is an example of how it might look after setup:

```json
{
    "credentials": {
        "fmp_api_key": "REPLACE",
        "polygon_api_key": "REPLACE",
    },
    "preferences": {
        "data_directory": "~/OpenBBUserData",
        "export_directory": "~/OpenBBUserData/exports",
        "metadata": true,
        "output_type": "OBBject"
    },
    "defaults": {
        "commands": {
            "/equity/price/historical": {
                "provider": "fmp"
            },
            "/equity/fundamental/balance": {
                "provider": [
                    "intrinio",
                    "fmp",
                    "polygon"
                ]
            },
        }
    }
}
```

### Preferences

| **Preference**        | **Default**                      | **Options**                                                         | **Description**                                                                                                                                                                                                                                                                                                          |
| --------------------- | -------------------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| data_directory        | /home/OpenBBUserData             | Any path.                                                           | When launching the application for the first time this directory will be created. It serves as the default location where the application stores usage artifacts such as logs and exports.                                                                                                                               |
| export_directory      | /home/OpenBBUserData/exports     | Any path.                                                           | The OpenBB Charting Extension provides the capability to export images in various formats. This is the directory where it attempts to save such exports.                                                                                                                                                                 |
| cache_directory       | /home/OpenBBUserData/cache       | Any path.                                                           | The directory where http requests and database caches are stored, for functions with caching.                                                                                                                                                                                                                            |
| user_styles_directory | /home/OpenBBUserData/styles/user | Any path.                                                           | The OpenBB Charting Extension supports custom stylization. This directory is the location where it looks for user-defined styles. If no user styles are found in this directory the application will proceed with the default styles.                                                                                    |
| charting_extension    | openbb_charting                  | ["openbb_charting"]                                                 | Name of the charting extension to be used with the application.                                                                                                                                                                                                                                                          |
| chart_style           | dark                             | ["dark", "light"]                                                   | The default color style to use with the OpenBB Charting Extension plots. Options include "dark", and "light".                                                                                                                                                                                                             |
| table_style           | dark                             | ["dark", "light"]                                                   | "The default color style to use with the OpenBB Charting Extension tables. Options are "dark", and "light""                                                                                                                                                                                                               |
| metadata              | true                             | [true, false]                                                       | Enables or disables the collection of metadata which provides information about operations including arguments duration route and timestamp. Disabling this feature may improve performance in cases where contextual information is not needed, or when the additional computation time and storage space are a concern. |
| output_type           | OBBject                          | ["OBBject", "dataframe", "numpy", "dict", "chart", "polars", "llm"] | Specifies the type of data the application will output when a command or endpoint is accessed. Note that choosing data formats only available in Python such as `dataframe`, `numpy`, or `polars` will render the application's API non-functional.                                                                       |
| show_warnings         | false                             | [true, false]                                                       | Enables or disables the display of warnings.                                                                                                                                                                                                                                                                             |

:::note

- If an `OpenBBUserData` folder is not in the home directory, the application will create one on first run. The user preferences with paths all default to this folder - exports, styles, or data - and can be changed at any time to suit.
- One way to export files or images from the Open Data Platform is to leverage that functionality from the ODP Charting Extension. The `export_directory` preference is the location where the extension will attempt to save CSV and image files.

:::
