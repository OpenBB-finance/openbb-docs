"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[63205],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var a=n(96540);const s={},r=a.createContext(s);function i(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:t},e.children)}},39068:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var a=n(27143),s=n(74848);function r(e){let{title:t}=e;return(0,s.jsx)(a.A,{children:(0,s.jsx)("title",{children:t})})}},96058:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"workspace/developers/ai-features/create-tables","title":"Create tables","description":"Stream tabular data as an artifact in the conversation","source":"@site/content/workspace/developers/ai-features/create-tables.md","sourceDirName":"workspace/developers/ai-features","slug":"/workspace/developers/ai-features/create-tables","permalink":"/workspace/developers/ai-features/create-tables","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenBB-finance/openbb-docs/edit/main/content/workspace/developers/ai-features/create-tables.md","tags":[],"version":"current","lastUpdatedBy":"DidierRLopes","lastUpdatedAt":1759255679000,"sidebarPosition":5,"frontMatter":{"title":"Create tables","sidebar_position":5,"description":"Stream tabular data as an artifact in the conversation","keywords":["tables","artifacts","SSE"]},"sidebar":"tutorialSidebar","previous":{"title":"Citations for documents","permalink":"/workspace/developers/ai-features/citations-for-documents"},"next":{"title":"Create charts","permalink":"/workspace/developers/ai-features/create-charts"}}');var s=n(74848),r=n(28453),i=n(39068);const o={title:"Create tables",sidebar_position:5,description:"Stream tabular data as an artifact in the conversation",keywords:["tables","artifacts","SSE"]},l=void 0,c={},d=[{value:"Architecture",id:"architecture",level:2},{value:"Query flow",id:"query-flow",level:3},{value:"OpenBB AI SDK",id:"openbb-ai-sdk",level:3},{value:"Core logic",id:"core-logic",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{title:"AI Features \u2014 Create tables | OpenBB Workspace Docs"}),"\n",(0,s.jsxs)(t.p,{children:["Emit a table artifact with ",(0,s.jsx)(t.code,{children:"table(...)"}),". Provide an array of objects; column names are inferred from object keys."]}),"\n",(0,s.jsxs)(t.p,{children:["Reference implementation in ",(0,s.jsx)(t.a,{href:"https://github.com/OpenBB-finance/agents-for-openbb/tree/main/34-vanilla-agent-tables/vanilla_agent_tables/main.py",children:"this GitHub repository"}),"."]}),"\n",(0,s.jsx)("img",{className:"pro-border-gradient",width:"800",alt:"Tables",src:"https://openbb-cms.directus.app/assets/9024844b-2b40-4878-80d0-4be2309a8297.png"}),"\n",(0,s.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(t.p,{children:"Emit table artifacts in-line so tabular data renders below the answer."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"agents.json"})," configuration:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'return JSONResponse(content={\n  "vanilla_agent_tables": {\n    "endpoints": {"query": "http://localhost:7777/v1/query"},\n    "features": {\n      "widget-dashboard-select": False,\n      "widget-dashboard-search": False,\n    },\n  }\n})\n'})}),"\n",(0,s.jsx)(t.h3,{id:"query-flow",children:"Query flow"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Process user request and generate data (from widgets, analysis, or computation)"}),"\n",(0,s.jsxs)(t.li,{children:["Stream explanatory text with ",(0,s.jsx)(t.code,{children:"message_chunk()"})]}),"\n",(0,s.jsx)(t.li,{children:"Create table data as list of dictionaries (column names from object keys)"}),"\n",(0,s.jsxs)(t.li,{children:["Emit ",(0,s.jsx)(t.code,{children:"table()"})," artifact with data, name, and description"]}),"\n",(0,s.jsx)(t.li,{children:"Table renders below the streamed text in Workspace UI"}),"\n",(0,s.jsx)(t.li,{children:"Continue with additional content or complete response"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"openbb-ai-sdk",children:"OpenBB AI SDK"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"table(data, name, description)"}),": Creates ",(0,s.jsx)(t.code,{children:"MessageArtifactSSE"})," for table display","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"data"}),": List of dictionaries where keys become column headers"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"name"}),": Table title displayed in UI"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"description"}),": Optional table description"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"message_chunk(text)"}),": Streams explanatory text before/after tables"]}),"\n",(0,s.jsx)(t.li,{children:"Tables automatically handle data formatting and sorting in UI"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"core-logic",children:"Core logic"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from openbb_ai import message_chunk, table\nfrom openbb_ai.models import QueryRequest\n\nasync def query(request: QueryRequest) -> EventSourceResponse:\n    async def execution_loop():\n        # Stream introduction\n        yield message_chunk("Let me analyze the financial data and create a summary table.\\n\\n").model_dump()\n\n        # Generate or process data (from widgets, calculations, etc.)\n        financial_data = [\n            {"symbol": "AAPL", "price": 150.25, "change": 2.5, "volume": 1200000},\n            {"symbol": "MSFT", "price": 280.75, "change": -1.2, "volume": 890000},\n            {"symbol": "GOOGL", "price": 2650.80, "change": 15.3, "volume": 560000},\n        ]\n\n        # Create table artifact\n        yield table(\n            data=financial_data,\n            name="Stock Market Summary",\n            description="Current stock prices with daily changes and trading volume"\n        ).model_dump()\n\n        # Stream additional analysis\n        yield message_chunk("\\n\\nThe table above shows the current market status. AAPL and GOOGL are up, while MSFT is down slightly.").model_dump()\n\n    return EventSourceResponse(execution_loop(), media_type="text/event-stream")\n'})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);