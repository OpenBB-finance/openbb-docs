"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[96373],{25934:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=t(74848),a=t(28453);const o={title:"PDF Viewer",sidebar_position:6,description:"Learn how to integrate your own backend with OpenBB Terminal Pro using the cookie-cutter or language-agnostic API approaches, with illustrative guides and principles for handling widget.json files, APIs, interfaces, Python, FastAPI, and more.",keywords:["widgets.json","OpenBB API","Endpoint integration","widget configuration","Language-Agnostic API","API implementation","Python","FastAPI","Terminal Pro widgets","Widget definitions"]},s="PDF Viewer Widget",r={id:"terminal/custom-backend/Widgets/pdf",title:"PDF Viewer",description:"Learn how to integrate your own backend with OpenBB Terminal Pro using the cookie-cutter or language-agnostic API approaches, with illustrative guides and principles for handling widget.json files, APIs, interfaces, Python, FastAPI, and more.",source:"@site/content/terminal/custom-backend/Widgets/pdf.md",sourceDirName:"terminal/custom-backend/Widgets",slug:"/terminal/custom-backend/Widgets/pdf",permalink:"/terminal/custom-backend/Widgets/pdf",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenBB-finance/openbb-docs/edit/main/content/terminal/custom-backend/Widgets/pdf.md",tags:[],version:"current",lastUpdatedBy:"Andrew",lastUpdatedAt:1742312264e3,sidebarPosition:6,frontMatter:{title:"PDF Viewer",sidebar_position:6,description:"Learn how to integrate your own backend with OpenBB Terminal Pro using the cookie-cutter or language-agnostic API approaches, with illustrative guides and principles for handling widget.json files, APIs, interfaces, Python, FastAPI, and more.",keywords:["widgets.json","OpenBB API","Endpoint integration","widget configuration","Language-Agnostic API","API implementation","Python","FastAPI","Terminal Pro widgets","Widget definitions"]},sidebar:"tutorialSidebar",previous:{title:"Multi File Viewer",permalink:"/terminal/custom-backend/Widgets/multi-file-viewer"},next:{title:"Widget Settings",permalink:"/terminal/custom-backend/advanced-controls/widget-settings"}},d={},l=[{value:"Step 1: Set Up Your Project",id:"step-1-set-up-your-project",level:2},{value:"Step 2: Create the PDF Viewer Endpoint",id:"step-2-create-the-pdf-viewer-endpoint",level:2},{value:"Edit the widgets.json File",id:"edit-the-widgetsjson-file",level:3},{value:"Step 3: Run the Application",id:"step-3-run-the-application",level:2},{value:"Step 4: Add to OpenBB Pro",id:"step-4-add-to-openbb-pro",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"pdf-viewer-widget",children:"PDF Viewer Widget"}),"\n",(0,i.jsx)(n.p,{children:"This guide will walk you through the process of creating a PDF Viewer widget for OpenBB Terminal Pro. By the end of this guide, you will have a working PDF Viewer widget that you can add to OpenBB Terminal Pro."}),"\n",(0,i.jsx)(n.h2,{id:"step-1-set-up-your-project",children:"Step 1: Set Up Your Project"}),"\n",(0,i.jsx)(n.p,{children:"To get started, create the main application file and the widget configuration file. You will only need these two files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"main.py"}),": This file will contain your FastAPI application code."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"widgets.json"}),": This file will define the configuration for your widget."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The backend will use the same FastAPI setup and structure as described in the ",(0,i.jsx)(n.a,{href:"/terminal/custom-backend/",children:"Custom Backend"})," page."]}),"\n",(0,i.jsx)(n.h2,{id:"step-2-create-the-pdf-viewer-endpoint",children:"Step 2: Create the PDF Viewer Endpoint"}),"\n",(0,i.jsxs)(n.p,{children:["Edit the ",(0,i.jsx)(n.code,{children:"main.py"})," file and add the following code."]}),"\n",(0,i.jsx)(n.p,{children:"You can use two different endpoints to serve the PDF Viewer widget. The first one is the base64 endpoint, which serves the PDF file as a base64 encoded string. The second one is the URL endpoint, which serves the PDF file as a URL (this works best as a presigned URL - The URL must be publicly accessible). The code below sets up the endpoints for the PDF Viewer widget."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'...\n# PDF Viewer base64 endpoint\n@app.get("/files-base64")\ndef get_files_base64(name: str):\n    """Serve a file through base64 encoding."""\n    try:\n        with open(ROOT_PATH / name, "rb") as file:\n            file_data = file.read()\n            encoded_data = base64.b64encode(file_data)\n            content = encoded_data.decode("utf-8")\n    except FileNotFoundError:\n        raise HTTPException(status_code=404, detail="File not found")\n    return JSONResponse(\n        headers={"Content-Type": "application/json"},\n        content={\n            "data_format": {\n                "data_type": "pdf",\n                "filename": name,\n            },\n            "content": content,\n        },\n    )\n\n# PDF Viewer URL endpoint\n@app.get("/files-url")\ndef get_files_url(name: str):\n    """Serve a file through URL."""\n    FILES = {\n        "openbb-story.pdf": "https://openbb-assets.s3.us-east-1.amazonaws.com/testing/openbb_story.pdf",\n        "sample.pdf": "https://openbb-assets.s3.us-east-1.amazonaws.com/testing/sample.pdf",\n    }\n    file_reference = FILES.get(name)\n    if not file_reference:\n        raise HTTPException(status_code=404, detail="File not found")\n    return JSONResponse(\n        headers={"Content-Type": "application/json"},\n        content={\n            "data_format": {\n                "data_type": "pdf",\n                "filename": name,\n            },\n            "file_reference": file_reference,\n        },\n    )\n'})}),"\n",(0,i.jsx)(n.h3,{id:"edit-the-widgetsjson-file",children:"Edit the widgets.json File"}),"\n",(0,i.jsxs)(n.p,{children:["Open the ",(0,i.jsx)(n.code,{children:"widgets.json"})," file and add the following JSON data. This configuration defines the widget's properties and how it should be displayed in the OpenBB Terminal Pro."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "base64_pdf": {\n    "name": "Base 64 PDF",\n    "description": "Display a PDF file",\n    "category": "Other",\n    "type": "pdf",\n    "endpoint": "files-base64",\n    "gridData": {\n      "w": 20,\n      "h": 20\n    },\n    "params": [\n      {\n        "paramName": "name",\n        "value": "sample.pdf",\n        "label": "Name",\n        "type": "text",\n        "description": "Name of the file"\n      }\n    ]\n  },\n  "url_pdf": {\n    "name": "URL PDF files",\n    "description": "Display a PDF file",\n    "category": "Other",\n    "type": "pdf",\n    "endpoint": "files-url",\n    "gridData": {\n      "w": 20,\n      "h": 20\n    },\n    "params": [\n      {\n        "paramName": "name",\n        "value": "openbb-story.pdf",\n        "label": "Name",\n        "description": "Name of the file",\n        "options": [\n          {\n            "value": "openbb-story.pdf",\n            "label": "OpenBB Story"\n          },\n          {\n            "value": "sample.pdf",\n            "label": "Sample"\n          }\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-run-the-application",children:"Step 3: Run the Application"}),"\n",(0,i.jsx)(n.p,{children:"Start the FastAPI Server using Uvicorn. This will host your backend locally:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uvicorn main:app --host localhost --port 5050\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-add-to-openbb-pro",children:"Step 4: Add to OpenBB Pro"}),"\n",(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.a,{href:"https://pro.openbb.co/app/data-connectors",children:"OpenBB Pro Data Connectors"})," and add your backend by clicking on the ",(0,i.jsx)(n.code,{children:"+ Add Data"})," button in the top right corner. Select ",(0,i.jsx)(n.code,{children:"Custom Backend"})," and fill in the details. Your URL will be ",(0,i.jsx)(n.code,{children:"http://localhost:5050"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Once you have added your backend, you can find the widget in the ",(0,i.jsx)(n.code,{children:"Documents"})," category with the name ",(0,i.jsx)(n.code,{children:"PDF Viewer"}),"."]}),"\n",(0,i.jsx)("img",{className:"pro-border-gradient",width:"600",alt:"pdf-viewer",src:"https://openbb-assets.s3.us-east-1.amazonaws.com/docs/pro/pdf-widget.png"}),"\n",(0,i.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.p,{children:["You can find more examples of how to set up your own backend in the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenBB-finance/backend-for-terminal-pro",children:"Backend for Terminal Pro GitHub"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(96540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);