"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[84875],{28453(e,t,n){n.d(t,{R:()=>r,x:()=>d});var a=n(96540);const i={},o=a.createContext(i);function r(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:t},e.children)}},47450(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>d,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"workspace/developers/widget-types/markdown","title":"Markdown","description":"Learn how to create and customize markdown widgets in OpenBB Workspace, including basic markdown display and data-rich markdown with dynamic content integration.","source":"@site/content/workspace/developers/widget-types/markdown.md","sourceDirName":"workspace/developers/widget-types","slug":"/workspace/developers/widget-types/markdown","permalink":"/workspace/developers/widget-types/markdown","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenBB-finance/openbb-docs/edit/main/content/workspace/developers/widget-types/markdown.md","tags":[],"version":"current","lastUpdatedBy":"Andrew","lastUpdatedAt":1771264959000,"sidebarPosition":4,"frontMatter":{"title":"Markdown","sidebar_position":4,"description":"Learn how to create and customize markdown widgets in OpenBB Workspace, including basic markdown display and data-rich markdown with dynamic content integration.","keywords":["markdown widget","widget configuration","dynamic markdown","data integration","widget display","markdown formatting","widget customization","OpenBB Workspace","widget development","markdown content"]},"sidebar":"tutorialSidebar","previous":{"title":"Data Integration","permalink":"/workspace/developers/data-integration"},"next":{"title":"HTML","permalink":"/workspace/developers/widget-types/html"}}');var i=n(74848),o=n(28453),r=n(94331);const d={title:"Markdown",sidebar_position:4,description:"Learn how to create and customize markdown widgets in OpenBB Workspace, including basic markdown display and data-rich markdown with dynamic content integration.",keywords:["markdown widget","widget configuration","dynamic markdown","data integration","widget display","markdown formatting","widget customization","OpenBB Workspace","widget development","markdown content"]},s=void 0,c={},m=[{value:"Data rich markdown",id:"data-rich-markdown",level:2},{value:"Markdown Widget with Local Image",id:"markdown-widget-with-local-image",level:2},{value:"Markdown Widget with Image from URL",id:"markdown-widget-with-image-from-url",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{title:"Markdown | OpenBB Workspace Docs"}),"\n",(0,i.jsx)(t.p,{children:"A simple widget that displays markdown content."}),"\n",(0,i.jsx)("img",{className:"pro-border-gradient",width:"800",alt:"Markdown Widget Example",src:"https://openbb-cms.directus.app/assets/60cbbcb5-194e-4c03-905e-65f3de7f4efe.png"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'@register_widget({\n    "name": "Markdown Widget",\n    "description": "A markdown widget",\n    "type": "markdown",\n    "endpoint": "markdown_widget",\n    "gridData": {"w": 12, "h": 4},\n})\n@app.get("/markdown_widget")\ndef markdown_widget():\n    """Returns a markdown widget"""\n    return "# Markdown Widget"\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The gridData parameter specifies the widget's size in the OpenBB Workspace grid system. More on that can be found ",(0,i.jsx)(t.a,{href:"../widget-configuration/grid-size",children:"here"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"data-rich-markdown",children:"Data rich markdown"}),"\n",(0,i.jsx)("img",{className:"pro-border-gradient",width:"600",alt:"markdown",src:"https://openbb-assets.s3.us-east-1.amazonaws.com/docs/pro/markdown-widget.png"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'@register_widget({\n  "name": "Defi Llama Protocol Details",\n  "description": "Details for a given protocol",\n  "category": "Crypto",\n  "defaultViz": "markdown",\n  "endpoint": "defi_llama_protocol_details",\n  "gridData": {"w": 20, "h": 9},\n  "source": "Defi Llama",\n  "params": [\n    {\n      "paramName": "protocol_id",\n      "value": "aave",\n      "label": "Protocol",\n      "type": "text",\n      "description": "Defi Llama ID of the protocol"\n    }\n  ]\n})\n@app.get("/defi_llama_protocol_details")\ndef defi_llama_protocol_details(protocol_id: str = None):\n    """Get details for a given protocol using Defi Llama"""\n    data = requests.get(f\'https://api.llama.fi/protocol/{protocol_id}\')\n\n    if data.status_code == 200:\n        data = data.json()\n    else:\n        return JSONResponse(content={"error": data.text}, status_code=data.status_code)\n\n    github_links = ""\n    if \'github\' in data and data[\'github\']:\n        github_links = "**GitHub:** " + ", ".join(data[\'github\'])\n\n    # Use HTML for multi-column layout\n    markdown = dedent(f"""\n        ![{data.get(\'name\', \'N/A\')} Logo]({data.get(\'logo\', \'\')}) \n        # {data.get(\'name\', \'N/A\')} ({data.get(\'symbol\', \'N/A\').upper()})\n        **Description:** {data.get(\'description\', \'N/A\')}\n        ---\n        ## Twitter\n        **Twitter:** {data.get(\'twitter\', \'N/A\')}\n        ## Links\n        **Website:** {data.get(\'url\', \'N/A\')}\n        {github_links}\n    """)\n    return markdown\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note:"})," The ",(0,i.jsx)(t.code,{children:"dedent"})," function is used to remove leading whitespace from the markdown string. This is a good practice to ensure the markdown is formatted correctly."]}),"\n",(0,i.jsx)(t.h2,{id:"markdown-widget-with-local-image",children:"Markdown Widget with Local Image"}),"\n",(0,i.jsx)(t.p,{children:"A widget that displays markdown content with an embedded local image. The image is converted to base64 for display."}),"\n",(0,i.jsx)("img",{className:"pro-border-gradient",width:"800",alt:"Markdown Widget with Local Image Example",src:"https://openbb-cms.directus.app/assets/f2847732-a01e-4146-8095-5dc389c98c7a.png"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'@register_widget({\n    "name": "Markdown Widget with Local Image",\n    "description": "A markdown widget with a local image",\n    "type": "markdown",\n    "endpoint": "markdown_widget_with_local_image",\n    "gridData": {"w": 20, "h": 20},\n})\n@app.get("/markdown_widget_with_local_image")\ndef markdown_widget_with_local_image():\n    """Returns a markdown widget with a local image"""\n    try:\n        with open("img.png", "rb") as image_file:\n            image_base64 = base64.b64encode(image_file.read()).decode(\'utf-8\')\n            return f"![Local Image](data:image/png;base64,{image_base64})"\n    except FileNotFoundError:\n        raise HTTPException(\n            status_code=500,\n            detail="Image file not found"\n        ) from e\n    except Exception as e:\n        raise HTTPException(\n            status_code=500,\n            detail=f"Error reading image: {str(e)}"\n        ) from e\n'})}),"\n",(0,i.jsx)(t.h2,{id:"markdown-widget-with-image-from-url",children:"Markdown Widget with Image from URL"}),"\n",(0,i.jsx)(t.p,{children:"The Markdown widget also provides image handling capabilities, supporting both local and remote images. Images are converted to base64 format for displaying."}),"\n",(0,i.jsx)(t.p,{children:"Below is a markdown widget that displays markdown content with an image fetched from a URL. The image is converted to base64 for display."}),"\n",(0,i.jsx)("img",{className:"pro-border-gradient",width:"800",alt:"Markdown Widget with Image from URL Example",src:"https://openbb-cms.directus.app/assets/bf26f507-ec62-45d8-bec2-531fe75624e4.png"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'@register_widget({\n    "name": "Markdown Widget with Image from URL",\n    "description": "A markdown widget with an image from a URL",\n    "type": "markdown",\n    "endpoint": "markdown_widget_with_image_from_url",\n    "gridData": {"w": 20, "h": 20},\n})\n@app.get("/markdown_widget_with_image_from_url")\ndef markdown_widget_with_image_from_url():\n    """Returns a markdown widget with an image from a URL"""\n    image_url = "https://api.star-history.com/svg?repos=openbb-finance/OpenBB&type=Date&theme=dark"\n    \n    try:\n        response = requests.get(image_url, timeout=10)\n        response.raise_for_status()\n        \n        content_type = response.headers.get(\'content-type\', \'\')\n        if not content_type.startswith(\'image/\'):\n            raise HTTPException(\n                status_code=500,\n                detail=f"URL did not return an image. Content-Type: {content_type}"\n            )\n\n        image_base64 = base64.b64encode(response.content).decode(\'utf-8\')\n        return f"![OpenBB Logo](data:{content_type};base64,{image_base64})"\n        \n    except requests.RequestException as e:\n        raise HTTPException(\n            status_code=500,\n            detail=f"Failed to fetch image: {str(e)}"\n        ) from e\n    except Exception as e:\n        raise HTTPException(\n            status_code=500,\n            detail=f"Error processing image: {str(e)}"\n        ) from e\n'})})]})}function g(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},94331(e,t,n){n.d(t,{A:()=>o});n(96540);var a=n(5260),i=n(74848);function o({title:e}){return(0,i.jsx)(a.A,{children:(0,i.jsx)("title",{children:e})})}}}]);