"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[63484],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},39068:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var i=t(27143),o=t(74848);function s(e){let{title:n}=e;return(0,o.jsx)(i.A,{children:(0,o.jsx)("title",{children:n})})}},59195:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"python/developer/extension_types/from_fastapi","title":"From FastAPI","description":"This page explains how to convert an existing FastAPI application to an ODP Python Package, without changing any code.","source":"@site/content/python/developer/extension_types/from_fastapi.md","sourceDirName":"python/developer/extension_types","slug":"/python/developer/extension_types/from_fastapi","permalink":"/python/developer/extension_types/from_fastapi","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenBB-finance/openbb-docs/edit/main/content/python/developer/extension_types/from_fastapi.md","tags":[],"version":"current","lastUpdatedBy":"Danglewood","lastUpdatedAt":1768529308000,"sidebarPosition":2,"frontMatter":{"title":"From FastAPI","sidebar_position":2,"description":"This page explains how to convert an existing FastAPI application to an ODP Python Package, without changing any code.","keywords":["ODP","Router","FastAPI","APIRouter","API","Python","Development","OpenBB Platform","extensions","how-to"]},"sidebar":"tutorialSidebar","previous":{"title":"Router Extensions","permalink":"/python/developer/extension_types/router"},"next":{"title":"Provider Extensions","permalink":"/python/developer/extension_types/provider"}}');var o=t(74848),s=t(28453),r=t(39068);const a={title:"From FastAPI",sidebar_position:2,description:"This page explains how to convert an existing FastAPI application to an ODP Python Package, without changing any code.",keywords:["ODP","Router","FastAPI","APIRouter","API","Python","Development","OpenBB Platform","extensions","how-to"]},l=void 0,d={},c=[{value:"Add Dependency",id:"add-dependency",level:2},{value:"Entry Point",id:"entry-point",level:2},{value:"Poetry",id:"poetry",level:3},{value:"Standard",id:"standard",level:3},{value:"Install",id:"install",level:2},{value:"Build",id:"build",level:2},{value:"Import",id:"import",level:3},{value:"Known Limitations",id:"known-limitations",level:2},{value:"Auth Hooks",id:"auth-hooks",level:3},{value:"Dependency Injections",id:"dependency-injections",level:3},{value:"Streaming Endpoints",id:"streaming-endpoints",level:3},{value:"Multi-Method API Routes",id:"multi-method-api-routes",level:3},{value:"Tips &amp; Workarounds",id:"tips--workarounds",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Static Assets Location",id:"static-assets-location",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.A,{title:"Converting FastAPI Apps - Developer | OpenBB Docs"}),"\n",(0,o.jsx)(n.p,{children:"This page explains how to convert an existing FastAPI application to an ODP Python Package, without changing any code."}),"\n",(0,o.jsxs)(n.p,{children:["All that's required is defining the entry point in ",(0,o.jsx)(n.code,{children:"pyproject.toml"}),", directed to an instance of either, ",(0,o.jsx)(n.code,{children:"fastapi.FastAPI"})," or ",(0,o.jsx)(n.code,{children:"fastapi.APIRouter"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"If you are already familiar with FastAPI, this is an excellent way to get started making OpenBB Python Package extensions."})}),"\n",(0,o.jsxs)(n.p,{children:["Each API route (GET or POST) will be added to the ",(0,o.jsx)(n.code,{children:"obb"})," Python package under the assigned name - ",(0,o.jsx)(n.code,{children:"i.e, obb.my_app.some_function"})," - and will be an equivalent to\nthe REST API endpoint.\nThe resulting app will be an independent module that does not require a server.\nThey will combine and operate like any other ODP ",(0,o.jsx)(n.a,{href:"/python/developer/extension_types/router",children:"router"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"add-dependency",children:"Add Dependency"}),"\n",(0,o.jsxs)(n.p,{children:["Add ",(0,o.jsx)(n.code,{children:"openbb-core"})," (version pinning is not recommended, use the latest or ",(0,o.jsx)(n.code,{children:">=1.5.5"}),") to the project's dependencies."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"If not already in your environment, this will introduce Numpy, Pandas, and Uvicorn."})}),"\n",(0,o.jsx)(n.h2,{id:"entry-point",children:"Entry Point"}),"\n",(0,o.jsxs)(n.p,{children:["In, ",(0,o.jsx)(n.code,{children:"pyproject.toml"}),", add a section where the object to the right of the colon is the configured instance of ",(0,o.jsx)(n.code,{children:"FastAPI"})," or ",(0,o.jsx)(n.code,{children:"APIRouter"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"ODP Python uses Poetry as the build tool, but you can use any PEP 517-compliant build backend."}),"\n",(0,o.jsx)(n.h3,{id:"poetry",children:"Poetry"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-toml",children:'[tool.poetry.plugins."openbb_core_extension"]\nmy_app = "my_package.app:app"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"standard",children:"Standard"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-toml",children:'[project.entry-points."openbb_core_extension"]\nmy_app = "my_package.app.some_router:router"\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Factory functions are not supported. A configured instance must exist on package initialization."})}),"\n",(0,o.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,o.jsx)(n.p,{children:"The extension must be installed for it to be recognized, use your preferred method of installation. Installing as editable is recommended for development and testing."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"pip install -e .\n"})}),"\n",(0,o.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,o.jsxs)(n.p,{children:["The API can be started ",(0,o.jsx)(n.a,{href:"/python/quickstart/rest_api",children:"immediately"}),"; but, to use as a Python package, the static assets must be built."]}),"\n",(0,o.jsx)(n.p,{children:"From the command line, enter:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"openbb-build\n"})}),"\n",(0,o.jsx)(n.h3,{id:"import",children:"Import"}),"\n",(0,o.jsx)(n.p,{children:"Upon completion, it is ready to use. Import the package with:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"from openbb import obb\n\nprint(obb.my_app)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"known-limitations",children:"Known Limitations"}),"\n",(0,o.jsx)(n.p,{children:"The Python interface will be nearly identical to its REST equivalent,\nwith some notable differences and technical limitations."}),"\n",(0,o.jsx)(n.p,{children:"Primarily, the client/server relationship does not exist within the Python interface."}),"\n",(0,o.jsx)(n.h3,{id:"auth-hooks",children:"Auth Hooks"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Authorization hooks will not be injected into the Python static assets,\nfunctions are expected to operate without authorization."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"dependency-injections",children:"Dependency Injections"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Request-bound dependnecies, or those returning ",(0,o.jsx)(n.code,{children:"None"}),", will not be injected."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Command execution may fail where endpoints require access to the ",(0,o.jsx)(n.code,{children:"Request"})," or ",(0,o.jsx)(n.code,{children:"Headers"}),"."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Additional handling may be required if endpoint code explicitly accesses these objects as locals."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"All other dependencies are injected into the static assets as locals."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"streaming-endpoints",children:"Streaming Endpoints"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Websockets are not currently supported. They will still be part of the REST API, but no Swagger docs will be generated, and they will be excluded from the Python interface."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Streaming responses (one-way communication) will work, but are not officially supported and may have unexpected outcomes."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"multi-method-api-routes",children:"Multi-Method API Routes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["API routes with multiple methods (e.g., ",(0,o.jsx)(n.code,{children:"/my_app/some_function"})," has both ",(0,o.jsx)(n.code,{children:"GET"})," and ",(0,o.jsx)(n.code,{children:"POST"})," operations) may not generate correctly.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Consider implementing the methods as API path parameters."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"tips--workarounds",children:"Tips & Workarounds"}),"\n",(0,o.jsxs)(n.p,{children:["If you are having trouble building the static assets for a full application, consider targeting individual routers or wrapping functions in an instance of ",(0,o.jsx)(n.code,{children:"fastapi.APIRouter"}),". This will help isolate and identify any problematic endpoints."]}),"\n",(0,o.jsxs)(n.p,{children:["Rich metadata for each function will be generated and stored under ",(0,o.jsx)(n.code,{children:"obb.reference"}),".\nParameters and Returns sections of docstrings will be automatically generated from model definitions and annotations.\nFor best results, use descriptive Pydantic models."]}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsxs)(n.p,{children:["Some issues may be resolved by installing the latest version of ",(0,o.jsx)(n.code,{children:"openbb-core"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["If ",(0,o.jsx)(n.code,{children:"openbb-build"})," results in an error and does not complete, check the error message for clues. For a verbose output, set the environment variable, ",(0,o.jsx)(n.code,{children:"OPENBB_DEBUG_MODE='1'"})," and run it again."]}),"\n",(0,o.jsx)(n.p,{children:"Encountered errors may be related to module imports, function signatures, docstrings, or type annotations."}),"\n",(0,o.jsxs)(n.p,{children:["If ",(0,o.jsx)(n.code,{children:"openbb-build"})," succeeds, and you encounter an import error, after ",(0,o.jsx)(n.code,{children:"from openbb import obb"}),", the static assets may have been corrupted.\nEnable debug mode, run ",(0,o.jsx)(n.code,{children:"openbb-build"})," again and inspect the final result."]}),"\n",(0,o.jsxs)(n.p,{children:["If build and import were successful but an error occurs on accessing the application property, there may have been a linting error.\nTry, ",(0,o.jsx)(n.code,{children:"pip install -U ruff black"}),", and then run ",(0,o.jsx)(n.code,{children:"openbb-build"})," again.\nIf it persists, make note of the complete error and inspect the static assets. Adjust function annotations and types to further diagnose."]}),"\n",(0,o.jsx)(n.h3,{id:"static-assets-location",children:"Static Assets Location"}),"\n",(0,o.jsxs)(n.p,{children:["You can inspect the resulting files, which are found in the ",(0,o.jsx)(n.code,{children:"site-packages"})," folder of the environment. The relative path is:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"/site-packages/openbb/package/\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If the issue cannot be resolved with changes to your code, please open an issue on ",(0,o.jsx)(n.a,{href:"https://github.com/OpenBB-finance/OpenBB/issues",children:"GitHub"}),"\nwith the full error messages, original vs. generated snippets, along with any other environment and platform context."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);